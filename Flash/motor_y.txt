; generated by Component: ARM Compiler 5.06 update 1 (build 61) Tool: ArmCC [4d35ad]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\flash\motor_y.o --asm_dir=.\Flash\ --list_dir=.\Flash\ --depend=.\flash\motor_y.d --cpu=Cortex-M3 --apcs=interwork -O3 --diag_suppress=9931 -I.\UCNC -I.\Drivers\include -I.\Drivers -ID:\Projects\Frezer\Frezer.keil\01020124\RTE -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.1\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Keil\LPC1700_DFP\2.3.0\Device\Include -D__UVISION_VERSION=517 -D_RTE_ -DLPC175x_6x --omf_browse=.\flash\motor_y.crf Main\Motor_Y.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  MotorY_Handler PROC
;;;352    
;;;353    void	MotorY_Handler(void){
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;354    	CHECKLPOFF(ms_Y.LPOFF);	
000004  4c30              LDR      r4,|L1.200|
000006  6aa0              LDR      r0,[r4,#0x28]  ; ms_Y
000008  6ae1              LDR      r1,[r4,#0x2c]  ; ms_Y
00000a  1e40              SUBS     r0,r0,#1
00000c  f1710000          SBCS     r0,r1,#0
000010  d203              BCS      |L1.26|
000012  2101              MOVS     r1,#1                 ;353
000014  2000              MOVS     r0,#0                 ;353
000016  62a1              STR      r1,[r4,#0x28]  ; ms_Y
000018  62e0              STR      r0,[r4,#0x2c]  ; ms_Y
                  |L1.26|
;;;355    	if (ms_Y.Level==0) {
00001a  7820              LDRB     r0,[r4,#0]  ; ms_Y
;;;356    		if ((fmvc.Enable==0)&&(ClrF==0))  { 
;;;357    			// защита от нулевого направления
;;;358    			if (*(ms_Y.Dir) == 0) {
;;;359    				Msg("YD0\r\n");
;;;360    				if (QGetPin(MOTOR_Yl_DIR)) *(ms_Y.Dir) = 1;
;;;361    				else *(ms_Y.Dir)=-1;
;;;362    			}
;;;363    			ClrSY = 0;
;;;364    			// конец пассивного импульса или начало движение
;;;365    			if (*mc_Y.PositOn && (!(*ms_Y.Posit))) {
;;;366    				PositY();
;;;367    			} else
;;;368    			if (*(mc_Y.MovePos)) 
;;;369    				MovePosY();
;;;370    			else
;;;371    				MoveBtnY();
;;;372    			if (ms_Y.Level) {
;;;373    				ClrSY = 1; 
;;;374    				// вариант с прямой логикой
;;;375    				//QSetPin(MOTOR_Y_STEP);	
;;;376    				//TCS_SetInterval(tcs_MotorY,ms_X.LPON);		
;;;377    				// *** вариант с обратной логикой
;;;378    				QClrPin(MOTOR_Yl_STEP);	
;;;379    				QClrPin(MOTOR_Yr_STEP);	
;;;380    				TCS_SetInterval(tcs_MotorY,ms_Y.LPOFF);		
00001c  4e2a              LDR      r6,|L1.200|
00001e  2700              MOVS     r7,#0                 ;355
000020  3e48              SUBS     r6,r6,#0x48
000022  b148              CBZ      r0,|L1.56|
;;;381    			} else {
;;;382    				QClrPin(MOTOR_Yl_STEP);	
;;;383    				QClrPin(MOTOR_Yr_STEP);	
;;;384    				TCS_SetInterval(tcs_MotorY,ms_Y.LPOFF);		
;;;385    			}	
;;;386    		} else {
;;;387    				// мониторинг
;;;388    				if (ClrSY) {
;;;389    					QClrPin(MOTOR_Yl_STEP);	
;;;390    					QClrPin(MOTOR_Yr_STEP);	
;;;391    					ClrSY = 0;
;;;392    				}
;;;393    				TCS_SetInterval(tcs_MotorY,2500000);		
;;;394    		}	
;;;395    	} else {
;;;396    		// конец активного исмпульса
;;;397    		//OFF_PULSE;
;;;398    		ms_Y.Level = 0;								
000024  7027              STRB     r7,[r4,#0]
;;;399    		QSetPin(MOTOR_Yl_STEP);						
000026  2003              MOVS     r0,#3
000028  f7fffffe          BL       QSetPin
;;;400    		QSetPin(MOTOR_Yr_STEP);						
00002c  2006              MOVS     r0,#6
00002e  f7fffffe          BL       QSetPin
;;;401    		TCS_SetInterval(tcs_MotorY,ms_Y.LPON);		
000032  6a20              LDR      r0,[r4,#0x20]  ; ms_Y
000034  6a61              LDR      r1,[r4,#0x24]  ; ms_Y
000036  e044              B        |L1.194|
                  |L1.56|
000038  4824              LDR      r0,|L1.204|
00003a  4925              LDR      r1,|L1.208|
00003c  4d25              LDR      r5,|L1.212|
00003e  7e00              LDRB     r0,[r0,#0x18]         ;356  ; fmvc
000040  7809              LDRB     r1,[r1,#0]            ;356  ; ClrF
000042  4308              ORRS     r0,r0,r1              ;356
000044  d00a              BEQ      |L1.92|
000046  7828              LDRB     r0,[r5,#0]            ;388  ; ClrSY
000048  b130              CBZ      r0,|L1.88|
00004a  2003              MOVS     r0,#3                 ;389
00004c  f7fffffe          BL       QClrPin
000050  2006              MOVS     r0,#6                 ;390
000052  f7fffffe          BL       QClrPin
000056  702f              STRB     r7,[r5,#0]            ;391
                  |L1.88|
000058  481f              LDR      r0,|L1.216|
00005a  e032              B        |L1.194|
                  |L1.92|
00005c  6860              LDR      r0,[r4,#4]            ;358  ; ms_Y
00005e  f04f0801          MOV      r8,#1                 ;360
000062  7800              LDRB     r0,[r0,#0]            ;358
000064  b968              CBNZ     r0,|L1.130|
000066  a01d              ADR      r0,|L1.220|
000068  f7fffffe          BL       Msg
00006c  2004              MOVS     r0,#4                 ;360
00006e  f7fffffe          BL       QGetPin
000072  b118              CBZ      r0,|L1.124|
000074  6861              LDR      r1,[r4,#4]            ;360  ; ms_Y
000076  f8818000          STRB     r8,[r1,#0]            ;360
00007a  e002              B        |L1.130|
                  |L1.124|
00007c  6861              LDR      r1,[r4,#4]            ;361  ; ms_Y
00007e  20ff              MOVS     r0,#0xff              ;361
000080  7008              STRB     r0,[r1,#0]            ;361
                  |L1.130|
000082  4811              LDR      r0,|L1.200|
000084  702f              STRB     r7,[r5,#0]            ;363
000086  382c              SUBS     r0,r0,#0x2c           ;365
000088  6a41              LDR      r1,[r0,#0x24]         ;365  ; mc_Y
00008a  7809              LDRB     r1,[r1,#0]            ;365
00008c  b111              CBZ      r1,|L1.148|
00008e  6b21              LDR      r1,[r4,#0x30]         ;365  ; ms_Y
000090  7809              LDRB     r1,[r1,#0]            ;365
000092  b129              CBZ      r1,|L1.160|
                  |L1.148|
000094  6a00              LDR      r0,[r0,#0x20]         ;368  ; mc_Y
000096  7800              LDRB     r0,[r0,#0]            ;368
000098  b128              CBZ      r0,|L1.166|
00009a  f7fffffe          BL       MovePosY
00009e  e004              B        |L1.170|
                  |L1.160|
0000a0  f7fffffe          BL       PositY
0000a4  e001              B        |L1.170|
                  |L1.166|
0000a6  f7fffffe          BL       MoveBtnY
                  |L1.170|
0000aa  7820              LDRB     r0,[r4,#0]            ;372  ; ms_Y
0000ac  b108              CBZ      r0,|L1.178|
0000ae  f8858000          STRB     r8,[r5,#0]            ;373
                  |L1.178|
0000b2  2003              MOVS     r0,#3                 ;382
0000b4  f7fffffe          BL       QClrPin
0000b8  2006              MOVS     r0,#6                 ;383
0000ba  f7fffffe          BL       QClrPin
0000be  6aa0              LDR      r0,[r4,#0x28]         ;384  ; ms_Y
0000c0  6ae1              LDR      r1,[r4,#0x2c]         ;384  ; ms_Y
                  |L1.194|
0000c2  6070              STR      r0,[r6,#4]  ; tcs_MotorY
;;;402    	}
;;;403    }
0000c4  e8bd81f0          POP      {r4-r8,pc}
;;;404    
                          ENDP

                  |L1.200|
                          DCD      ||.bss||+0x48
                  |L1.204|
                          DCD      fmvc
                  |L1.208|
                          DCD      ClrF
                  |L1.212|
                          DCD      ||.data||
                  |L1.216|
                          DCD      0x002625a0
                  |L1.220|
0000dc  5944300d          DCB      "YD0\r\n",0
0000e0  0a00    
0000e2  00                DCB      0
0000e3  00                DCB      0

                          AREA ||.bss||, DATA, NOINIT, ALIGN=3

                  tcs_MotorY
                          %        28
                  mc_Y
                          %        44
                  ms_Y
                          %        56

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=2

000000  53746167          DCB      "StagePosY 1 Sensor Found\r\n",0
000004  65506f73
000008  59203120
00000c  53656e73
000010  6f722046
000014  6f756e64
000018  0d0a00  
00001b  00                DCB      0
00001c  53746167          DCB      "StagePosY 2 Break And Move Back\r\n",0
000020  65506f73
000024  59203220
000028  42726561
00002c  6b20416e
000030  64204d6f
000034  76652042
000038  61636b0d
00003c  0a00    
00003e  00                DCB      0
00003f  00                DCB      0
000040  53746167          DCB      "StagePosY Complete %d\r\n",0
000044  65506f73
000048  5920436f
00004c  6d706c65
000050  74652025
000054  640d0a00

                          AREA ||.data||, DATA, ALIGN=0

                  ClrSY
000000  00                DCB      0x00

                          AREA ||i.PositY||, COMGROUP=PositY, CODE, READONLY, ALIGN=2

                  PositY PROC
;;;27     
;;;28     __inline void PositY(void){
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;29     	if (!((*ms_Z.Posit == 1)&&(*mc_Z.PositOn == 0))) return;
000004  4f8a              LDR      r7,|L18.560|
000006  6b38              LDR      r0,[r7,#0x30]  ; ms_Z
000008  7800              LDRB     r0,[r0,#0]
00000a  2801              CMP      r0,#1
00000c  d17a              BNE      |L18.260|
00000e  4889              LDR      r0,|L18.564|
000010  6a40              LDR      r0,[r0,#0x24]  ; mc_Z
000012  7800              LDRB     r0,[r0,#0]
000014  2800              CMP      r0,#0
000016  d175              BNE      |L18.260|
;;;30     	// позиционирование по радиусу
;;;31     	switch (*ms_Y.StagePos) {
000018  4d87              LDR      r5,|L18.568|
00001a  6b68              LDR      r0,[r5,#0x34]  ; ms_Y
;;;32     		case 0: // движение к датчику
;;;33     			QClrPin(MOTOR_Yl_DIR);
;;;34     			QClrPin(MOTOR_Yr_DIR);
;;;35     			if (QGetPin(SENS_MOTOR_Y)) {
;;;36     				*ms_Y.StagePos = 1;
;;;37     				Msg("StagePosY 1 Sensor Found\r\n");
;;;38     			} else {
;;;39     				*(mc_Y.FrReq)=*(mc_Y.FrMax);
;;;40     				// движение с разгоном
;;;41     //				if (*(ms_Y.FrCur) < (*(mc_Y.FrReq)/2)) {
;;;42     				if (*(ms_Y.FrCur) < (*(mc_Y.FrReq))) {
;;;43     					// разгон до FrReq/2
;;;44     					*(ms_Y.FrCur) += *(mc_Y.Accel) * (ms_Y.Tcur);
;;;45     //					if (*(ms_Y.FrCur) > (*(mc_Y.FrReq)/2)) *(ms_Y.FrCur) = *(mc_Y.FrReq)/2;
;;;46     					if (*(ms_Y.FrCur) > (*(mc_Y.FrReq))) *(ms_Y.FrCur) = *(mc_Y.FrReq);
;;;47     					ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
00001c  f8df921c          LDR      r9,|L18.572|
000020  f8dfa21c          LDR      r10,|L18.576|
000024  7800              LDRB     r0,[r0,#0]            ;31
000026  f04f0800          MOV      r8,#0                 ;31
00002a  f1a5062c          SUB      r6,r5,#0x2c           ;39
00002e  2401              MOVS     r4,#1                 ;29
000030  b148              CBZ      r0,|L18.70|
000032  2801              CMP      r0,#1                 ;31
000034  d068              BEQ      |L18.264|
000036  2802              CMP      r0,#2                 ;31
000038  d164              BNE      |L18.260|
;;;48     					ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;49     				} 
;;;50     				// ON_PULSE
;;;51     				ms_Y.Level = 1;								
;;;52     //				QSetPin(MOTOR_Yl_STEP);						
;;;53     //				QSetPin(MOTOR_Yr_STEP);						
;;;54     //				TCS_SetInterval(tcs_MotorY,ms_Y.LPON);		
;;;55     			}
;;;56     		break;
;;;57     		case 1: // торможение и смена направления
;;;58     			if (*(ms_Y.FrCur) <= *(mc_Y.FrMin)) {
;;;59     				// смена направления
;;;60     				QSetPin(MOTOR_Yl_DIR);
;;;61     				QSetPin(MOTOR_Yr_DIR);
;;;62     				*ms_Y.StagePos = 2;
;;;63     				Msg("StagePosY 2 Break And Move Back\r\n");
;;;64     			} else {
;;;65     				// торможение
;;;66     				if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAYP * (ms_Y.Tcur))
;;;67     					*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAYP * (ms_Y.Tcur);
;;;68     				else *(ms_Y.FrCur) = 0;
;;;69     				if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) *(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;70     				ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;71     				ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;72     				// ON_PULSE
;;;73     				ms_Y.Level = 1;								
;;;74     //				QSetPin(MOTOR_Yl_STEP);						
;;;75     //				QSetPin(MOTOR_Yr_STEP);						
;;;76     //				TCS_SetInterval(tcs_MotorY,ms_Y.LPON);		
;;;77     			}
;;;78     		break;
;;;79     		case 2:
;;;80     			if (!QGetPin(SENS_MOTOR_Y)) {
00003a  201c              MOVS     r0,#0x1c
00003c  f7fffffe          BL       QGetPin
000040  2800              CMP      r0,#0
000042  d07d              BEQ      |L18.320|
000044  e05d              B        |L18.258|
                  |L18.70|
000046  2004              MOVS     r0,#4                 ;33
000048  f7fffffe          BL       QClrPin
00004c  2007              MOVS     r0,#7                 ;34
00004e  f7fffffe          BL       QClrPin
000052  201c              MOVS     r0,#0x1c              ;35
000054  f7fffffe          BL       QGetPin
000058  b118              CBZ      r0,|L18.98|
00005a  6b68              LDR      r0,[r5,#0x34]         ;36  ; ms_Y
00005c  7004              STRB     r4,[r0,#0]            ;36
00005e  4879              LDR      r0,|L18.580|
000060  e065              B        |L18.302|
                  |L18.98|
000062  68b1              LDR      r1,[r6,#8]            ;39  ; mc_Y
000064  e9d10100          LDRD     r0,r1,[r1,#0]         ;39
000068  6872              LDR      r2,[r6,#4]            ;39  ; mc_Y
00006a  e9c20100          STRD     r0,r1,[r2,#0]         ;39
00006e  6928              LDR      r0,[r5,#0x10]         ;42  ; ms_Y
000070  6871              LDR      r1,[r6,#4]            ;42  ; mc_Y
000072  e9d03000          LDRD     r3,r0,[r0,#0]         ;42
000076  e9d12100          LDRD     r2,r1,[r1,#0]         ;42
00007a  1a9a              SUBS     r2,r3,r2              ;42
00007c  4188              SBCS     r0,r0,r1              ;42
00007e  d240              BCS      |L18.258|
000080  6928              LDR      r0,[r5,#0x10]         ;44  ; ms_Y
000082  6971              LDR      r1,[r6,#0x14]         ;44  ; mc_Y
000084  69ab              LDR      r3,[r5,#0x18]         ;44  ; ms_Y
000086  4642              MOV      r2,r8                 ;44
000088  8809              LDRH     r1,[r1,#0]            ;44
00008a  69ef              LDR      r7,[r5,#0x1c]         ;44  ; ms_Y
00008c  fba1c803          UMULL    r12,r8,r1,r3          ;44
000090  fb028203          MLA      r2,r2,r3,r8           ;44
000094  fb012107          MLA      r1,r1,r7,r2           ;44
000098  e9d02300          LDRD     r2,r3,[r0,#0]         ;44
00009c  eb1c0202          ADDS     r2,r12,r2             ;44
0000a0  4159              ADCS     r1,r1,r3              ;44
0000a2  e9c02100          STRD     r2,r1,[r0,#0]         ;44
0000a6  6870              LDR      r0,[r6,#4]            ;46  ; mc_Y
0000a8  692a              LDR      r2,[r5,#0x10]         ;46  ; ms_Y
0000aa  e9d03000          LDRD     r3,r0,[r0,#0]         ;46
0000ae  e9d21200          LDRD     r1,r2,[r2,#0]         ;46
0000b2  1a59              SUBS     r1,r3,r1              ;46
0000b4  4190              SBCS     r0,r0,r2              ;46
0000b6  d205              BCS      |L18.196|
0000b8  6870              LDR      r0,[r6,#4]            ;46  ; mc_Y
0000ba  692a              LDR      r2,[r5,#0x10]         ;46  ; ms_Y
0000bc  e9d01000          LDRD     r1,r0,[r0,#0]         ;46
0000c0  e9c21000          STRD     r1,r0,[r2,#0]         ;46
                  |L18.196|
0000c4  6928              LDR      r0,[r5,#0x10]         ;47  ; ms_Y
0000c6  4651              MOV      r1,r10                ;47
0000c8  e9d02300          LDRD     r2,r3,[r0,#0]         ;47
0000cc  4648              MOV      r0,r9                 ;47
0000ce  f7fffffe          BL       __aeabi_uldivmod
0000d2  61a8              STR      r0,[r5,#0x18]         ;47  ; ms_Y
0000d4  61e9              STR      r1,[r5,#0x1c]         ;47  ; ms_Y
0000d6  6a28              LDR      r0,[r5,#0x20]         ;48  ; ms_Y
0000d8  6a69              LDR      r1,[r5,#0x24]         ;48  ; ms_Y
0000da  1c43              ADDS     r3,r0,#1              ;48
0000dc  f1410000          ADC      r0,r1,#0              ;48
0000e0  69a9              LDR      r1,[r5,#0x18]         ;48  ; ms_Y
0000e2  69ea              LDR      r2,[r5,#0x1c]         ;48  ; ms_Y
0000e4  1a59              SUBS     r1,r3,r1              ;48
0000e6  4190              SBCS     r0,r0,r2              ;48
0000e8  d208              BCS      |L18.252|
0000ea  69a8              LDR      r0,[r5,#0x18]         ;48  ; ms_Y
0000ec  69e9              LDR      r1,[r5,#0x1c]         ;48  ; ms_Y
0000ee  6a2a              LDR      r2,[r5,#0x20]         ;48  ; ms_Y
0000f0  6a6b              LDR      r3,[r5,#0x24]         ;48  ; ms_Y
0000f2  1a80              SUBS     r0,r0,r2              ;48
0000f4  eb610103          SBC      r1,r1,r3              ;48
0000f8  e074              B        |L18.484|
0000fa  e003              B        |L18.260|
                  |L18.252|
0000fc  2001              MOVS     r0,#1                 ;48
0000fe  2100              MOVS     r1,#0                 ;48
000100  e070              B        |L18.484|
                  |L18.258|
000102  702c              STRB     r4,[r5,#0]            ;51
                  |L18.260|
;;;81     				*ms_Y.StagePos = 3;
;;;82     				*(ms_Y.Pos) = Y_MIN_POS;
;;;83     				BR_ms_Y_Pos = *(ms_Y.Pos);
;;;84     
;;;85     				*ms_Y.Posit = 1;
;;;86     				*mc_Y.PositOn = 0;
;;;87     				if ((*ms_X.Posit)&&(*ms_Z.Posit)) {
;;;88     					*pCorrStop = 1;
;;;89     					BR_pCorrStop = *pCorrStop;
;;;90     				}
;;;91     				Msg("StagePosY Complete %d\r\n",*pCorrStop);
;;;92     			} else {
;;;93     				// выход из датчика на малой скорости
;;;94     				// ON_PULSE
;;;95     				ms_Y.Level = 1;								
;;;96     //				QSetPin(MOTOR_Yl_STEP);						
;;;97     //				QSetPin(MOTOR_Yr_STEP);						
;;;98     //				TCS_SetInterval(tcs_MotorY,ms_Y.LPON);		
;;;99     			}
;;;100    		break;
;;;101    	}
;;;102    
;;;103    }
000104  e8bd87f0          POP      {r4-r10,pc}
                  |L18.264|
000108  6830              LDR      r0,[r6,#0]            ;58  ; mc_Y
00010a  692b              LDR      r3,[r5,#0x10]         ;58  ; ms_Y
00010c  e9d01000          LDRD     r1,r0,[r0,#0]         ;58
000110  e9d32300          LDRD     r2,r3,[r3,#0]         ;58
000114  1a89              SUBS     r1,r1,r2              ;58
000116  4198              SBCS     r0,r0,r3              ;58
000118  d30d              BCC      |L18.310|
00011a  2004              MOVS     r0,#4                 ;60
00011c  f7fffffe          BL       QSetPin
000120  2007              MOVS     r0,#7                 ;61
000122  f7fffffe          BL       QSetPin
000126  6b69              LDR      r1,[r5,#0x34]         ;62  ; ms_Y
000128  2002              MOVS     r0,#2                 ;62
00012a  7008              STRB     r0,[r1,#0]            ;62
00012c  4846              LDR      r0,|L18.584|
                  |L18.302|
00012e  e8bd47f0          POP      {r4-r10,lr}           ;63
000132  f7ffbffe          B.W      Msg
                  |L18.310|
000136  6970              LDR      r0,[r6,#0x14]         ;66  ; mc_Y
000138  8800              LDRH     r0,[r0,#0]            ;66
00013a  0040              LSLS     r0,r0,#1              ;66
00013c  17c1              ASRS     r1,r0,#31             ;66
00013e  e000              B        |L18.322|
                  |L18.320|
000140  e053              B        |L18.490|
                  |L18.322|
000142  69ab              LDR      r3,[r5,#0x18]         ;66  ; ms_Y
000144  69ea              LDR      r2,[r5,#0x1c]         ;66  ; ms_Y
000146  fba07c03          UMULL    r7,r12,r0,r3          ;66
00014a  fb01c103          MLA      r1,r1,r3,r12          ;66
00014e  fb001002          MLA      r0,r0,r2,r1           ;66
000152  692a              LDR      r2,[r5,#0x10]         ;66  ; ms_Y
000154  e9d21200          LDRD     r1,r2,[r2,#0]         ;66
000158  1a79              SUBS     r1,r7,r1              ;66
00015a  4190              SBCS     r0,r0,r2              ;66
00015c  d215              BCS      |L18.394|
00015e  6928              LDR      r0,[r5,#0x10]         ;67  ; ms_Y
000160  6971              LDR      r1,[r6,#0x14]         ;67  ; mc_Y
000162  69ab              LDR      r3,[r5,#0x18]         ;67  ; ms_Y
000164  8809              LDRH     r1,[r1,#0]            ;67
000166  0049              LSLS     r1,r1,#1              ;67
000168  17ca              ASRS     r2,r1,#31             ;67
00016a  f8d5c01c          LDR      r12,[r5,#0x1c]        ;67  ; ms_Y
00016e  fba17803          UMULL    r7,r8,r1,r3           ;67
000172  fb028203          MLA      r2,r2,r3,r8           ;67
000176  fb01220c          MLA      r2,r1,r12,r2          ;67
00017a  e9d03100          LDRD     r3,r1,[r0,#0]         ;67
00017e  1bdb              SUBS     r3,r3,r7              ;67
000180  eb610102          SBC      r1,r1,r2              ;67
000184  e9c03100          STRD     r3,r1,[r0,#0]         ;67
000188  e003              B        |L18.402|
                  |L18.394|
00018a  692a              LDR      r2,[r5,#0x10]         ;68  ; ms_Y
00018c  2000              MOVS     r0,#0                 ;67
00018e  e9c20000          STRD     r0,r0,[r2,#0]         ;68
                  |L18.402|
000192  6928              LDR      r0,[r5,#0x10]         ;69  ; ms_Y
000194  6832              LDR      r2,[r6,#0]            ;69  ; mc_Y
000196  e9d01000          LDRD     r1,r0,[r0,#0]         ;69
00019a  e9d23200          LDRD     r3,r2,[r2,#0]         ;69
00019e  1ac9              SUBS     r1,r1,r3              ;69
0001a0  4190              SBCS     r0,r0,r2              ;69
0001a2  d205              BCS      |L18.432|
0001a4  6831              LDR      r1,[r6,#0]            ;69  ; mc_Y
0001a6  e9d10100          LDRD     r0,r1,[r1,#0]         ;69
0001aa  692a              LDR      r2,[r5,#0x10]         ;69  ; ms_Y
0001ac  e9c20100          STRD     r0,r1,[r2,#0]         ;69
                  |L18.432|
0001b0  6928              LDR      r0,[r5,#0x10]         ;70  ; ms_Y
0001b2  4651              MOV      r1,r10                ;70
0001b4  e9d02300          LDRD     r2,r3,[r0,#0]         ;70
0001b8  4648              MOV      r0,r9                 ;70
0001ba  f7fffffe          BL       __aeabi_uldivmod
0001be  61a8              STR      r0,[r5,#0x18]         ;70  ; ms_Y
0001c0  61e9              STR      r1,[r5,#0x1c]         ;70  ; ms_Y
0001c2  6a28              LDR      r0,[r5,#0x20]         ;71  ; ms_Y
0001c4  6a6a              LDR      r2,[r5,#0x24]         ;71  ; ms_Y
0001c6  1c41              ADDS     r1,r0,#1              ;71
0001c8  f1420000          ADC      r0,r2,#0              ;71
0001cc  69aa              LDR      r2,[r5,#0x18]         ;71  ; ms_Y
0001ce  69eb              LDR      r3,[r5,#0x1c]         ;71  ; ms_Y
0001d0  1a89              SUBS     r1,r1,r2              ;71
0001d2  4198              SBCS     r0,r0,r3              ;71
0001d4  d292              BCS      |L18.252|
0001d6  69ab              LDR      r3,[r5,#0x18]         ;71  ; ms_Y
0001d8  69e9              LDR      r1,[r5,#0x1c]         ;71  ; ms_Y
0001da  6a28              LDR      r0,[r5,#0x20]         ;71  ; ms_Y
0001dc  6a6a              LDR      r2,[r5,#0x24]         ;71  ; ms_Y
0001de  1a18              SUBS     r0,r3,r0              ;71
0001e0  eb610102          SBC      r1,r1,r2              ;71
                  |L18.484|
0001e4  62a8              STR      r0,[r5,#0x28]         ;71  ; ms_Y
0001e6  62e9              STR      r1,[r5,#0x2c]         ;71  ; ms_Y
0001e8  e78b              B        |L18.258|
                  |L18.490|
0001ea  6b69              LDR      r1,[r5,#0x34]         ;81  ; ms_Y
0001ec  2003              MOVS     r0,#3                 ;81
0001ee  7008              STRB     r0,[r1,#0]            ;81
0001f0  4816              LDR      r0,|L18.588|
0001f2  68a9              LDR      r1,[r5,#8]            ;82  ; ms_Y
0001f4  6800              LDR      r0,[r0,#0]            ;82  ; vY_MIN_POS
0001f6  6008              STR      r0,[r1,#0]            ;83
0001f8  68a8              LDR      r0,[r5,#8]            ;83  ; ms_Y
0001fa  4915              LDR      r1,|L18.592|
0001fc  6800              LDR      r0,[r0,#0]            ;83
0001fe  6488              STR      r0,[r1,#0x48]         ;83
000200  6b28              LDR      r0,[r5,#0x30]         ;85  ; ms_Y
000202  7004              STRB     r4,[r0,#0]            ;85
000204  6a72              LDR      r2,[r6,#0x24]         ;86  ; mc_Y
000206  4813              LDR      r0,|L18.596|
000208  f8828000          STRB     r8,[r2,#0]            ;86
00020c  6b00              LDR      r0,[r0,#0x30]         ;87  ; ms_X
00020e  7802              LDRB     r2,[r0,#0]            ;87
000210  4811              LDR      r0,|L18.600|
000212  b132              CBZ      r2,|L18.546|
000214  6b3a              LDR      r2,[r7,#0x30]         ;87  ; ms_Z
000216  7812              LDRB     r2,[r2,#0]            ;87
000218  b11a              CBZ      r2,|L18.546|
00021a  6802              LDR      r2,[r0,#0]            ;88  ; pCorrStop
00021c  7014              STRB     r4,[r2,#0]            ;88
00021e  f8814070          STRB     r4,[r1,#0x70]         ;89
                  |L18.546|
000222  6800              LDR      r0,[r0,#0]            ;91  ; pCorrStop
000224  7801              LDRB     r1,[r0,#0]            ;91
000226  e8bd47f0          POP      {r4-r10,lr}           ;91
00022a  480c              LDR      r0,|L18.604|
00022c  f7ffbffe          B.W      Msg
;;;104    
                          ENDP

                  |L18.560|
                          DCD      ms_Z
                  |L18.564|
                          DCD      mc_Z
                  |L18.568|
                          DCD      ||.bss||+0x48
                  |L18.572|
                          DCD      0x26fc1000
                  |L18.576|
                          DCD      0x0002386f
                  |L18.580|
                          DCD      ||.conststring||
                  |L18.584|
                          DCD      ||.conststring||+0x1c
                  |L18.588|
                          DCD      vY_MIN_POS
                  |L18.592|
                          DCD      0x40024000
                  |L18.596|
                          DCD      ms_X
                  |L18.600|
                          DCD      pCorrStop
                  |L18.604|
                          DCD      ||.conststring||+0x40

                          AREA ||i.MovePosY||, COMGROUP=MovePosY, CODE, READONLY, ALIGN=2

                  MovePosY PROC
;;;104    
;;;105    __inline void MovePosY(void){
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;106    	if ((*(mc_Y.ReqPos) == *(ms_Y.Pos))) {
000004  48e8              LDR      r0,|L25.936|
000006  68c1              LDR      r1,[r0,#0xc]  ; mc_Y
000008  f100042c          ADD      r4,r0,#0x2c
00000c  680a              LDR      r2,[r1,#0]
00000e  68a1              LDR      r1,[r4,#8]  ; ms_Y
;;;107    		*(mc_Y.MovePos) = 0;
;;;108    		if ((*(mc_X.MovePos) == 0) && (*(mc_Z.MovePos) == 0)) {
000010  4be6              LDR      r3,|L25.940|
;;;109    			*pCorrStop = 1;
000012  2501              MOVS     r5,#1
000014  680e              LDR      r6,[r1,#0]
000016  2100              MOVS     r1,#0
000018  f8df8394          LDR      r8,|L25.944|
00001c  f8dfb394          LDR      r11,|L25.948|
000020  42b2              CMP      r2,r6                 ;106
000022  d112              BNE      |L25.74|
000024  6a00              LDR      r0,[r0,#0x20]         ;107  ; mc_Y
000026  7001              STRB     r1,[r0,#0]            ;107
000028  6a18              LDR      r0,[r3,#0x20]         ;108  ; mc_X
00002a  7800              LDRB     r0,[r0,#0]            ;108
00002c  2800              CMP      r0,#0                 ;108
00002e  d10a              BNE      |L25.70|
000030  f8db0020          LDR      r0,[r11,#0x20]        ;108  ; mc_Z
000034  7800              LDRB     r0,[r0,#0]            ;108
000036  2800              CMP      r0,#0                 ;108
000038  d105              BNE      |L25.70|
00003a  f8d80000          LDR      r0,[r8,#0]  ; pCorrStop
00003e  7005              STRB     r5,[r0,#0]
;;;110    			BR_pCorrStop = *pCorrStop;
000040  48dd              LDR      r0,|L25.952|
000042  f8805070          STRB     r5,[r0,#0x70]
                  |L25.70|
;;;111    		}
;;;112    		return;
;;;113    	}
;;;114    	if (*(mc_Y.ReqPos) < Y_MIN_POS) *(mc_Y.ReqPos)=Y_MIN_POS;
;;;115    	if (*(mc_Y.ReqPos) > Y_MAX_POS) *(mc_Y.ReqPos)=Y_MAX_POS;
;;;116    	// определяем направление
;;;117    	if (*(mc_Y.MovePos) == 1) {
;;;118    		if (((*(mc_Y.ReqPos) < *(ms_Y.Pos))&&(*(ms_Y.Dir)==1))||
;;;119    		    ((*(mc_Y.ReqPos) > *(ms_Y.Pos))&&(*(ms_Y.Dir)==-1)))
;;;120    		{
;;;121    			// торможение и смена направления
;;;122    			if (*(ms_Y.FrCur) > *(mc_Y.FrMin)) {
;;;123    				// торможение
;;;124    				if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY *(ms_Y.Tcur))
;;;125    					*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;126    				else *(ms_Y.FrCur) = 0;
;;;127    				if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) {
;;;128    					*(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;129    					ms_Y.Lacc = 0;
;;;130    				}	
;;;131    				if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;132    				ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;133    				ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;134    			} else {
;;;135    				//смена направления
;;;136    				if (*(ms_Y.Dir)==1) *(ms_Y.Dir)=-1;
;;;137    				else *(ms_Y.Dir)=1;
;;;138    				if (*(ms_Y.Dir)==1) {
;;;139    				 	QSetPin(MOTOR_Yl_DIR);
;;;140    				 	QSetPin(MOTOR_Yr_DIR);
;;;141    				} else {
;;;142    					QClrPin(MOTOR_Yl_DIR);
;;;143    					QClrPin(MOTOR_Yr_DIR);
;;;144    				}
;;;145    //				Msg("DelayDirY\r\n");
;;;146    //				TCS_SetInterval(tcs_MotorY,*pDirDelay);
;;;147    //				return;
;;;148    			}
;;;149    		} else {
;;;150    			// определяем зону
;;;151    			if (abs(*(ms_Y.Pos)-*(mc_Y.ReqPos))<=(ms_Y.Lacc+10)) {
;;;152    				// в зоне тормозим
;;;153    				if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur)) 
;;;154    					*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;155    				else 	*(ms_Y.FrCur) = 0;
;;;156    		
;;;157    				if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) {
;;;158    					*(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;159    					ms_Y.Lacc = 0;
;;;160    				}	
;;;161    				if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;162    				ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;163    				ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;164    			} else {
;;;165    				// вне зоны едем с разгоном
;;;166    				if (*(ms_Y.FrCur) < *(mc_Y.FrReq)) {
;;;167    					*(ms_Y.FrCur) += *(mc_Y.Accel) * (ms_Y.Tcur);
;;;168    					if (*(ms_Y.FrCur) > *(mc_Y.FrReq)) *(ms_Y.FrCur) = *(mc_Y.FrReq);
;;;169    					ms_Y.Lacc++;
;;;170    					ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;171    					ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;172    				}
;;;173    			}
;;;174    		}
;;;175    	} else { // MovePos == 2
;;;176    		// только торможение
;;;177    		if (*(ms_Y.FrCur) > *(mc_Y.FrMin)) {
;;;178    			if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur)) 
;;;179    				*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;180    			else 	*(ms_Y.FrCur) = 0;
;;;181    	
;;;182    			if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) {
;;;183    				*(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;184    				ms_Y.Lacc = 0;
;;;185    			}	
;;;186    			if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;187    			ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;188    			ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;189    		} else {
;;;190    			// и при доcтижении минимальной частоты MovePos = 0
;;;191    			*(mc_Y.MovePos) = 0;
;;;192    			if (!*pCorrStop) {
;;;193    				// корректная остановка сброшена
;;;194    				if ((!*(mc_X.MovePos))&&(!*(mc_Z.MovePos))) {
;;;195    					*pCorrStop = 1;
;;;196    					BR_pCorrStop = *pCorrStop;
;;;197    					// поднять Z на максимум
;;;198    					*(mc_Z.ReqPos) = Z_MAX_POS;
;;;199    					*(mc_Z.MovePos) = 1;
;;;200    					// остановить шпиндель и выключить охлаждение
;;;201    					FIStop();		QClrPin(COOLER1); QClrPin(COOLER2); 
;;;202    				}
;;;203    			}
;;;204    			return;
;;;205    		}
;;;206    	}
;;;207    	//ON_PULSE;
;;;208    	ms_Y.Level = 1;								
;;;209    	*(ms_Y.Pos)+=(*(ms_Y.Dir));
;;;210    	BR_ms_Y_Pos = *(ms_Y.Pos);
;;;211    //	QSetPin(MOTOR_Yl_STEP);						
;;;212    //	QSetPin(MOTOR_Yr_STEP);						
;;;213    //	TCS_SetInterval(tcs_MotorY,ms_Y.LPON);		
;;;214    }
000046  e8bd9ff0          POP      {r4-r12,pc}
                  |L25.74|
00004a  68c2              LDR      r2,[r0,#0xc]          ;114  ; mc_Y
00004c  6816              LDR      r6,[r2,#0]            ;114
00004e  4adb              LDR      r2,|L25.956|
000050  6812              LDR      r2,[r2,#0]            ;114  ; vY_MIN_POS
000052  4296              CMP      r6,r2                 ;114
000054  da01              BGE      |L25.90|
000056  68c6              LDR      r6,[r0,#0xc]          ;114  ; mc_Y
000058  6032              STR      r2,[r6,#0]            ;114
                  |L25.90|
00005a  68c2              LDR      r2,[r0,#0xc]          ;115  ; mc_Y
00005c  6816              LDR      r6,[r2,#0]            ;115
00005e  4ad8              LDR      r2,|L25.960|
000060  6812              LDR      r2,[r2,#0]            ;115  ; vY_MAX_POS
000062  4296              CMP      r6,r2                 ;115
000064  dd01              BLE      |L25.106|
000066  68c6              LDR      r6,[r0,#0xc]          ;115  ; mc_Y
000068  6032              STR      r2,[r6,#0]            ;115
                  |L25.106|
00006a  6a02              LDR      r2,[r0,#0x20]         ;117  ; mc_Y
00006c  f8df9354          LDR      r9,|L25.964|
000070  f8dfa354          LDR      r10,|L25.968|
000074  7812              LDRB     r2,[r2,#0]            ;117
000076  2a01              CMP      r2,#1                 ;117
000078  d031              BEQ      |L25.222|
00007a  6802              LDR      r2,[r0,#0]            ;177  ; mc_Y
00007c  6927              LDR      r7,[r4,#0x10]         ;177  ; ms_Y
00007e  e9d2c200          LDRD     r12,r2,[r2,#0]        ;177
000082  e9d76700          LDRD     r6,r7,[r7,#0]         ;177
000086  ebbc0606          SUBS     r6,r12,r6             ;177
00008a  41ba              SBCS     r2,r2,r7              ;177
00008c  d26f              BCS      |L25.366|
                  |L25.142|
00008e  4683              MOV      r11,r0                ;178
000090  6940              LDR      r0,[r0,#0x14]         ;178  ; mc_Y
000092  69a3              LDR      r3,[r4,#0x18]         ;178  ; ms_Y
000094  8800              LDRH     r0,[r0,#0]            ;178
000096  0fc2              LSRS     r2,r0,#31             ;178
000098  69e6              LDR      r6,[r4,#0x1c]         ;178  ; ms_Y
00009a  fba07c03          UMULL    r7,r12,r0,r3          ;178
00009e  fb02c203          MLA      r2,r2,r3,r12          ;178
0000a2  fb002006          MLA      r0,r0,r6,r2           ;178
0000a6  6922              LDR      r2,[r4,#0x10]         ;178  ; ms_Y
0000a8  e9d23200          LDRD     r3,r2,[r2,#0]         ;178
0000ac  1afb              SUBS     r3,r7,r3              ;178
0000ae  4190              SBCS     r0,r0,r2              ;178
0000b0  d27a              BCS      |L25.424|
0000b2  6920              LDR      r0,[r4,#0x10]         ;125  ; ms_Y
0000b4  f8db2014          LDR      r2,[r11,#0x14]        ;125  ; mc_Y
0000b8  69a3              LDR      r3,[r4,#0x18]         ;125  ; ms_Y
0000ba  8812              LDRH     r2,[r2,#0]            ;125
0000bc  0fd6              LSRS     r6,r2,#31             ;125
0000be  69e7              LDR      r7,[r4,#0x1c]         ;125  ; ms_Y
0000c0  fba2c803          UMULL    r12,r8,r2,r3          ;125
0000c4  fb068303          MLA      r3,r6,r3,r8           ;125
0000c8  fb023307          MLA      r3,r2,r7,r3           ;125
0000cc  e9d06200          LDRD     r6,r2,[r0,#0]         ;125
0000d0  ebb6060c          SUBS     r6,r6,r12             ;125
0000d4  eb620203          SBC      r2,r2,r3              ;125
0000d8  e9c06200          STRD     r6,r2,[r0,#0]         ;125
0000dc  e068              B        |L25.432|
                  |L25.222|
0000de  68c2              LDR      r2,[r0,#0xc]          ;118  ; mc_Y
0000e0  68a3              LDR      r3,[r4,#8]            ;118  ; ms_Y
0000e2  6812              LDR      r2,[r2,#0]            ;118
0000e4  681b              LDR      r3,[r3,#0]            ;118
0000e6  429a              CMP      r2,r3                 ;118
0000e8  da03              BGE      |L25.242|
0000ea  6862              LDR      r2,[r4,#4]            ;118  ; ms_Y
0000ec  7812              LDRB     r2,[r2,#0]            ;118
0000ee  2a01              CMP      r2,#1                 ;118
0000f0  d03e              BEQ      |L25.368|
                  |L25.242|
0000f2  68c2              LDR      r2,[r0,#0xc]          ;119  ; mc_Y
0000f4  68a3              LDR      r3,[r4,#8]            ;119  ; ms_Y
0000f6  6812              LDR      r2,[r2,#0]            ;119
0000f8  681b              LDR      r3,[r3,#0]            ;119
0000fa  429a              CMP      r2,r3                 ;119
0000fc  dd04              BLE      |L25.264|
0000fe  6862              LDR      r2,[r4,#4]            ;119  ; ms_Y
000100  f9922000          LDRSB    r2,[r2,#0]            ;119
000104  1c52              ADDS     r2,r2,#1              ;119
000106  d033              BEQ      |L25.368|
                  |L25.264|
000108  68a2              LDR      r2,[r4,#8]            ;151  ; ms_Y
00010a  68c3              LDR      r3,[r0,#0xc]          ;151  ; mc_Y
00010c  6812              LDR      r2,[r2,#0]            ;151
00010e  681b              LDR      r3,[r3,#0]            ;151
000110  1ad2              SUBS     r2,r2,r3              ;151
000112  d500              BPL      |L25.278|
000114  4252              RSBS     r2,r2,#0              ;151
                  |L25.278|
000116  68e3              LDR      r3,[r4,#0xc]          ;151  ; ms_Y
000118  330a              ADDS     r3,r3,#0xa            ;151
00011a  429a              CMP      r2,r3                 ;151
00011c  dc6f              BGT      |L25.510|
00011e  4683              MOV      r11,r0                ;153
000120  6940              LDR      r0,[r0,#0x14]         ;153  ; mc_Y
000122  69a3              LDR      r3,[r4,#0x18]         ;153  ; ms_Y
000124  8800              LDRH     r0,[r0,#0]            ;153
000126  0fc2              LSRS     r2,r0,#31             ;153
000128  69e6              LDR      r6,[r4,#0x1c]         ;153  ; ms_Y
00012a  fba07c03          UMULL    r7,r12,r0,r3          ;153
00012e  fb02c203          MLA      r2,r2,r3,r12          ;153
000132  fb002006          MLA      r0,r0,r6,r2           ;153
000136  6923              LDR      r3,[r4,#0x10]         ;153  ; ms_Y
000138  e9d32300          LDRD     r2,r3,[r3,#0]         ;153
00013c  1aba              SUBS     r2,r7,r2              ;153
00013e  4198              SBCS     r0,r0,r3              ;153
000140  d268              BCS      |L25.532|
000142  6920              LDR      r0,[r4,#0x10]         ;154  ; ms_Y
000144  f8db2014          LDR      r2,[r11,#0x14]        ;154  ; mc_Y
000148  69a3              LDR      r3,[r4,#0x18]         ;154  ; ms_Y
00014a  8812              LDRH     r2,[r2,#0]            ;154
00014c  0fd6              LSRS     r6,r2,#31             ;154
00014e  69e7              LDR      r7,[r4,#0x1c]         ;154  ; ms_Y
000150  fba2c803          UMULL    r12,r8,r2,r3          ;154
000154  fb068303          MLA      r3,r6,r3,r8           ;154
000158  fb023307          MLA      r3,r2,r7,r3           ;154
00015c  e9d06200          LDRD     r6,r2,[r0,#0]         ;154
000160  ebb6060c          SUBS     r6,r6,r12             ;154
000164  eb620203          SBC      r2,r2,r3              ;154
000168  e9c06200          STRD     r6,r2,[r0,#0]         ;154
00016c  e056              B        |L25.540|
                  |L25.366|
00016e  e0f6              B        |L25.862|
                  |L25.368|
000170  6802              LDR      r2,[r0,#0]            ;122  ; mc_Y
000172  6927              LDR      r7,[r4,#0x10]         ;122  ; ms_Y
000174  e9d23200          LDRD     r3,r2,[r2,#0]         ;122
000178  e9d76700          LDRD     r6,r7,[r7,#0]         ;122
00017c  1b9b              SUBS     r3,r3,r6              ;122
00017e  41ba              SBCS     r2,r2,r7              ;122
000180  d385              BCC      |L25.142|
000182  6860              LDR      r0,[r4,#4]            ;136  ; ms_Y
000184  7800              LDRB     r0,[r0,#0]            ;136
000186  2801              CMP      r0,#1                 ;136
000188  d03a              BEQ      |L25.512|
00018a  6860              LDR      r0,[r4,#4]            ;137  ; ms_Y
00018c  7005              STRB     r5,[r0,#0]            ;137
                  |L25.398|
00018e  6860              LDR      r0,[r4,#4]            ;138  ; ms_Y
000190  7800              LDRB     r0,[r0,#0]            ;138
000192  2801              CMP      r0,#1                 ;138
000194  f04f0004          MOV      r0,#4                 ;142
000198  d036              BEQ      |L25.520|
00019a  f7fffffe          BL       QClrPin
00019e  2007              MOVS     r0,#7                 ;143
0001a0  f7fffffe          BL       QClrPin
0001a4  e0be              B        |L25.804|
0001a6  e7ff              B        |L25.424|
                  |L25.424|
0001a8  6923              LDR      r3,[r4,#0x10]         ;126  ; ms_Y
0001aa  2000              MOVS     r0,#0                 ;143
0001ac  e9c30000          STRD     r0,r0,[r3,#0]         ;126
                  |L25.432|
0001b0  6920              LDR      r0,[r4,#0x10]         ;182  ; ms_Y
0001b2  f8db6000          LDR      r6,[r11,#0]           ;182  ; mc_Y
0001b6  e9d07200          LDRD     r7,r2,[r0,#0]         ;182
0001ba  4658              MOV      r0,r11                ;182
0001bc  e9d63600          LDRD     r3,r6,[r6,#0]         ;182
0001c0  1afb              SUBS     r3,r7,r3              ;182
0001c2  41b2              SBCS     r2,r2,r6              ;182
0001c4  d37d              BCC      |L25.706|
                  |L25.454|
0001c6  68e0              LDR      r0,[r4,#0xc]          ;131  ; ms_Y
0001c8  2801              CMP      r0,#1                 ;131
0001ca  db7b              BLT      |L25.708|
0001cc  68e0              LDR      r0,[r4,#0xc]          ;186  ; ms_Y
0001ce  1e40              SUBS     r0,r0,#1              ;186
0001d0  60e0              STR      r0,[r4,#0xc]          ;186  ; ms_Y
                  |L25.466|
0001d2  6920              LDR      r0,[r4,#0x10]         ;132  ; ms_Y
0001d4  4651              MOV      r1,r10                ;132
0001d6  e9d02300          LDRD     r2,r3,[r0,#0]         ;132
0001da  4648              MOV      r0,r9                 ;132
0001dc  f7fffffe          BL       __aeabi_uldivmod
0001e0  61a0              STR      r0,[r4,#0x18]         ;132  ; ms_Y
0001e2  61e1              STR      r1,[r4,#0x1c]         ;132  ; ms_Y
0001e4  6a20              LDR      r0,[r4,#0x20]         ;133  ; ms_Y
0001e6  6a61              LDR      r1,[r4,#0x24]         ;133  ; ms_Y
0001e8  1c40              ADDS     r0,r0,#1              ;133
0001ea  69a2              LDR      r2,[r4,#0x18]         ;133  ; ms_Y
0001ec  f1410100          ADC      r1,r1,#0              ;133
0001f0  69e3              LDR      r3,[r4,#0x1c]         ;133  ; ms_Y
0001f2  1a80              SUBS     r0,r0,r2              ;133
0001f4  4199              SBCS     r1,r1,r3              ;133
0001f6  d366              BCC      |L25.710|
                  |L25.504|
0001f8  2001              MOVS     r0,#1                 ;133
0001fa  2100              MOVS     r1,#0                 ;133
0001fc  e090              B        |L25.800|
                  |L25.510|
0001fe  e042              B        |L25.646|
                  |L25.512|
000200  6861              LDR      r1,[r4,#4]            ;136  ; ms_Y
000202  20ff              MOVS     r0,#0xff              ;136
000204  7008              STRB     r0,[r1,#0]            ;136
000206  e7c2              B        |L25.398|
                  |L25.520|
000208  f7fffffe          BL       QSetPin
00020c  2007              MOVS     r0,#7                 ;140
00020e  f7fffffe          BL       QSetPin
000212  e087              B        |L25.804|
                  |L25.532|
000214  6923              LDR      r3,[r4,#0x10]         ;155  ; ms_Y
000216  2000              MOVS     r0,#0                 ;140
000218  e9c30000          STRD     r0,r0,[r3,#0]         ;155
                  |L25.540|
00021c  6920              LDR      r0,[r4,#0x10]         ;157  ; ms_Y
00021e  f8db6000          LDR      r6,[r11,#0]           ;157  ; mc_Y
000222  e9d07200          LDRD     r7,r2,[r0,#0]         ;157
000226  4658              MOV      r0,r11                ;157
000228  e9d63600          LDRD     r3,r6,[r6,#0]         ;157
00022c  1afb              SUBS     r3,r7,r3              ;157
00022e  41b2              SBCS     r2,r2,r6              ;157
000230  d206              BCS      |L25.576|
000232  6800              LDR      r0,[r0,#0]            ;158  ; mc_Y
000234  6923              LDR      r3,[r4,#0x10]         ;158  ; ms_Y
000236  e9d02000          LDRD     r2,r0,[r0,#0]         ;158
00023a  e9c32000          STRD     r2,r0,[r3,#0]         ;158
00023e  60e1              STR      r1,[r4,#0xc]          ;159  ; ms_Y
                  |L25.576|
000240  68e0              LDR      r0,[r4,#0xc]          ;161  ; ms_Y
000242  2801              CMP      r0,#1                 ;161
000244  db03              BLT      |L25.590|
000246  68e0              LDR      r0,[r4,#0xc]          ;161  ; ms_Y
000248  1e40              SUBS     r0,r0,#1              ;161
00024a  60e0              STR      r0,[r4,#0xc]          ;161  ; ms_Y
00024c  e000              B        |L25.592|
                  |L25.590|
00024e  60e1              STR      r1,[r4,#0xc]          ;161  ; ms_Y
                  |L25.592|
000250  6920              LDR      r0,[r4,#0x10]         ;162  ; ms_Y
000252  4651              MOV      r1,r10                ;162
000254  e9d02300          LDRD     r2,r3,[r0,#0]         ;162
000258  4648              MOV      r0,r9                 ;162
00025a  f7fffffe          BL       __aeabi_uldivmod
00025e  61a0              STR      r0,[r4,#0x18]         ;162  ; ms_Y
000260  61e1              STR      r1,[r4,#0x1c]         ;162  ; ms_Y
000262  6a20              LDR      r0,[r4,#0x20]         ;163  ; ms_Y
000264  6a61              LDR      r1,[r4,#0x24]         ;163  ; ms_Y
000266  1c40              ADDS     r0,r0,#1              ;163
000268  69a3              LDR      r3,[r4,#0x18]         ;163  ; ms_Y
00026a  f1410100          ADC      r1,r1,#0              ;163
00026e  69e2              LDR      r2,[r4,#0x1c]         ;163  ; ms_Y
000270  1ac0              SUBS     r0,r0,r3              ;163
000272  4191              SBCS     r1,r1,r2              ;163
                  |L25.628|
000274  d2c0              BCS      |L25.504|
000276  69a2              LDR      r2,[r4,#0x18]         ;163  ; ms_Y
000278  69e1              LDR      r1,[r4,#0x1c]         ;163  ; ms_Y
00027a  6a20              LDR      r0,[r4,#0x20]         ;163  ; ms_Y
00027c  6a63              LDR      r3,[r4,#0x24]         ;163  ; ms_Y
00027e  1a10              SUBS     r0,r2,r0              ;163
                  |L25.640|
000280  eb610103          SBC      r1,r1,r3              ;163
000284  e04c              B        |L25.800|
                  |L25.646|
000286  6922              LDR      r2,[r4,#0x10]         ;166  ; ms_Y
000288  6847              LDR      r7,[r0,#4]            ;166  ; mc_Y
00028a  e9d23200          LDRD     r3,r2,[r2,#0]         ;166
00028e  e9d76700          LDRD     r6,r7,[r7,#0]         ;166
000292  1b9b              SUBS     r3,r3,r6              ;166
000294  41ba              SBCS     r2,r2,r7              ;166
000296  d245              BCS      |L25.804|
000298  6922              LDR      r2,[r4,#0x10]         ;167  ; ms_Y
00029a  4680              MOV      r8,r0                 ;167
00029c  6940              LDR      r0,[r0,#0x14]         ;167  ; mc_Y
00029e  69a3              LDR      r3,[r4,#0x18]         ;167  ; ms_Y
0002a0  8800              LDRH     r0,[r0,#0]            ;167
0002a2  69e6              LDR      r6,[r4,#0x1c]         ;167  ; ms_Y
0002a4  fba07c03          UMULL    r7,r12,r0,r3          ;167
0002a8  fb01c103          MLA      r1,r1,r3,r12          ;167
0002ac  fb001006          MLA      r0,r0,r6,r1           ;167
0002b0  e9d21300          LDRD     r1,r3,[r2,#0]         ;167
0002b4  1879              ADDS     r1,r7,r1              ;167
0002b6  4158              ADCS     r0,r0,r3              ;167
0002b8  e9c21000          STRD     r1,r0,[r2,#0]         ;167
0002bc  f8d80004          LDR      r0,[r8,#4]            ;168  ; mc_Y
0002c0  e002              B        |L25.712|
                  |L25.706|
0002c2  e03c              B        |L25.830|
                  |L25.708|
0002c4  e043              B        |L25.846|
                  |L25.710|
0002c6  e044              B        |L25.850|
                  |L25.712|
0002c8  e9d03000          LDRD     r3,r0,[r0,#0]         ;168
0002cc  6921              LDR      r1,[r4,#0x10]         ;168  ; ms_Y
0002ce  e9d12100          LDRD     r2,r1,[r1,#0]         ;168
0002d2  1a9a              SUBS     r2,r3,r2              ;168
0002d4  4188              SBCS     r0,r0,r1              ;168
0002d6  d206              BCS      |L25.742|
0002d8  f8d81004          LDR      r1,[r8,#4]            ;168  ; mc_Y
0002dc  e9d10100          LDRD     r0,r1,[r1,#0]         ;168
0002e0  6922              LDR      r2,[r4,#0x10]         ;168  ; ms_Y
0002e2  e9c20100          STRD     r0,r1,[r2,#0]         ;168
                  |L25.742|
0002e6  68e0              LDR      r0,[r4,#0xc]          ;169  ; ms_Y
0002e8  1c40              ADDS     r0,r0,#1              ;169
0002ea  60e0              STR      r0,[r4,#0xc]          ;169  ; ms_Y
0002ec  6920              LDR      r0,[r4,#0x10]         ;170  ; ms_Y
0002ee  4651              MOV      r1,r10                ;170
0002f0  e9d02300          LDRD     r2,r3,[r0,#0]         ;170
0002f4  4648              MOV      r0,r9                 ;170
0002f6  f7fffffe          BL       __aeabi_uldivmod
0002fa  61a0              STR      r0,[r4,#0x18]         ;170  ; ms_Y
0002fc  61e1              STR      r1,[r4,#0x1c]         ;170  ; ms_Y
0002fe  6a20              LDR      r0,[r4,#0x20]         ;171  ; ms_Y
000300  6a61              LDR      r1,[r4,#0x24]         ;171  ; ms_Y
000302  1c40              ADDS     r0,r0,#1              ;171
000304  69a2              LDR      r2,[r4,#0x18]         ;171  ; ms_Y
000306  f1410100          ADC      r1,r1,#0              ;171
00030a  69e3              LDR      r3,[r4,#0x1c]         ;171  ; ms_Y
00030c  1a80              SUBS     r0,r0,r2              ;171
00030e  4199              SBCS     r1,r1,r3              ;171
000310  d2b0              BCS      |L25.628|
000312  69a3              LDR      r3,[r4,#0x18]         ;171  ; ms_Y
000314  69e1              LDR      r1,[r4,#0x1c]         ;171  ; ms_Y
000316  6a20              LDR      r0,[r4,#0x20]         ;171  ; ms_Y
000318  6a62              LDR      r2,[r4,#0x24]         ;171  ; ms_Y
00031a  1a18              SUBS     r0,r3,r0              ;171
00031c  eb610102          SBC      r1,r1,r2              ;171
                  |L25.800|
000320  62a0              STR      r0,[r4,#0x28]         ;188  ; ms_Y
000322  62e1              STR      r1,[r4,#0x2c]         ;188  ; ms_Y
                  |L25.804|
000324  7025              STRB     r5,[r4,#0]            ;208
000326  68a0              LDR      r0,[r4,#8]            ;209  ; ms_Y
000328  6862              LDR      r2,[r4,#4]            ;209  ; ms_Y
00032a  6801              LDR      r1,[r0,#0]            ;209
00032c  f9922000          LDRSB    r2,[r2,#0]            ;209
000330  4411              ADD      r1,r1,r2              ;209
000332  6001              STR      r1,[r0,#0]            ;210
000334  68a0              LDR      r0,[r4,#8]            ;210  ; ms_Y
000336  6801              LDR      r1,[r0,#0]            ;210
000338  481f              LDR      r0,|L25.952|
00033a  6481              STR      r1,[r0,#0x48]         ;210
                  |L25.828|
00033c  e683              B        |L25.70|
                  |L25.830|
00033e  6800              LDR      r0,[r0,#0]            ;183  ; mc_Y
000340  6923              LDR      r3,[r4,#0x10]         ;183  ; ms_Y
000342  e9d02000          LDRD     r2,r0,[r0,#0]         ;183
000346  e9c32000          STRD     r2,r0,[r3,#0]         ;183
00034a  60e1              STR      r1,[r4,#0xc]          ;184  ; ms_Y
00034c  e73b              B        |L25.454|
                  |L25.846|
00034e  60e1              STR      r1,[r4,#0xc]          ;186  ; ms_Y
000350  e73f              B        |L25.466|
                  |L25.850|
000352  69a0              LDR      r0,[r4,#0x18]         ;188  ; ms_Y
000354  69e1              LDR      r1,[r4,#0x1c]         ;188  ; ms_Y
000356  6a22              LDR      r2,[r4,#0x20]         ;188  ; ms_Y
000358  6a63              LDR      r3,[r4,#0x24]         ;188  ; ms_Y
00035a  1a80              SUBS     r0,r0,r2              ;188
00035c  e790              B        |L25.640|
                  |L25.862|
00035e  6a00              LDR      r0,[r0,#0x20]         ;191  ; mc_Y
000360  7001              STRB     r1,[r0,#0]            ;191
000362  f8d81000          LDR      r1,[r8,#0]            ;192  ; pCorrStop
000366  7808              LDRB     r0,[r1,#0]            ;192
000368  2800              CMP      r0,#0                 ;192
00036a  d1e7              BNE      |L25.828|
00036c  6a18              LDR      r0,[r3,#0x20]         ;194  ; mc_X
00036e  7800              LDRB     r0,[r0,#0]            ;194
000370  2800              CMP      r0,#0                 ;194
000372  d1e3              BNE      |L25.828|
000374  f8db2020          LDR      r2,[r11,#0x20]        ;194  ; mc_Z
000378  4658              MOV      r0,r11                ;194
00037a  7812              LDRB     r2,[r2,#0]            ;194
00037c  2a00              CMP      r2,#0                 ;194
00037e  d1dd              BNE      |L25.828|
000380  700d              STRB     r5,[r1,#0]            ;195
000382  490d              LDR      r1,|L25.952|
000384  f8815070          STRB     r5,[r1,#0x70]         ;196
000388  4910              LDR      r1,|L25.972|
00038a  68c2              LDR      r2,[r0,#0xc]          ;198  ; mc_Z
00038c  6809              LDR      r1,[r1,#0]            ;198  ; vZ_MAX_POS
00038e  6011              STR      r1,[r2,#0]            ;199
000390  6a00              LDR      r0,[r0,#0x20]         ;199  ; mc_Z
000392  7005              STRB     r5,[r0,#0]            ;199
000394  f7fffffe          BL       FIStop
000398  200c              MOVS     r0,#0xc               ;201
00039a  f7fffffe          BL       QClrPin
00039e  e8bd5ff0          POP      {r4-r12,lr}           ;201
0003a2  200d              MOVS     r0,#0xd               ;201
0003a4  f7ffbffe          B.W      QClrPin
;;;215    
                          ENDP

                  |L25.936|
                          DCD      ||.bss||+0x1c
                  |L25.940|
                          DCD      mc_X
                  |L25.944|
                          DCD      pCorrStop
                  |L25.948|
                          DCD      mc_Z
                  |L25.952|
                          DCD      0x40024000
                  |L25.956|
                          DCD      vY_MIN_POS
                  |L25.960|
                          DCD      vY_MAX_POS
                  |L25.964|
                          DCD      0x26fc1000
                  |L25.968|
                          DCD      0x0002386f
                  |L25.972|
                          DCD      vZ_MAX_POS

                          AREA ||i.MoveBtnY||, COMGROUP=MoveBtnY, CODE, READONLY, ALIGN=2

                  MoveBtnY PROC
;;;215    
;;;216    __inline void MoveBtnY(void){
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;217    	if 	(((!*(mc_Y.MoveBtn))&&(*(ms_Y.FrCur) <= *(mc_Y.FrMin))) || 
000004  4df8              LDR      r5,|L32.1000|
000006  69e8              LDR      r0,[r5,#0x1c]  ; mc_Y
;;;218    		(*(ms_Y.Pos) <= Y_MIN_POS)&&(*(mc_Y.ReqDir) == -1) ||
;;;219    		(*(ms_Y.Pos) >= Y_MAX_POS)&&(*(mc_Y.ReqDir) == 1)) 
;;;220    
;;;221    	{
;;;222    		// условие окончания движения
;;;223    		// переход в мониторинг
;;;224    		ms_Y.Tcur = Kb / *(mc_Y.FrMin);
000008  49f9              LDR      r1,|L32.1008|
00000a  f105042c          ADD      r4,r5,#0x2c           ;217
00000e  7802              LDRB     r2,[r0,#0]            ;217
000010  48f6              LDR      r0,|L32.1004|
000012  b942              CBNZ     r2,|L32.38|
000014  682a              LDR      r2,[r5,#0]            ;217  ; mc_Y
000016  6926              LDR      r6,[r4,#0x10]         ;217  ; ms_Y
000018  e9d23200          LDRD     r3,r2,[r2,#0]         ;217
00001c  e9d67600          LDRD     r7,r6,[r6,#0]         ;217
000020  1bdb              SUBS     r3,r3,r7              ;217
000022  41b2              SBCS     r2,r2,r6              ;217
000024  d25d              BCS      |L32.226|
                  |L32.38|
000026  68a2              LDR      r2,[r4,#8]            ;218  ; ms_Y
000028  6813              LDR      r3,[r2,#0]            ;218
00002a  4af2              LDR      r2,|L32.1012|
00002c  6816              LDR      r6,[r2,#0]            ;218  ; vY_MIN_POS
00002e  42b3              CMP      r3,r6                 ;218
000030  dc04              BGT      |L32.60|
000032  69aa              LDR      r2,[r5,#0x18]         ;218  ; mc_Y
000034  f9922000          LDRSB    r2,[r2,#0]            ;218
000038  1c52              ADDS     r2,r2,#1              ;218
00003a  d052              BEQ      |L32.226|
                  |L32.60|
00003c  68a2              LDR      r2,[r4,#8]            ;219  ; ms_Y
00003e  46a1              MOV      r9,r4                 ;219
000040  6817              LDR      r7,[r2,#0]            ;219
000042  4aed              LDR      r2,|L32.1016|
000044  6813              LDR      r3,[r2,#0]            ;219  ; vY_MAX_POS
000046  429f              CMP      r7,r3                 ;219
000048  db03              BLT      |L32.82|
00004a  69aa              LDR      r2,[r5,#0x18]         ;219  ; mc_Y
00004c  7812              LDRB     r2,[r2,#0]            ;219
00004e  2a01              CMP      r2,#1                 ;219
000050  d047              BEQ      |L32.226|
                  |L32.82|
;;;225    //		TCS_SetInterval(tcs_MotorY,2500000);
;;;226    //			Msg("Mon ");
;;;227    	} else {
;;;228    		if (!*(mc_Y.MoveBtn)) {
000052  69ea              LDR      r2,[r5,#0x1c]  ; mc_Y
000054  7814              LDRB     r4,[r2,#0]
000056  2200              MOVS     r2,#0
000058  b3ec              CBZ      r4,|L32.214|
;;;229    			// торможение
;;;230    			if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur))
;;;231    				*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;232    			else *(ms_Y.FrCur) = 0;			
;;;233    			if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) {
;;;234    				*(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;235    				ms_Y.Lacc = 0;
;;;236    			}	
;;;237    			if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;238    			ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;239    			ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;240    		} else {
;;;241    			// Движение разрешено
;;;242    			// Проверить текущую позицию на предмет подхода к границе поля 
;;;243    			// на расстояние необходимое для торможения
;;;244    			// торможение, изменение направления движения на необходимое
;;;245    			// разгон и движение с постоянной скоростью
;;;246    			if (*(ms_Y.Dir)!=*(mc_Y.ReqDir)) {
00005a  f8d97004          LDR      r7,[r9,#4]  ; ms_Y
00005e  464c              MOV      r4,r9
000060  f8d5c018          LDR      r12,[r5,#0x18]  ; mc_Y
000064  f9977000          LDRSB    r7,[r7,#0]
000068  f99cc000          LDRSB    r12,[r12,#0]
00006c  4567              CMP      r7,r12
00006e  d06f              BEQ      |L32.336|
;;;247    				// торможение и смена направления
;;;248    				if (*(ms_Y.FrCur) > *(mc_Y.FrMin)) {
000070  682b              LDR      r3,[r5,#0]  ; mc_Y
000072  f8d4c010          LDR      r12,[r4,#0x10]  ; ms_Y
000076  e9d36300          LDRD     r6,r3,[r3,#0]
00007a  e9dc7c00          LDRD     r7,r12,[r12,#0]
00007e  1bf6              SUBS     r6,r6,r7
000080  eb73030c          SBCS     r3,r3,r12
000084  d27d              BCS      |L32.386|
;;;249    				   	// торможение
;;;250    					if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur))
000086  696b              LDR      r3,[r5,#0x14]  ; mc_Y
000088  46aa              MOV      r10,r5
00008a  881d              LDRH     r5,[r3,#0]
00008c  4623              MOV      r3,r4
00008e  69a4              LDR      r4,[r4,#0x18]  ; ms_Y
000090  0fee              LSRS     r6,r5,#31
000092  69df              LDR      r7,[r3,#0x1c]  ; ms_Y
000094  fba5c804          UMULL    r12,r8,r5,r4
000098  fb068404          MLA      r4,r6,r4,r8
00009c  fb054407          MLA      r4,r5,r7,r4
0000a0  691b              LDR      r3,[r3,#0x10]  ; ms_Y
0000a2  e9d35300          LDRD     r5,r3,[r3,#0]
0000a6  ebbc0505          SUBS     r5,r12,r5
0000aa  419c              SBCS     r4,r4,r3
0000ac  d26a              BCS      |L32.388|
;;;251    						*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
0000ae  f8d94010          LDR      r4,[r9,#0x10]  ; ms_Y
0000b2  f8da3014          LDR      r3,[r10,#0x14]  ; mc_Y
0000b6  f8d97018          LDR      r7,[r9,#0x18]  ; ms_Y
0000ba  881b              LDRH     r3,[r3,#0]
0000bc  0fde              LSRS     r6,r3,#31
0000be  f8d9c01c          LDR      r12,[r9,#0x1c]  ; ms_Y
0000c2  fba35807          UMULL    r5,r8,r3,r7
0000c6  fb068607          MLA      r6,r6,r7,r8
0000ca  fb03660c          MLA      r6,r3,r12,r6
0000ce  e9d47300          LDRD     r7,r3,[r4,#0]
0000d2  1b7d              SUBS     r5,r7,r5
0000d4  e000              B        |L32.216|
                  |L32.214|
0000d6  e00d              B        |L32.244|
                  |L32.216|
0000d8  eb630306          SBC      r3,r3,r6
0000dc  e9c45300          STRD     r5,r3,[r4,#0]
0000e0  e073              B        |L32.458|
                  |L32.226|
0000e2  682b              LDR      r3,[r5,#0]            ;224  ; mc_Y
0000e4  e9d32300          LDRD     r2,r3,[r3,#0]         ;224
0000e8  f7fffffe          BL       __aeabi_uldivmod
0000ec  61a0              STR      r0,[r4,#0x18]         ;224  ; ms_Y
0000ee  61e1              STR      r1,[r4,#0x1c]         ;224  ; ms_Y
                  |L32.240|
;;;252    					else *(ms_Y.FrCur) = 0;			
;;;253    					if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) {
;;;254    						*(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;255    						ms_Y.Lacc = 0;
;;;256    					}	
;;;257    					if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;258    					ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;259    					ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;260    				} else {
;;;261    					// смена направления
;;;262    					*(ms_Y.Dir)=*(mc_Y.ReqDir);
;;;263    					if (*(ms_Y.Dir) == 1) {
;;;264    						QSetPin(MOTOR_Yl_DIR);
;;;265    						QSetPin(MOTOR_Yr_DIR);
;;;266    					} else {
;;;267    					 	QClrPin(MOTOR_Yl_DIR);
;;;268    					 	QClrPin(MOTOR_Yr_DIR);
;;;269    					}
;;;270    //					Msg("DelayDirY\r\n");
;;;271    //					TCS_SetInterval(tcs_MotorY,*pDirDelay);
;;;272    //					return;
;;;273    				}
;;;274    			} else {
;;;275    				// разгон и движение с постоянной скоростью
;;;276    				if 	( 
;;;277    						(((*(ms_Y.Pos)-(ms_Y.Lacc+10)) < Y_MIN_POS)&&(*(mc_Y.ReqDir) == -1)) ||
;;;278    						(((*(ms_Y.Pos)+(ms_Y.Lacc+10)) > Y_MAX_POS)&&(*(mc_Y.ReqDir) == 1)) 
;;;279    					)
;;;280    				{
;;;281    					// торможение
;;;282    					if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur))
;;;283    						*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;284    					else *(ms_Y.FrCur) = 0;			
;;;285    					if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) {
;;;286    						*(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;287    						ms_Y.Lacc = 0;
;;;288    					}	
;;;289    					if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;290    					ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;291    					ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;292    				} else
;;;293    				if (*(mc_Y.FrReq) < *(mc_Y.FrMin)) {
;;;294    					// требуемая частота меньше минимальной
;;;295    					// торможение FrCur до FrMin и переход на FrReq
;;;296    //					Msg("FrReq < FrMin ");
;;;297    					if (*(ms_Y.FrCur) > *(mc_Y.FrMin)) {
;;;298    						// торможение
;;;299    						if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur))
;;;300    							*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;301    						else *(ms_Y.FrCur) = 0;			
;;;302    						if (*(ms_Y.FrCur) < *(mc_Y.FrMin)) *(ms_Y.FrCur) = *(mc_Y.FrMin);
;;;303    						if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;304    						if (*(ms_Y.FrCur) > *(mc_Y.FrMin)) {
;;;305    							ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;306    							ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;307    						} else {
;;;308    							// переход на FrReq
;;;309    							*(ms_Y.FrCur) = *(mc_Y.FrReq);
;;;310    							ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;311    							ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;312    						}
;;;313    					} 
;;;314    				} else {
;;;315    					// требуемая частота больше или равна минимальной
;;;316    //					Msg("FrReq >= FrMin ");
;;;317    					// движение с FrReq
;;;318    					if (*(ms_Y.FrCur) < *(mc_Y.FrReq)) {
;;;319    						// разгон до FrReq
;;;320    						*(ms_Y.FrCur) += *(mc_Y.Accel) * ms_Y.Tcur;
;;;321    						ms_Y.Lacc++;
;;;322    						if (*(ms_Y.FrCur) > *(mc_Y.FrReq)) *(ms_Y.FrCur) = *(mc_Y.FrReq);
;;;323    						ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;324    						ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;325    //							Msg("Acc To FrReq ");
;;;326    					} else
;;;327    					if (*(ms_Y.FrCur) > *(mc_Y.FrReq)) {
;;;328    						// торможение до FrReq
;;;329    						if (*(ms_Y.FrCur) > *(mc_Y.Accel) * mulAY * (ms_Y.Tcur))
;;;330    							*(ms_Y.FrCur) -= *(mc_Y.Accel) * mulAY * (ms_Y.Tcur);
;;;331    						else *(ms_Y.FrCur) = 0;			
;;;332    						if (ms_Y.Lacc >= mulAY) ms_Y.Lacc-=mulAY; else ms_Y.Lacc = 0;
;;;333    						if (*(ms_Y.FrCur) < *(mc_Y.FrReq)) *(ms_Y.FrCur) = *(mc_Y.FrReq);
;;;334    						ms_Y.Tcur = Kb / (*(ms_Y.FrCur));
;;;335    						ms_Y.LPOFF = CLPOFF(ms_Y.Tcur,ms_Y.LPON);		
;;;336    //							Msg("Dec To FrReq ");
;;;337    					} 
;;;338    				}
;;;339    			}
;;;340    		}
;;;341    		//ON_PULSE;
;;;342    		*(ms_Y.Pos)+=*(ms_Y.Dir);							
;;;343    		BR_ms_Y_Pos = *(ms_Y.Pos);
;;;344    		ms_Y.Level = 1;								
;;;345    //		QSetPin(MOTOR_Yl_STEP);						
;;;346    //		QSetPin(MOTOR_Yr_STEP);	
;;;347    //		TCS_SetInterval(tcs_MotorY,ms_Y.LPON);		
;;;348    		//Msg("Pos %d Lacc %d ",ms_Y.Pos, ms_Y.Lacc);
;;;349    	}
;;;350    
;;;351    }
0000f0  e8bd87f0          POP      {r4-r10,pc}
                  |L32.244|
0000f4  696b              LDR      r3,[r5,#0x14]         ;230  ; mc_Y
0000f6  46aa              MOV      r10,r5                ;230
0000f8  f8d95018          LDR      r5,[r9,#0x18]         ;230  ; ms_Y
0000fc  881c              LDRH     r4,[r3,#0]            ;230
0000fe  0fe7              LSRS     r7,r4,#31             ;230
000100  f8d9601c          LDR      r6,[r9,#0x1c]         ;230  ; ms_Y
000104  fba4c805          UMULL    r12,r8,r4,r5          ;230
000108  fb078505          MLA      r5,r7,r5,r8           ;230
00010c  fb045406          MLA      r4,r4,r6,r5           ;230
000110  f8d95010          LDR      r5,[r9,#0x10]         ;230  ; ms_Y
000114  e9d53500          LDRD     r3,r5,[r5,#0]         ;230
000118  ebbc0303          SUBS     r3,r12,r3             ;230
00011c  41ac              SBCS     r4,r4,r5              ;230
00011e  d218              BCS      |L32.338|
000120  f8d94010          LDR      r4,[r9,#0x10]         ;231  ; ms_Y
000124  f8da3014          LDR      r3,[r10,#0x14]        ;231  ; mc_Y
000128  f8d97018          LDR      r7,[r9,#0x18]         ;231  ; ms_Y
00012c  881b              LDRH     r3,[r3,#0]            ;231
00012e  0fde              LSRS     r6,r3,#31             ;231
000130  f8d9c01c          LDR      r12,[r9,#0x1c]        ;231  ; ms_Y
000134  fba35807          UMULL    r5,r8,r3,r7           ;231
000138  fb068607          MLA      r6,r6,r7,r8           ;231
00013c  fb03670c          MLA      r7,r3,r12,r6          ;231
000140  e9d46300          LDRD     r6,r3,[r4,#0]         ;231
000144  1b75              SUBS     r5,r6,r5              ;231
000146  eb630307          SBC      r3,r3,r7              ;231
00014a  e9c45300          STRD     r5,r3,[r4,#0]         ;231
00014e  e005              B        |L32.348|
                  |L32.336|
000150  e085              B        |L32.606|
                  |L32.338|
000152  f8d94010          LDR      r4,[r9,#0x10]         ;232  ; ms_Y
000156  2300              MOVS     r3,#0                 ;231
000158  e9c43300          STRD     r3,r3,[r4,#0]         ;232
                  |L32.348|
00015c  f8d93010          LDR      r3,[r9,#0x10]         ;233  ; ms_Y
000160  464c              MOV      r4,r9                 ;233
000162  f8da7000          LDR      r7,[r10,#0]           ;233  ; mc_Y
000166  e9d3c500          LDRD     r12,r5,[r3,#0]        ;233
00016a  4653              MOV      r3,r10                ;233
00016c  e9d76700          LDRD     r6,r7,[r7,#0]         ;233
000170  ebbc0606          SUBS     r6,r12,r6             ;233
000174  41bd              SBCS     r5,r5,r7              ;233
000176  d209              BCS      |L32.396|
000178  681b              LDR      r3,[r3,#0]            ;234  ; mc_Y
00017a  6926              LDR      r6,[r4,#0x10]         ;234  ; ms_Y
00017c  e9d35300          LDRD     r5,r3,[r3,#0]         ;234
000180  e001              B        |L32.390|
                  |L32.386|
000182  e056              B        |L32.562|
                  |L32.388|
000184  e01c              B        |L32.448|
                  |L32.390|
000186  e9c65300          STRD     r5,r3,[r6,#0]         ;234
00018a  60e2              STR      r2,[r4,#0xc]          ;235  ; ms_Y
                  |L32.396|
00018c  68e3              LDR      r3,[r4,#0xc]          ;237  ; ms_Y
00018e  2b01              CMP      r3,#1                 ;237
000190  db01              BLT      |L32.406|
000192  68e2              LDR      r2,[r4,#0xc]          ;237  ; ms_Y
000194  1e52              SUBS     r2,r2,#1              ;237
                  |L32.406|
000196  60e2              STR      r2,[r4,#0xc]          ;237  ; ms_Y
000198  6923              LDR      r3,[r4,#0x10]         ;238  ; ms_Y
00019a  e9d32300          LDRD     r2,r3,[r3,#0]         ;238
00019e  f7fffffe          BL       __aeabi_uldivmod
0001a2  61a0              STR      r0,[r4,#0x18]         ;238  ; ms_Y
0001a4  61e1              STR      r1,[r4,#0x1c]         ;238  ; ms_Y
0001a6  6a20              LDR      r0,[r4,#0x20]         ;239  ; ms_Y
0001a8  6a61              LDR      r1,[r4,#0x24]         ;239  ; ms_Y
0001aa  1c40              ADDS     r0,r0,#1              ;239
0001ac  69a3              LDR      r3,[r4,#0x18]         ;239  ; ms_Y
0001ae  f1410100          ADC      r1,r1,#0              ;239
0001b2  69e2              LDR      r2,[r4,#0x1c]         ;239  ; ms_Y
0001b4  1ac0              SUBS     r0,r0,r3              ;239
0001b6  4191              SBCS     r1,r1,r2              ;239
0001b8  d37e              BCC      |L32.696|
                  |L32.442|
0001ba  2001              MOVS     r0,#1                 ;239
0001bc  2100              MOVS     r1,#0                 ;239
0001be  e15f              B        |L32.1152|
                  |L32.448|
0001c0  f8d94010          LDR      r4,[r9,#0x10]         ;252  ; ms_Y
0001c4  2300              MOVS     r3,#0                 ;239
0001c6  e9c43300          STRD     r3,r3,[r4,#0]         ;252
                  |L32.458|
0001ca  f8d93010          LDR      r3,[r9,#0x10]         ;253  ; ms_Y
0001ce  464c              MOV      r4,r9                 ;253
0001d0  f8da6000          LDR      r6,[r10,#0]           ;253  ; mc_Y
0001d4  e9d37500          LDRD     r7,r5,[r3,#0]         ;253
0001d8  4653              MOV      r3,r10                ;253
0001da  e9d6c600          LDRD     r12,r6,[r6,#0]        ;253
0001de  ebb7070c          SUBS     r7,r7,r12             ;253
0001e2  41b5              SBCS     r5,r5,r6              ;253
0001e4  d206              BCS      |L32.500|
0001e6  681b              LDR      r3,[r3,#0]            ;254  ; mc_Y
0001e8  6926              LDR      r6,[r4,#0x10]         ;254  ; ms_Y
0001ea  e9d35300          LDRD     r5,r3,[r3,#0]         ;254
0001ee  e9c65300          STRD     r5,r3,[r6,#0]         ;254
0001f2  60e2              STR      r2,[r4,#0xc]          ;255  ; ms_Y
                  |L32.500|
0001f4  68e3              LDR      r3,[r4,#0xc]          ;257  ; ms_Y
0001f6  2b01              CMP      r3,#1                 ;257
0001f8  db01              BLT      |L32.510|
0001fa  68e2              LDR      r2,[r4,#0xc]          ;257  ; ms_Y
0001fc  1e52              SUBS     r2,r2,#1              ;257
                  |L32.510|
0001fe  60e2              STR      r2,[r4,#0xc]          ;257  ; ms_Y
000200  6923              LDR      r3,[r4,#0x10]         ;258  ; ms_Y
000202  e9d32300          LDRD     r2,r3,[r3,#0]         ;258
000206  f7fffffe          BL       __aeabi_uldivmod
00020a  61a0              STR      r0,[r4,#0x18]         ;258  ; ms_Y
00020c  61e1              STR      r1,[r4,#0x1c]         ;258  ; ms_Y
00020e  6a20              LDR      r0,[r4,#0x20]         ;259  ; ms_Y
000210  6a61              LDR      r1,[r4,#0x24]         ;259  ; ms_Y
000212  1c40              ADDS     r0,r0,#1              ;259
000214  69a2              LDR      r2,[r4,#0x18]         ;259  ; ms_Y
000216  f1410100          ADC      r1,r1,#0              ;259
00021a  69e3              LDR      r3,[r4,#0x1c]         ;259  ; ms_Y
00021c  1a80              SUBS     r0,r0,r2              ;259
00021e  4199              SBCS     r1,r1,r3              ;259
000220  d2cb              BCS      |L32.442|
000222  69a2              LDR      r2,[r4,#0x18]         ;259  ; ms_Y
000224  69e1              LDR      r1,[r4,#0x1c]         ;259  ; ms_Y
000226  6a20              LDR      r0,[r4,#0x20]         ;259  ; ms_Y
000228  6a63              LDR      r3,[r4,#0x24]         ;259  ; ms_Y
00022a  1a10              SUBS     r0,r2,r0              ;259
00022c  eb610103          SBC      r1,r1,r3              ;259
000230  e126              B        |L32.1152|
                  |L32.562|
000232  69a8              LDR      r0,[r5,#0x18]         ;262  ; mc_Y
000234  6861              LDR      r1,[r4,#4]            ;262  ; ms_Y
000236  7800              LDRB     r0,[r0,#0]            ;262
000238  7008              STRB     r0,[r1,#0]            ;262
00023a  6860              LDR      r0,[r4,#4]            ;263  ; ms_Y
00023c  7800              LDRB     r0,[r0,#0]            ;263
00023e  2801              CMP      r0,#1                 ;263
000240  f04f0004          MOV      r0,#4                 ;267
000244  d005              BEQ      |L32.594|
000246  f7fffffe          BL       QClrPin
00024a  2007              MOVS     r0,#7                 ;268
00024c  f7fffffe          BL       QClrPin
                  |L32.592|
000250  e118              B        |L32.1156|
                  |L32.594|
000252  f7fffffe          BL       QSetPin
000256  2007              MOVS     r0,#7                 ;265
000258  f7fffffe          BL       QSetPin
00025c  e112              B        |L32.1156|
                  |L32.606|
00025e  68a7              LDR      r7,[r4,#8]            ;276  ; ms_Y
000260  f8d4c00c          LDR      r12,[r4,#0xc]         ;276  ; ms_Y
000264  683f              LDR      r7,[r7,#0]            ;276
000266  eba7070c          SUB      r7,r7,r12             ;276
00026a  3f0a              SUBS     r7,r7,#0xa            ;276
00026c  42b7              CMP      r7,r6                 ;276
00026e  da04              BGE      |L32.634|
000270  69ae              LDR      r6,[r5,#0x18]         ;277  ; mc_Y
000272  f9966000          LDRSB    r6,[r6,#0]            ;277
000276  1c76              ADDS     r6,r6,#1              ;277
000278  d04d              BEQ      |L32.790|
                  |L32.634|
00027a  68a6              LDR      r6,[r4,#8]            ;278  ; ms_Y
00027c  68e7              LDR      r7,[r4,#0xc]          ;278  ; ms_Y
00027e  6836              LDR      r6,[r6,#0]            ;278
000280  443e              ADD      r6,r6,r7              ;278
000282  360a              ADDS     r6,r6,#0xa            ;278
000284  429e              CMP      r6,r3                 ;278
000286  dd03              BLE      |L32.656|
000288  69ab              LDR      r3,[r5,#0x18]         ;278  ; mc_Y
00028a  781b              LDRB     r3,[r3,#0]            ;278
00028c  2b01              CMP      r3,#1                 ;278
00028e  d042              BEQ      |L32.790|
                  |L32.656|
000290  686b              LDR      r3,[r5,#4]            ;293  ; mc_Y
000292  f8d5c000          LDR      r12,[r5,#0]           ;293  ; mc_Y
000296  e9d36300          LDRD     r6,r3,[r3,#0]         ;293
00029a  e9dc7c00          LDRD     r7,r12,[r12,#0]       ;293
00029e  1bf6              SUBS     r6,r6,r7              ;293
0002a0  eb73030c          SBCS     r3,r3,r12             ;293
0002a4  d27e              BCS      |L32.932|
0002a6  682b              LDR      r3,[r5,#0]            ;297  ; mc_Y
0002a8  f8d4c010          LDR      r12,[r4,#0x10]        ;297  ; ms_Y
0002ac  e9d36300          LDRD     r6,r3,[r3,#0]         ;297
0002b0  e9dc7c00          LDRD     r7,r12,[r12,#0]       ;297
0002b4  1bf6              SUBS     r6,r6,r7              ;297
0002b6  e000              B        |L32.698|
                  |L32.696|
0002b8  e10d              B        |L32.1238|
                  |L32.698|
0002ba  eb73030c          SBCS     r3,r3,r12             ;297
0002be  d272              BCS      |L32.934|
0002c0  696b              LDR      r3,[r5,#0x14]         ;299  ; mc_Y
0002c2  46aa              MOV      r10,r5                ;299
0002c4  69a6              LDR      r6,[r4,#0x18]         ;299  ; ms_Y
0002c6  881b              LDRH     r3,[r3,#0]            ;299
0002c8  0fdd              LSRS     r5,r3,#31             ;299
0002ca  69e7              LDR      r7,[r4,#0x1c]         ;299  ; ms_Y
0002cc  fba3c806          UMULL    r12,r8,r3,r6          ;299
0002d0  fb058506          MLA      r5,r5,r6,r8           ;299
0002d4  fb035307          MLA      r3,r3,r7,r5           ;299
0002d8  6924              LDR      r4,[r4,#0x10]         ;299  ; ms_Y
0002da  e9d45400          LDRD     r5,r4,[r4,#0]         ;299
0002de  ebbc0505          SUBS     r5,r12,r5             ;299
0002e2  41a3              SBCS     r3,r3,r4              ;299
0002e4  d27e              BCS      |L32.996|
0002e6  f8d93010          LDR      r3,[r9,#0x10]         ;300  ; ms_Y
0002ea  f8da4014          LDR      r4,[r10,#0x14]        ;300  ; mc_Y
0002ee  f8d97018          LDR      r7,[r9,#0x18]         ;300  ; ms_Y
0002f2  8824              LDRH     r4,[r4,#0]            ;300
0002f4  0fe6              LSRS     r6,r4,#31             ;300
0002f6  f8d9c01c          LDR      r12,[r9,#0x1c]        ;300  ; ms_Y
0002fa  fba45807          UMULL    r5,r8,r4,r7           ;300
0002fe  fb068607          MLA      r6,r6,r7,r8           ;300
000302  fb04670c          MLA      r7,r4,r12,r6          ;300
000306  e9d36400          LDRD     r6,r4,[r3,#0]         ;300
00030a  1b75              SUBS     r5,r6,r5              ;300
00030c  eb640407          SBC      r4,r4,r7              ;300
000310  e9c35400          STRD     r5,r4,[r3,#0]         ;300
000314  e07c              B        |L32.1040|
                  |L32.790|
000316  696b              LDR      r3,[r5,#0x14]         ;282  ; mc_Y
000318  46aa              MOV      r10,r5                ;282
00031a  69a5              LDR      r5,[r4,#0x18]         ;282  ; ms_Y
00031c  881b              LDRH     r3,[r3,#0]            ;282
00031e  0fde              LSRS     r6,r3,#31             ;282
000320  69e7              LDR      r7,[r4,#0x1c]         ;282  ; ms_Y
000322  fba3c805          UMULL    r12,r8,r3,r5          ;282
000326  fb068505          MLA      r5,r6,r5,r8           ;282
00032a  fb035307          MLA      r3,r3,r7,r5           ;282
00032e  6925              LDR      r5,[r4,#0x10]         ;282  ; ms_Y
000330  e9d54500          LDRD     r4,r5,[r5,#0]         ;282
000334  ebbc0404          SUBS     r4,r12,r4             ;282
000338  41ab              SBCS     r3,r3,r5              ;282
00033a  d217              BCS      |L32.876|
00033c  f8d94010          LDR      r4,[r9,#0x10]         ;283  ; ms_Y
000340  f8da3014          LDR      r3,[r10,#0x14]        ;283  ; mc_Y
000344  f8d97018          LDR      r7,[r9,#0x18]         ;283  ; ms_Y
000348  881b              LDRH     r3,[r3,#0]            ;283
00034a  0fde              LSRS     r6,r3,#31             ;283
00034c  f8d9c01c          LDR      r12,[r9,#0x1c]        ;283  ; ms_Y
000350  fba35807          UMULL    r5,r8,r3,r7           ;283
000354  fb068607          MLA      r6,r6,r7,r8           ;283
000358  fb03670c          MLA      r7,r3,r12,r6          ;283
00035c  e9d46300          LDRD     r6,r3,[r4,#0]         ;283
000360  1b75              SUBS     r5,r6,r5              ;283
000362  eb630307          SBC      r3,r3,r7              ;283
000366  e9c45300          STRD     r5,r3,[r4,#0]         ;283
00036a  e004              B        |L32.886|
                  |L32.876|
00036c  f8d94010          LDR      r4,[r9,#0x10]         ;284  ; ms_Y
000370  2300              MOVS     r3,#0                 ;283
000372  e9c43300          STRD     r3,r3,[r4,#0]         ;284
                  |L32.886|
000376  f8d93010          LDR      r3,[r9,#0x10]         ;285  ; ms_Y
00037a  464c              MOV      r4,r9                 ;285
00037c  f8da7000          LDR      r7,[r10,#0]           ;285  ; mc_Y
000380  e9d3c500          LDRD     r12,r5,[r3,#0]        ;285
000384  4653              MOV      r3,r10                ;285
000386  e9d76700          LDRD     r6,r7,[r7,#0]         ;285
00038a  ebbc0606          SUBS     r6,r12,r6             ;285
00038e  41bd              SBCS     r5,r5,r7              ;285
000390  d206              BCS      |L32.928|
000392  681b              LDR      r3,[r3,#0]            ;286  ; mc_Y
000394  6926              LDR      r6,[r4,#0x10]         ;286  ; ms_Y
000396  e9d35300          LDRD     r5,r3,[r3,#0]         ;286
00039a  e9c65300          STRD     r5,r3,[r6,#0]         ;286
00039e  60e2              STR      r2,[r4,#0xc]          ;287  ; ms_Y
                  |L32.928|
0003a0  68e3              LDR      r3,[r4,#0xc]          ;289  ; ms_Y
0003a2  e001              B        |L32.936|
                  |L32.932|
0003a4  e09d              B        |L32.1250|
                  |L32.934|
0003a6  e06d              B        |L32.1156|
                  |L32.936|
0003a8  2b01              CMP      r3,#1                 ;289
0003aa  db01              BLT      |L32.944|
0003ac  68e2              LDR      r2,[r4,#0xc]          ;289  ; ms_Y
0003ae  1e52              SUBS     r2,r2,#1              ;289
                  |L32.944|
0003b0  60e2              STR      r2,[r4,#0xc]          ;289  ; ms_Y
0003b2  6923              LDR      r3,[r4,#0x10]         ;290  ; ms_Y
0003b4  e9d32300          LDRD     r2,r3,[r3,#0]         ;290
0003b8  f7fffffe          BL       __aeabi_uldivmod
0003bc  61a0              STR      r0,[r4,#0x18]         ;290  ; ms_Y
0003be  61e1              STR      r1,[r4,#0x1c]         ;290  ; ms_Y
0003c0  6a20              LDR      r0,[r4,#0x20]         ;291  ; ms_Y
0003c2  6a61              LDR      r1,[r4,#0x24]         ;291  ; ms_Y
0003c4  1c40              ADDS     r0,r0,#1              ;291
0003c6  69a2              LDR      r2,[r4,#0x18]         ;291  ; ms_Y
0003c8  f1410100          ADC      r1,r1,#0              ;291
0003cc  69e3              LDR      r3,[r4,#0x1c]         ;291  ; ms_Y
0003ce  1a80              SUBS     r0,r0,r2              ;291
0003d0  4199              SBCS     r1,r1,r3              ;291
0003d2  d213              BCS      |L32.1020|
0003d4  69a2              LDR      r2,[r4,#0x18]         ;291  ; ms_Y
0003d6  69e0              LDR      r0,[r4,#0x1c]         ;291  ; ms_Y
0003d8  6a21              LDR      r1,[r4,#0x20]         ;291  ; ms_Y
0003da  6a63              LDR      r3,[r4,#0x24]         ;291  ; ms_Y
0003dc  1a51              SUBS     r1,r2,r1              ;291
0003de  eb600203          SBC      r2,r0,r3              ;291
0003e2  e00d              B        |L32.1024|
                  |L32.996|
0003e4  e00f              B        |L32.1030|
0003e6  0000              DCW      0x0000
                  |L32.1000|
                          DCD      ||.bss||+0x1c
                  |L32.1004|
                          DCD      0x26fc1000
                  |L32.1008|
                          DCD      0x0002386f
                  |L32.1012|
                          DCD      vY_MIN_POS
                  |L32.1016|
                          DCD      vY_MAX_POS
                  |L32.1020|
0003fc  2101              MOVS     r1,#1                 ;291
0003fe  2200              MOVS     r2,#0                 ;291
                  |L32.1024|
000400  62a1              STR      r1,[r4,#0x28]         ;291  ; ms_Y
000402  62e2              STR      r2,[r4,#0x2c]         ;291  ; ms_Y
000404  e03e              B        |L32.1156|
                  |L32.1030|
000406  f8d95010          LDR      r5,[r9,#0x10]         ;301  ; ms_Y
00040a  2300              MOVS     r3,#0                 ;291
00040c  e9c53300          STRD     r3,r3,[r5,#0]         ;301
                  |L32.1040|
000410  f8d93010          LDR      r3,[r9,#0x10]         ;302  ; ms_Y
000414  464c              MOV      r4,r9                 ;302
000416  f8da7000          LDR      r7,[r10,#0]           ;302  ; mc_Y
00041a  e9d3c500          LDRD     r12,r5,[r3,#0]        ;302
00041e  4653              MOV      r3,r10                ;302
000420  e9d76700          LDRD     r6,r7,[r7,#0]         ;302
000424  ebbc0606          SUBS     r6,r12,r6             ;302
000428  41bd              SBCS     r5,r5,r7              ;302
00042a  d205              BCS      |L32.1080|
00042c  681d              LDR      r5,[r3,#0]            ;302  ; mc_Y
00042e  6927              LDR      r7,[r4,#0x10]         ;302  ; ms_Y
000430  e9d56500          LDRD     r6,r5,[r5,#0]         ;302
000434  e9c76500          STRD     r6,r5,[r7,#0]         ;302
                  |L32.1080|
000438  68e5              LDR      r5,[r4,#0xc]          ;303  ; ms_Y
00043a  2d01              CMP      r5,#1                 ;303
00043c  db01              BLT      |L32.1090|
00043e  68e2              LDR      r2,[r4,#0xc]          ;303  ; ms_Y
000440  1e52              SUBS     r2,r2,#1              ;303
                  |L32.1090|
000442  60e2              STR      r2,[r4,#0xc]          ;303  ; ms_Y
000444  681a              LDR      r2,[r3,#0]            ;304  ; mc_Y
000446  6927              LDR      r7,[r4,#0x10]         ;304  ; ms_Y
000448  e9d25200          LDRD     r5,r2,[r2,#0]         ;304
00044c  e9d76700          LDRD     r6,r7,[r7,#0]         ;304
000450  1bad              SUBS     r5,r5,r6              ;304
000452  41ba              SBCS     r2,r2,r7              ;304
000454  d228              BCS      |L32.1192|
                  |L32.1110|
000456  6923              LDR      r3,[r4,#0x10]         ;305  ; ms_Y
000458  e9d32300          LDRD     r2,r3,[r3,#0]         ;305
00045c  f7fffffe          BL       __aeabi_uldivmod
000460  61a0              STR      r0,[r4,#0x18]         ;305  ; ms_Y
000462  61e1              STR      r1,[r4,#0x1c]         ;305  ; ms_Y
000464  6a20              LDR      r0,[r4,#0x20]         ;306  ; ms_Y
000466  6a61              LDR      r1,[r4,#0x24]         ;306  ; ms_Y
000468  1c40              ADDS     r0,r0,#1              ;306
00046a  69a2              LDR      r2,[r4,#0x18]         ;306  ; ms_Y
00046c  f1410100          ADC      r1,r1,#0              ;306
000470  69e3              LDR      r3,[r4,#0x1c]         ;306  ; ms_Y
000472  1a80              SUBS     r0,r0,r2              ;306
000474  4199              SBCS     r1,r1,r3              ;306
000476  d376              BCC      |L32.1382|
                  |L32.1144|
000478  e69f              B        |L32.442|
00047a  bf00              NOP                            ;306
                  |L32.1148|
00047c  eb610102          SBC      r1,r1,r2              ;306
                  |L32.1152|
000480  62a0              STR      r0,[r4,#0x28]         ;335  ; ms_Y
000482  62e1              STR      r1,[r4,#0x2c]         ;335  ; ms_Y
                  |L32.1156|
000484  f8d91008          LDR      r1,[r9,#8]            ;342  ; ms_Y
000488  f8d93004          LDR      r3,[r9,#4]            ;342  ; ms_Y
00048c  680a              LDR      r2,[r1,#0]            ;342
00048e  f9933000          LDRSB    r3,[r3,#0]            ;342
000492  441a              ADD      r2,r2,r3              ;342
000494  600a              STR      r2,[r1,#0]            ;343
000496  f8d91008          LDR      r1,[r9,#8]            ;343  ; ms_Y
00049a  4a62              LDR      r2,|L32.1572|
00049c  6809              LDR      r1,[r1,#0]            ;343
00049e  6491              STR      r1,[r2,#0x48]         ;343
0004a0  2101              MOVS     r1,#1                 ;344
0004a2  f8891000          STRB     r1,[r9,#0]            ;344
0004a6  e623              B        |L32.240|
                  |L32.1192|
0004a8  685b              LDR      r3,[r3,#4]            ;309  ; mc_Y
0004aa  e9d32300          LDRD     r2,r3,[r3,#0]         ;309
0004ae  6925              LDR      r5,[r4,#0x10]         ;309  ; ms_Y
0004b0  e9c52300          STRD     r2,r3,[r5,#0]         ;309
0004b4  6923              LDR      r3,[r4,#0x10]         ;310  ; ms_Y
0004b6  e9d32300          LDRD     r2,r3,[r3,#0]         ;310
0004ba  f7fffffe          BL       __aeabi_uldivmod
0004be  61a0              STR      r0,[r4,#0x18]         ;310  ; ms_Y
0004c0  61e1              STR      r1,[r4,#0x1c]         ;310  ; ms_Y
0004c2  6a20              LDR      r0,[r4,#0x20]         ;311  ; ms_Y
0004c4  6a61              LDR      r1,[r4,#0x24]         ;311  ; ms_Y
0004c6  1c40              ADDS     r0,r0,#1              ;311
0004c8  69a2              LDR      r2,[r4,#0x18]         ;311  ; ms_Y
0004ca  f1410100          ADC      r1,r1,#0              ;311
0004ce  69e3              LDR      r3,[r4,#0x1c]         ;311  ; ms_Y
0004d0  1a80              SUBS     r0,r0,r2              ;311
0004d2  4199              SBCS     r1,r1,r3              ;311
0004d4  d2d0              BCS      |L32.1144|
                  |L32.1238|
0004d6  69a0              LDR      r0,[r4,#0x18]         ;311  ; ms_Y
0004d8  69e1              LDR      r1,[r4,#0x1c]         ;311  ; ms_Y
0004da  6a23              LDR      r3,[r4,#0x20]         ;311  ; ms_Y
0004dc  6a62              LDR      r2,[r4,#0x24]         ;311  ; ms_Y
0004de  1ac0              SUBS     r0,r0,r3              ;311
0004e0  e7cc              B        |L32.1148|
                  |L32.1250|
0004e2  6923              LDR      r3,[r4,#0x10]         ;318  ; ms_Y
0004e4  686f              LDR      r7,[r5,#4]            ;318  ; mc_Y
0004e6  e9d3c300          LDRD     r12,r3,[r3,#0]        ;318
0004ea  e9d76700          LDRD     r6,r7,[r7,#0]         ;318
0004ee  ebbc0606          SUBS     r6,r12,r6             ;318
0004f2  41bb              SBCS     r3,r3,r7              ;318
0004f4  d23d              BCS      |L32.1394|
0004f6  6923              LDR      r3,[r4,#0x10]         ;320  ; ms_Y
0004f8  46aa              MOV      r10,r5                ;320
0004fa  696d              LDR      r5,[r5,#0x14]         ;320  ; mc_Y
0004fc  69a6              LDR      r6,[r4,#0x18]         ;320  ; ms_Y
0004fe  882d              LDRH     r5,[r5,#0]            ;320
000500  69e7              LDR      r7,[r4,#0x1c]         ;320  ; ms_Y
000502  fba5c806          UMULL    r12,r8,r5,r6          ;320
000506  fb028206          MLA      r2,r2,r6,r8           ;320
00050a  fb052207          MLA      r2,r5,r7,r2           ;320
00050e  e9d35600          LDRD     r5,r6,[r3,#0]         ;320
000512  eb1c0505          ADDS     r5,r12,r5             ;320
000516  4172              ADCS     r2,r2,r6              ;320
000518  e9c35200          STRD     r5,r2,[r3,#0]         ;320
00051c  68e2              LDR      r2,[r4,#0xc]          ;321  ; ms_Y
00051e  1c52              ADDS     r2,r2,#1              ;321
000520  60e2              STR      r2,[r4,#0xc]          ;321  ; ms_Y
000522  f8da2004          LDR      r2,[r10,#4]           ;322  ; mc_Y
000526  6925              LDR      r5,[r4,#0x10]         ;322  ; ms_Y
000528  e9d23200          LDRD     r3,r2,[r2,#0]         ;322
00052c  e9d56500          LDRD     r6,r5,[r5,#0]         ;322
000530  1b9b              SUBS     r3,r3,r6              ;322
000532  41aa              SBCS     r2,r2,r5              ;322
000534  d206              BCS      |L32.1348|
000536  f8da2004          LDR      r2,[r10,#4]           ;322  ; mc_Y
00053a  6925              LDR      r5,[r4,#0x10]         ;322  ; ms_Y
00053c  e9d23200          LDRD     r3,r2,[r2,#0]         ;322
000540  e9c53200          STRD     r3,r2,[r5,#0]         ;322
                  |L32.1348|
000544  6923              LDR      r3,[r4,#0x10]         ;323  ; ms_Y
000546  e9d32300          LDRD     r2,r3,[r3,#0]         ;323
00054a  f7fffffe          BL       __aeabi_uldivmod
00054e  61a0              STR      r0,[r4,#0x18]         ;323  ; ms_Y
000550  61e1              STR      r1,[r4,#0x1c]         ;323  ; ms_Y
000552  6a20              LDR      r0,[r4,#0x20]         ;324  ; ms_Y
000554  6a61              LDR      r1,[r4,#0x24]         ;324  ; ms_Y
000556  1c40              ADDS     r0,r0,#1              ;324
000558  69a3              LDR      r3,[r4,#0x18]         ;324  ; ms_Y
00055a  f1410100          ADC      r1,r1,#0              ;324
00055e  69e2              LDR      r2,[r4,#0x1c]         ;324  ; ms_Y
000560  1ac0              SUBS     r0,r0,r3              ;324
000562  4191              SBCS     r1,r1,r2              ;324
000564  d288              BCS      |L32.1144|
                  |L32.1382|
000566  69a3              LDR      r3,[r4,#0x18]         ;335  ; ms_Y
000568  69e1              LDR      r1,[r4,#0x1c]         ;335  ; ms_Y
00056a  6a20              LDR      r0,[r4,#0x20]         ;335  ; ms_Y
00056c  6a62              LDR      r2,[r4,#0x24]         ;335  ; ms_Y
00056e  1a18              SUBS     r0,r3,r0              ;335
000570  e784              B        |L32.1148|
                  |L32.1394|
000572  686b              LDR      r3,[r5,#4]            ;327  ; mc_Y
000574  f8d4c010          LDR      r12,[r4,#0x10]        ;327  ; ms_Y
000578  e9d36300          LDRD     r6,r3,[r3,#0]         ;327
00057c  e9dc7c00          LDRD     r7,r12,[r12,#0]       ;327
000580  1bf6              SUBS     r6,r6,r7              ;327
000582  eb73030c          SBCS     r3,r3,r12             ;327
000586  f4bfae63          BCS      |L32.592|
00058a  696b              LDR      r3,[r5,#0x14]         ;329  ; mc_Y
00058c  46aa              MOV      r10,r5                ;329
00058e  69a7              LDR      r7,[r4,#0x18]         ;329  ; ms_Y
000590  881b              LDRH     r3,[r3,#0]            ;329
000592  0fde              LSRS     r6,r3,#31             ;329
000594  f8d4c01c          LDR      r12,[r4,#0x1c]        ;329  ; ms_Y
000598  fba35807          UMULL    r5,r8,r3,r7           ;329
00059c  fb068607          MLA      r6,r6,r7,r8           ;329
0005a0  fb03630c          MLA      r3,r3,r12,r6          ;329
0005a4  6924              LDR      r4,[r4,#0x10]         ;329  ; ms_Y
0005a6  e9d46400          LDRD     r6,r4,[r4,#0]         ;329
0005aa  1bad              SUBS     r5,r5,r6              ;329
0005ac  41a3              SBCS     r3,r3,r4              ;329
0005ae  d218              BCS      |L32.1506|
0005b0  f8d94010          LDR      r4,[r9,#0x10]         ;330  ; ms_Y
0005b4  f8da5014          LDR      r5,[r10,#0x14]        ;330  ; mc_Y
0005b8  f8d97018          LDR      r7,[r9,#0x18]         ;330  ; ms_Y
0005bc  882d              LDRH     r5,[r5,#0]            ;330
0005be  0fee              LSRS     r6,r5,#31             ;330
0005c0  f8d9301c          LDR      r3,[r9,#0x1c]         ;330  ; ms_Y
0005c4  fba5c807          UMULL    r12,r8,r5,r7          ;330
0005c8  fb068607          MLA      r6,r6,r7,r8           ;330
0005cc  fb056503          MLA      r5,r5,r3,r6           ;330
0005d0  e9d46300          LDRD     r6,r3,[r4,#0]         ;330
0005d4  ebb6060c          SUBS     r6,r6,r12             ;330
0005d8  eb630305          SBC      r3,r3,r5              ;330
0005dc  e9c46300          STRD     r6,r3,[r4,#0]         ;330
0005e0  e004              B        |L32.1516|
                  |L32.1506|
0005e2  f8d95010          LDR      r5,[r9,#0x10]         ;331  ; ms_Y
0005e6  2300              MOVS     r3,#0                 ;330
0005e8  e9c53300          STRD     r3,r3,[r5,#0]         ;331
                  |L32.1516|
0005ec  f8d9300c          LDR      r3,[r9,#0xc]          ;332  ; ms_Y
0005f0  464c              MOV      r4,r9                 ;332
0005f2  2b01              CMP      r3,#1                 ;332
0005f4  db01              BLT      |L32.1530|
0005f6  68e2              LDR      r2,[r4,#0xc]          ;332  ; ms_Y
0005f8  1e52              SUBS     r2,r2,#1              ;332
                  |L32.1530|
0005fa  60e2              STR      r2,[r4,#0xc]          ;332  ; ms_Y
0005fc  6922              LDR      r2,[r4,#0x10]         ;333  ; ms_Y
0005fe  f8da5004          LDR      r5,[r10,#4]           ;333  ; mc_Y
000602  e9d26300          LDRD     r6,r3,[r2,#0]         ;333
000606  4652              MOV      r2,r10                ;333
000608  e9d57500          LDRD     r7,r5,[r5,#0]         ;333
00060c  1bf6              SUBS     r6,r6,r7              ;333
00060e  41ab              SBCS     r3,r3,r5              ;333
000610  f4bfaf21          BCS      |L32.1110|
000614  6853              LDR      r3,[r2,#4]            ;333  ; mc_Y
000616  e9d32300          LDRD     r2,r3,[r3,#0]         ;333
00061a  6925              LDR      r5,[r4,#0x10]         ;333  ; ms_Y
00061c  e9c52300          STRD     r2,r3,[r5,#0]         ;333
000620  e719              B        |L32.1110|
;;;352    
                          ENDP

000622  0000              DCW      0x0000
                  |L32.1572|
                          DCD      0x40024000

;*** Start embedded assembler ***

#line 1 "Main\\Motor_Y.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___9_Motor_Y_c_ClrSY____REV16|
#line 447 "C:\\Keil_v5\\ARM\\PACK\\ARM\\CMSIS\\5.0.1\\CMSIS\\Include\\cmsis_armcc.h"
|__asm___9_Motor_Y_c_ClrSY____REV16| PROC
#line 448

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___9_Motor_Y_c_ClrSY____REVSH|
#line 462
|__asm___9_Motor_Y_c_ClrSY____REVSH| PROC
#line 463

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___9_Motor_Y_c_ClrSY____RRX|
#line 649
|__asm___9_Motor_Y_c_ClrSY____RRX| PROC
#line 650

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
