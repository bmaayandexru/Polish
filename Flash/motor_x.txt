; generated by Component: ARM Compiler 5.06 update 1 (build 61) Tool: ArmCC [4d35ad]
; commandline ArmCC [--list --debug -c --asm --interleave -o.\flash\motor_x.o --asm_dir=.\Flash\ --list_dir=.\Flash\ --depend=.\flash\motor_x.d --cpu=Cortex-M3 --apcs=interwork -O3 --diag_suppress=9931 -I.\UCNC -I.\Drivers\include -I.\Drivers -ID:\Projects\Frezer\Frezer.keil\01020124\RTE -IC:\Keil_v5\ARM\PACK\ARM\CMSIS\5.0.1\CMSIS\Include -IC:\Keil_v5\ARM\PACK\Keil\LPC1700_DFP\2.3.0\Device\Include -D__UVISION_VERSION=517 -D_RTE_ -DLPC175x_6x --omf_browse=.\flash\motor_x.crf Main\Motor_X.c]
                          THUMB

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  MotorX_Handler PROC
;;;353    
;;;354    void	MotorX_Handler(void){
000000  e92d41f0          PUSH     {r4-r8,lr}
;;;355    	CHECKLPOFF(ms_X.LPOFF);
000004  4c2c              LDR      r4,|L1.184|
000006  6aa0              LDR      r0,[r4,#0x28]  ; ms_X
000008  6ae1              LDR      r1,[r4,#0x2c]  ; ms_X
00000a  1e40              SUBS     r0,r0,#1
00000c  f1710000          SBCS     r0,r1,#0
000010  d203              BCS      |L1.26|
000012  2101              MOVS     r1,#1                 ;354
000014  2000              MOVS     r0,#0                 ;354
000016  62a1              STR      r1,[r4,#0x28]  ; ms_X
000018  62e0              STR      r0,[r4,#0x2c]  ; ms_X
                  |L1.26|
;;;356    	if (ms_X.Level == 0) {
00001a  7820              LDRB     r0,[r4,#0]  ; ms_X
;;;357    		if ((fmvc.Enable == 0)&&(ClrF==0))  { 
;;;358    			// защита от нулевого направления
;;;359    			if (*(ms_X.Dir) == 0) {
;;;360    				Msg("XD0\r\n");
;;;361    				if (QGetPin(MOTOR_X_DIR)) *(ms_X.Dir) = 1;
;;;362    				else *(ms_X.Dir)=-1;
;;;363    			}
;;;364    			// если будем менять логику
;;;365    			ClrSX = 0;
;;;366    			// конец пассивного импульса или начало движение
;;;367    			if (*mc_X.PositOn && (!(*ms_X.Posit))) {
;;;368    				PositX();
;;;369    			} else
;;;370    			if (*(mc_X.MovePos)) 
;;;371    				MovePosX();
;;;372    			else {
;;;373    				MoveBtnX();
;;;374    			}
;;;375    			if (ms_X.Level) {
;;;376    				ClrSX = 1; 
;;;377    				// вариант с прямой логикой
;;;378    				//QSetPin(MOTOR_X_STEP);	
;;;379    				//TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
;;;380    				// *** вариант с обратной логикой
;;;381    				Q1ClrPin(MOTOR_X_STEP);	
;;;382    				TCS_SetInterval(tcs_MotorX,ms_X.LPOFF);		
00001c  4e26              LDR      r6,|L1.184|
00001e  2700              MOVS     r7,#0                 ;356
000020  3e48              SUBS     r6,r6,#0x48
000022  b130              CBZ      r0,|L1.50|
;;;383    			} else {
;;;384    				Q1ClrPin(MOTOR_X_STEP);	
;;;385    				TCS_SetInterval(tcs_MotorX,ms_X.LPOFF);		
;;;386    			}	
;;;387    		} else {
;;;388    				// мониторинг
;;;389    				if (ClrSX) {
;;;390    					// вариант с обратной логикой
;;;391    					Q1ClrPin(MOTOR_X_STEP);
;;;392    					ClrSX = 0;
;;;393    				}
;;;394    				TCS_SetInterval(tcs_MotorX,2500000);		
;;;395    		}	
;;;396    	} else {
;;;397    		// конец активного исмпульса
;;;398    		//OFF_PULSE;
;;;399    		//Msg("XOFF");
;;;400    		ms_X.Level = 0;
000024  7027              STRB     r7,[r4,#0]
;;;401    		// вариант с прямой логикой
;;;402    		//QClrPin(MOTOR_X_STEP);				
;;;403    		//TCS_SetInterval(tcs_MotorX,ms_X.LPOFF);		
;;;404    		// *** вариант с обратной логикой
;;;405    		Q1SetPin(MOTOR_X_STEP);				
000026  2000              MOVS     r0,#0
000028  f7fffffe          BL       Q1SetPin
;;;406    		TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
00002c  6a20              LDR      r0,[r4,#0x20]  ; ms_X
00002e  6a61              LDR      r1,[r4,#0x24]  ; ms_X
000030  e03e              B        |L1.176|
                  |L1.50|
000032  4822              LDR      r0,|L1.188|
000034  4922              LDR      r1,|L1.192|
000036  4d23              LDR      r5,|L1.196|
000038  7e00              LDRB     r0,[r0,#0x18]         ;357  ; fmvc
00003a  7809              LDRB     r1,[r1,#0]            ;357  ; ClrF
00003c  4308              ORRS     r0,r0,r1              ;357
00003e  d007              BEQ      |L1.80|
000040  7828              LDRB     r0,[r5,#0]            ;389  ; ClrSX
000042  b118              CBZ      r0,|L1.76|
000044  2000              MOVS     r0,#0                 ;391
000046  f7fffffe          BL       Q1ClrPin
00004a  702f              STRB     r7,[r5,#0]            ;392
                  |L1.76|
00004c  481e              LDR      r0,|L1.200|
00004e  e02f              B        |L1.176|
                  |L1.80|
000050  6860              LDR      r0,[r4,#4]            ;359  ; ms_X
000052  f04f0801          MOV      r8,#1                 ;361
000056  7800              LDRB     r0,[r0,#0]            ;359
000058  b968              CBNZ     r0,|L1.118|
00005a  a01c              ADR      r0,|L1.204|
00005c  f7fffffe          BL       Msg
000060  2001              MOVS     r0,#1                 ;361
000062  f7fffffe          BL       QGetPin
000066  b118              CBZ      r0,|L1.112|
000068  6861              LDR      r1,[r4,#4]            ;361  ; ms_X
00006a  f8818000          STRB     r8,[r1,#0]            ;361
00006e  e002              B        |L1.118|
                  |L1.112|
000070  6861              LDR      r1,[r4,#4]            ;362  ; ms_X
000072  20ff              MOVS     r0,#0xff              ;362
000074  7008              STRB     r0,[r1,#0]            ;362
                  |L1.118|
000076  4810              LDR      r0,|L1.184|
000078  702f              STRB     r7,[r5,#0]            ;365
00007a  382c              SUBS     r0,r0,#0x2c           ;367
00007c  6a41              LDR      r1,[r0,#0x24]         ;367  ; mc_X
00007e  7809              LDRB     r1,[r1,#0]            ;367
000080  b111              CBZ      r1,|L1.136|
000082  6b21              LDR      r1,[r4,#0x30]         ;367  ; ms_X
000084  7809              LDRB     r1,[r1,#0]            ;367
000086  b129              CBZ      r1,|L1.148|
                  |L1.136|
000088  6a00              LDR      r0,[r0,#0x20]         ;370  ; mc_X
00008a  7800              LDRB     r0,[r0,#0]            ;370
00008c  b128              CBZ      r0,|L1.154|
00008e  f7fffffe          BL       MovePosX
000092  e004              B        |L1.158|
                  |L1.148|
000094  f7fffffe          BL       PositX
000098  e001              B        |L1.158|
                  |L1.154|
00009a  f7fffffe          BL       MoveBtnX
                  |L1.158|
00009e  7820              LDRB     r0,[r4,#0]            ;375  ; ms_X
0000a0  b108              CBZ      r0,|L1.166|
0000a2  f8858000          STRB     r8,[r5,#0]            ;376
                  |L1.166|
0000a6  2000              MOVS     r0,#0                 ;384
0000a8  f7fffffe          BL       Q1ClrPin
0000ac  6aa0              LDR      r0,[r4,#0x28]         ;385  ; ms_X
0000ae  6ae1              LDR      r1,[r4,#0x2c]         ;385  ; ms_X
                  |L1.176|
0000b0  6070              STR      r0,[r6,#4]  ; tcs_MotorX
;;;407    	}
;;;408    }
0000b2  e8bd81f0          POP      {r4-r8,pc}
;;;409    
                          ENDP

0000b6  0000              DCW      0x0000
                  |L1.184|
                          DCD      ||.bss||+0x48
                  |L1.188|
                          DCD      fmvc
                  |L1.192|
                          DCD      ClrF
                  |L1.196|
                          DCD      ||.data||
                  |L1.200|
                          DCD      0x002625a0
                  |L1.204|
0000cc  5844300d          DCB      "XD0\r\n",0
0000d0  0a00    
0000d2  00                DCB      0
0000d3  00                DCB      0

                          AREA ||.bss||, DATA, NOINIT, ALIGN=3

                  tcs_MotorX
                          %        28
                  mc_X
                          %        44
                  ms_X
                          %        56

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=2

000000  53746167          DCB      "StagePosX 1 Sensor Found\r\n",0
000004  65506f73
000008  58203120
00000c  53656e73
000010  6f722046
000014  6f756e64
000018  0d0a00  
00001b  00                DCB      0
00001c  53746167          DCB      "StagePosX 2 Break And Move Back\r\n",0
000020  65506f73
000024  58203220
000028  42726561
00002c  6b20416e
000030  64204d6f
000034  76652042
000038  61636b0d
00003c  0a00    
00003e  00                DCB      0
00003f  00                DCB      0
000040  436f7272          DCB      "CorrStop G0\r\n",0
000044  53746f70
000048  2047300d
00004c  0a00    
00004e  00                DCB      0
00004f  00                DCB      0
000050  53746167          DCB      "StagePosX Complete %d\r\n",0
000054  65506f73
000058  5820436f
00005c  6d706c65
000060  74652025
000064  640d0a00

                          AREA ||.data||, DATA, ALIGN=0

                  ClrSX
000000  00                DCB      0x00

                          AREA ||i.PositX||, COMGROUP=PositX, CODE, READONLY, ALIGN=2

                  PositX PROC
;;;27     
;;;28     __inline void PositX(void){
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;29     	if (!((*ms_Z.Posit == 1)&&(*mc_Z.PositOn == 0))) return;
000004  4f85              LDR      r7,|L18.540|
000006  6b38              LDR      r0,[r7,#0x30]  ; ms_Z
000008  7800              LDRB     r0,[r0,#0]
00000a  2801              CMP      r0,#1
00000c  d176              BNE      |L18.252|
00000e  4884              LDR      r0,|L18.544|
000010  6a40              LDR      r0,[r0,#0x24]  ; mc_Z
000012  7800              LDRB     r0,[r0,#0]
000014  2800              CMP      r0,#0
000016  d171              BNE      |L18.252|
;;;30     	// позиционирование по радиусу
;;;31     	switch (*ms_X.StagePos) {
000018  4d82              LDR      r5,|L18.548|
00001a  6b68              LDR      r0,[r5,#0x34]  ; ms_X
;;;32     		case 0: // движение к датчику
;;;33     			QSetPin(MOTOR_X_DIR);
;;;34     			if (QGetPin(SENS_MOTOR_X)) {
;;;35     				*ms_X.StagePos = 1;
;;;36     				Msg("StagePosX 1 Sensor Found\r\n");
;;;37     			} else {
;;;38     				*(mc_X.FrReq)=*(mc_X.FrMax);
;;;39     				// движение с разгоном
;;;40     //				if (*(ms_X.FrCur) < (*(mc_X.FrReq)/2)) {
;;;41     				if (*(ms_X.FrCur) < (*(mc_X.FrReq))) {
;;;42     					// разгон до FrReq / 2
;;;43     					*(ms_X.FrCur) += *(mc_X.Accel) * (ms_X.Tcur);
;;;44     //					if (*(ms_X.FrCur) > (*(mc_X.FrReq)/2)) *(ms_X.FrCur) = *(mc_X.FrReq)/2;
;;;45     					if (*(ms_X.FrCur) > (*(mc_X.FrReq))) *(ms_X.FrCur) = *(mc_X.FrReq);
;;;46     					ms_X.Tcur = Kb / (*(ms_X.FrCur));
00001c  f8dfa208          LDR      r10,|L18.552|
000020  f8dfb208          LDR      r11,|L18.556|
000024  7800              LDRB     r0,[r0,#0]            ;31
000026  f04f0900          MOV      r9,#0                 ;31
00002a  f1a5062c          SUB      r6,r5,#0x2c           ;38
00002e  2401              MOVS     r4,#1                 ;29
000030  b148              CBZ      r0,|L18.70|
000032  2801              CMP      r0,#1                 ;31
000034  d064              BEQ      |L18.256|
000036  2802              CMP      r0,#2                 ;31
000038  d160              BNE      |L18.252|
;;;47     					ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;48     				} 
;;;49     				// ON_PULSE
;;;50     				ms_X.Level = 1;								
;;;51     //				QSetPin(MOTOR_X_STEP);						
;;;52     //				TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
;;;53     			}
;;;54     		break;
;;;55     		case 1: // торможение и смена направления
;;;56     			if (*(ms_X.FrCur) <= *(mc_X.FrMin)) {
;;;57     				// смена направления
;;;58     				QClrPin(MOTOR_X_DIR);
;;;59     				*ms_X.StagePos = 2;
;;;60     				Msg("StagePosX 2 Break And Move Back\r\n");
;;;61     			} else {
;;;62     				// торможение
;;;63     				if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAXP * (ms_X.Tcur))
;;;64     					*(ms_X.FrCur) -= *(mc_X.Accel) * mulAXP * (ms_X.Tcur);
;;;65     				else *(ms_X.FrCur) = 0; 
;;;66     				if (*(ms_X.FrCur) < *(mc_X.FrMin)) *(ms_X.FrCur) = *(mc_X.FrMin);
;;;67     				ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;68     				ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;69     				// ON_PULSE
;;;70     				ms_X.Level = 1;								
;;;71     //				QSetPin(MOTOR_X_STEP);						
;;;72     //				TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
;;;73     			}
;;;74     		break;
;;;75     		case 2:
;;;76     			if (!QGetPin(SENS_MOTOR_X)) {
00003a  201e              MOVS     r0,#0x1e
00003c  f7fffffe          BL       QGetPin
000040  2800              CMP      r0,#0
000042  d07c              BEQ      |L18.318|
000044  e059              B        |L18.250|
                  |L18.70|
000046  2001              MOVS     r0,#1                 ;33
000048  f7fffffe          BL       QSetPin
00004c  201e              MOVS     r0,#0x1e              ;34
00004e  f7fffffe          BL       QGetPin
000052  b118              CBZ      r0,|L18.92|
000054  6b68              LDR      r0,[r5,#0x34]         ;35  ; ms_X
000056  7004              STRB     r4,[r0,#0]            ;35
000058  4875              LDR      r0,|L18.560|
00005a  e061              B        |L18.288|
                  |L18.92|
00005c  68b1              LDR      r1,[r6,#8]            ;38  ; mc_X
00005e  e9d10100          LDRD     r0,r1,[r1,#0]         ;38
000062  6872              LDR      r2,[r6,#4]            ;38  ; mc_X
000064  e9c20100          STRD     r0,r1,[r2,#0]         ;38
000068  6928              LDR      r0,[r5,#0x10]         ;41  ; ms_X
00006a  6872              LDR      r2,[r6,#4]            ;41  ; mc_X
00006c  e9d01000          LDRD     r1,r0,[r0,#0]         ;41
000070  e9d23200          LDRD     r3,r2,[r2,#0]         ;41
000074  1ac9              SUBS     r1,r1,r3              ;41
000076  4190              SBCS     r0,r0,r2              ;41
000078  d23f              BCS      |L18.250|
00007a  6928              LDR      r0,[r5,#0x10]         ;43  ; ms_X
00007c  6971              LDR      r1,[r6,#0x14]         ;43  ; mc_X
00007e  69ab              LDR      r3,[r5,#0x18]         ;43  ; ms_X
000080  8809              LDRH     r1,[r1,#0]            ;43
000082  69ef              LDR      r7,[r5,#0x1c]         ;43  ; ms_X
000084  fba1c803          UMULL    r12,r8,r1,r3          ;43
000088  fb098203          MLA      r2,r9,r3,r8           ;43
00008c  fb012107          MLA      r1,r1,r7,r2           ;43
000090  e9d02300          LDRD     r2,r3,[r0,#0]         ;43
000094  eb1c0202          ADDS     r2,r12,r2             ;43
000098  4159              ADCS     r1,r1,r3              ;43
00009a  e9c02100          STRD     r2,r1,[r0,#0]         ;43
00009e  6870              LDR      r0,[r6,#4]            ;45  ; mc_X
0000a0  6929              LDR      r1,[r5,#0x10]         ;45  ; ms_X
0000a2  e9d03000          LDRD     r3,r0,[r0,#0]         ;45
0000a6  e9d12100          LDRD     r2,r1,[r1,#0]         ;45
0000aa  1a9a              SUBS     r2,r3,r2              ;45
0000ac  4188              SBCS     r0,r0,r1              ;45
0000ae  d205              BCS      |L18.188|
0000b0  6870              LDR      r0,[r6,#4]            ;45  ; mc_X
0000b2  692a              LDR      r2,[r5,#0x10]         ;45  ; ms_X
0000b4  e9d01000          LDRD     r1,r0,[r0,#0]         ;45
0000b8  e9c21000          STRD     r1,r0,[r2,#0]         ;45
                  |L18.188|
0000bc  6928              LDR      r0,[r5,#0x10]         ;46  ; ms_X
0000be  4659              MOV      r1,r11                ;46
0000c0  e9d02300          LDRD     r2,r3,[r0,#0]         ;46
0000c4  4650              MOV      r0,r10                ;46
0000c6  f7fffffe          BL       __aeabi_uldivmod
0000ca  61a8              STR      r0,[r5,#0x18]         ;46  ; ms_X
0000cc  61e9              STR      r1,[r5,#0x1c]         ;46  ; ms_X
0000ce  6a28              LDR      r0,[r5,#0x20]         ;47  ; ms_X
0000d0  6a69              LDR      r1,[r5,#0x24]         ;47  ; ms_X
0000d2  1c42              ADDS     r2,r0,#1              ;47
0000d4  f1410000          ADC      r0,r1,#0              ;47
0000d8  69a9              LDR      r1,[r5,#0x18]         ;47  ; ms_X
0000da  69eb              LDR      r3,[r5,#0x1c]         ;47  ; ms_X
0000dc  1a51              SUBS     r1,r2,r1              ;47
0000de  e071              B        |L18.452|
                  |L18.224|
0000e0  69aa              LDR      r2,[r5,#0x18]         ;47  ; ms_X
0000e2  69e9              LDR      r1,[r5,#0x1c]         ;47  ; ms_X
0000e4  6a28              LDR      r0,[r5,#0x20]         ;47  ; ms_X
0000e6  6a6b              LDR      r3,[r5,#0x24]         ;47  ; ms_X
0000e8  1a10              SUBS     r0,r2,r0              ;47
0000ea  eb610103          SBC      r1,r1,r3              ;47
0000ee  e002              B        |L18.246|
0000f0  e004              B        |L18.252|
                  |L18.242|
0000f2  2001              MOVS     r0,#1                 ;47
0000f4  2100              MOVS     r1,#0                 ;47
                  |L18.246|
0000f6  62a8              STR      r0,[r5,#0x28]         ;68  ; ms_X
0000f8  62e9              STR      r1,[r5,#0x2c]         ;68  ; ms_X
                  |L18.250|
0000fa  702c              STRB     r4,[r5,#0]            ;50
                  |L18.252|
;;;77     				*ms_X.StagePos = 3;
;;;78     				*(ms_X.Pos) = X_MAX_POS;
;;;79     				BR_ms_X_Pos = *(ms_X.Pos);
;;;80     				*ms_X.Posit = 1;
;;;81     				*mc_X.PositOn = 0;
;;;82     				if ((*ms_Y.Posit)&&(*ms_Z.Posit)) {
;;;83     					Msg("CorrStop G0\r\n");
;;;84     					*pCorrStop = 1;
;;;85     					BR_pCorrStop = *pCorrStop;
;;;86     				}
;;;87     				Msg("StagePosX Complete %d\r\n", *pCorrStop);
;;;88     			} else {
;;;89     				// выход из датчика на малой скорости
;;;90     				// ON_PULSE
;;;91     				ms_X.Level = 1;								
;;;92     //				QSetPin(MOTOR_X_STEP);						
;;;93     //				TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
;;;94     			}
;;;95     		break;
;;;96     	}
;;;97     }
0000fc  e8bd9ff0          POP      {r4-r12,pc}
                  |L18.256|
000100  6830              LDR      r0,[r6,#0]            ;56  ; mc_X
000102  692b              LDR      r3,[r5,#0x10]         ;56  ; ms_X
000104  e9d02000          LDRD     r2,r0,[r0,#0]         ;56
000108  e9d31300          LDRD     r1,r3,[r3,#0]         ;56
00010c  1a51              SUBS     r1,r2,r1              ;56
00010e  4198              SBCS     r0,r0,r3              ;56
000110  d30a              BCC      |L18.296|
000112  2001              MOVS     r0,#1                 ;58
000114  f7fffffe          BL       QClrPin
000118  6b69              LDR      r1,[r5,#0x34]         ;59  ; ms_X
00011a  2002              MOVS     r0,#2                 ;59
00011c  7008              STRB     r0,[r1,#0]            ;59
00011e  4845              LDR      r0,|L18.564|
                  |L18.288|
000120  e8bd5ff0          POP      {r4-r12,lr}           ;60
000124  f7ffbffe          B.W      Msg
                  |L18.296|
000128  6970              LDR      r0,[r6,#0x14]         ;63  ; mc_X
00012a  69aa              LDR      r2,[r5,#0x18]         ;63  ; ms_X
00012c  8800              LDRH     r0,[r0,#0]            ;63
00012e  0040              LSLS     r0,r0,#1              ;63
000130  17c1              ASRS     r1,r0,#31             ;63
000132  69eb              LDR      r3,[r5,#0x1c]         ;63  ; ms_X
000134  fba07c02          UMULL    r7,r12,r0,r2          ;63
000138  fb01c102          MLA      r1,r1,r2,r12          ;63
00013c  e000              B        |L18.320|
                  |L18.318|
00013e  e044              B        |L18.458|
                  |L18.320|
000140  fb001003          MLA      r0,r0,r3,r1           ;63
000144  692a              LDR      r2,[r5,#0x10]         ;63  ; ms_X
000146  e9d21200          LDRD     r1,r2,[r2,#0]         ;63
00014a  1a79              SUBS     r1,r7,r1              ;63
00014c  4190              SBCS     r0,r0,r2              ;63
00014e  d215              BCS      |L18.380|
000150  6928              LDR      r0,[r5,#0x10]         ;64  ; ms_X
000152  6971              LDR      r1,[r6,#0x14]         ;64  ; mc_X
000154  69ab              LDR      r3,[r5,#0x18]         ;64  ; ms_X
000156  8809              LDRH     r1,[r1,#0]            ;64
000158  0049              LSLS     r1,r1,#1              ;64
00015a  17ca              ASRS     r2,r1,#31             ;64
00015c  f8d5c01c          LDR      r12,[r5,#0x1c]        ;64  ; ms_X
000160  fba17803          UMULL    r7,r8,r1,r3           ;64
000164  fb028203          MLA      r2,r2,r3,r8           ;64
000168  fb01220c          MLA      r2,r1,r12,r2          ;64
00016c  e9d03100          LDRD     r3,r1,[r0,#0]         ;64
000170  1bdb              SUBS     r3,r3,r7              ;64
000172  eb610102          SBC      r1,r1,r2              ;64
000176  e9c03100          STRD     r3,r1,[r0,#0]         ;64
00017a  e003              B        |L18.388|
                  |L18.380|
00017c  692a              LDR      r2,[r5,#0x10]         ;65  ; ms_X
00017e  2000              MOVS     r0,#0                 ;64
000180  e9c20000          STRD     r0,r0,[r2,#0]         ;65
                  |L18.388|
000184  6928              LDR      r0,[r5,#0x10]         ;66  ; ms_X
000186  6833              LDR      r3,[r6,#0]            ;66  ; mc_X
000188  e9d01000          LDRD     r1,r0,[r0,#0]         ;66
00018c  e9d32300          LDRD     r2,r3,[r3,#0]         ;66
000190  1a89              SUBS     r1,r1,r2              ;66
000192  4198              SBCS     r0,r0,r3              ;66
000194  d205              BCS      |L18.418|
000196  6830              LDR      r0,[r6,#0]            ;66  ; mc_X
000198  692a              LDR      r2,[r5,#0x10]         ;66  ; ms_X
00019a  e9d01000          LDRD     r1,r0,[r0,#0]         ;66
00019e  e9c21000          STRD     r1,r0,[r2,#0]         ;66
                  |L18.418|
0001a2  6928              LDR      r0,[r5,#0x10]         ;67  ; ms_X
0001a4  4659              MOV      r1,r11                ;67
0001a6  e9d02300          LDRD     r2,r3,[r0,#0]         ;67
0001aa  4650              MOV      r0,r10                ;67
0001ac  f7fffffe          BL       __aeabi_uldivmod
0001b0  61a8              STR      r0,[r5,#0x18]         ;67  ; ms_X
0001b2  61e9              STR      r1,[r5,#0x1c]         ;67  ; ms_X
0001b4  6a29              LDR      r1,[r5,#0x20]         ;68  ; ms_X
0001b6  6a68              LDR      r0,[r5,#0x24]         ;68  ; ms_X
0001b8  1c49              ADDS     r1,r1,#1              ;68
0001ba  69aa              LDR      r2,[r5,#0x18]         ;68  ; ms_X
0001bc  f1400000          ADC      r0,r0,#0              ;68
0001c0  69eb              LDR      r3,[r5,#0x1c]         ;68  ; ms_X
0001c2  1a89              SUBS     r1,r1,r2              ;68
                  |L18.452|
0001c4  4198              SBCS     r0,r0,r3              ;68
0001c6  d294              BCS      |L18.242|
0001c8  e78a              B        |L18.224|
                  |L18.458|
0001ca  6b69              LDR      r1,[r5,#0x34]         ;77  ; ms_X
0001cc  2003              MOVS     r0,#3                 ;77
0001ce  7008              STRB     r0,[r1,#0]            ;77
0001d0  4819              LDR      r0,|L18.568|
0001d2  68a9              LDR      r1,[r5,#8]            ;78  ; ms_X
0001d4  6800              LDR      r0,[r0,#0]            ;78  ; vX_MAX_POS
0001d6  6008              STR      r0,[r1,#0]            ;79
0001d8  68a8              LDR      r0,[r5,#8]            ;79  ; ms_X
0001da  f8df8060          LDR      r8,|L18.572|
0001de  6800              LDR      r0,[r0,#0]            ;79
0001e0  f8c80044          STR      r0,[r8,#0x44]         ;79
0001e4  6b28              LDR      r0,[r5,#0x30]         ;80  ; ms_X
0001e6  7004              STRB     r4,[r0,#0]            ;80
0001e8  6a71              LDR      r1,[r6,#0x24]         ;81  ; mc_X
0001ea  4815              LDR      r0,|L18.576|
0001ec  f8819000          STRB     r9,[r1,#0]            ;81
0001f0  6b00              LDR      r0,[r0,#0x30]         ;82  ; ms_Y
0001f2  4d14              LDR      r5,|L18.580|
0001f4  7800              LDRB     r0,[r0,#0]            ;82
0001f6  b148              CBZ      r0,|L18.524|
0001f8  6b38              LDR      r0,[r7,#0x30]         ;82  ; ms_Z
0001fa  7800              LDRB     r0,[r0,#0]            ;82
0001fc  b130              CBZ      r0,|L18.524|
0001fe  4812              LDR      r0,|L18.584|
000200  f7fffffe          BL       Msg
000204  6828              LDR      r0,[r5,#0]            ;84  ; pCorrStop
000206  7004              STRB     r4,[r0,#0]            ;84
000208  f8884070          STRB     r4,[r8,#0x70]         ;85
                  |L18.524|
00020c  6828              LDR      r0,[r5,#0]            ;87  ; pCorrStop
00020e  7801              LDRB     r1,[r0,#0]            ;87
000210  e8bd5ff0          POP      {r4-r12,lr}           ;87
000214  480d              LDR      r0,|L18.588|
000216  f7ffbffe          B.W      Msg
;;;98     
                          ENDP

00021a  0000              DCW      0x0000
                  |L18.540|
                          DCD      ms_Z
                  |L18.544|
                          DCD      mc_Z
                  |L18.548|
                          DCD      ||.bss||+0x48
                  |L18.552|
                          DCD      0x26fc1000
                  |L18.556|
                          DCD      0x0002386f
                  |L18.560|
                          DCD      ||.conststring||
                  |L18.564|
                          DCD      ||.conststring||+0x1c
                  |L18.568|
                          DCD      vX_MAX_POS
                  |L18.572|
                          DCD      0x40024000
                  |L18.576|
                          DCD      ms_Y
                  |L18.580|
                          DCD      pCorrStop
                  |L18.584|
                          DCD      ||.conststring||+0x40
                  |L18.588|
                          DCD      ||.conststring||+0x50

                          AREA ||i.MovePosX||, COMGROUP=MovePosX, CODE, READONLY, ALIGN=2

                  MovePosX PROC
;;;98     
;;;99     __inline void MovePosX(void){
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;100    	if ((*(mc_X.ReqPos) == *(ms_X.Pos))) {
000004  48fe              LDR      r0,|L25.1024|
000006  68c1              LDR      r1,[r0,#0xc]  ; mc_X
000008  f100042c          ADD      r4,r0,#0x2c
00000c  680a              LDR      r2,[r1,#0]
00000e  68a1              LDR      r1,[r4,#8]  ; ms_X
;;;101    		*(mc_X.MovePos) = 0;
;;;102    		if ((*(mc_Y.MovePos) == 0) && (*(mc_Z.MovePos) == 0)) {
000010  4bfc              LDR      r3,|L25.1028|
;;;103    			*pCorrStop = 1;
000012  2501              MOVS     r5,#1
000014  680e              LDR      r6,[r1,#0]
000016  2100              MOVS     r1,#0
000018  f8df83ec          LDR      r8,|L25.1032|
00001c  f8dfb3ec          LDR      r11,|L25.1036|
000020  42b2              CMP      r2,r6                 ;100
000022  d112              BNE      |L25.74|
000024  6a00              LDR      r0,[r0,#0x20]         ;101  ; mc_X
000026  7001              STRB     r1,[r0,#0]            ;101
000028  6a18              LDR      r0,[r3,#0x20]         ;102  ; mc_Y
00002a  7800              LDRB     r0,[r0,#0]            ;102
00002c  2800              CMP      r0,#0                 ;102
00002e  d10a              BNE      |L25.70|
000030  f8db0020          LDR      r0,[r11,#0x20]        ;102  ; mc_Z
000034  7800              LDRB     r0,[r0,#0]            ;102
000036  2800              CMP      r0,#0                 ;102
000038  d105              BNE      |L25.70|
00003a  f8d80000          LDR      r0,[r8,#0]  ; pCorrStop
00003e  7005              STRB     r5,[r0,#0]
;;;104    			BR_pCorrStop = *pCorrStop;
000040  48f3              LDR      r0,|L25.1040|
000042  f8805070          STRB     r5,[r0,#0x70]
                  |L25.70|
;;;105    		}
;;;106    		return;
;;;107    	}
;;;108    	if (*(mc_X.ReqPos) < X_MIN_POS) *(mc_X.ReqPos)=X_MIN_POS;
;;;109    	if (*(mc_X.ReqPos) > X_MAX_POS) *(mc_X.ReqPos)=X_MAX_POS;
;;;110    	if (*(mc_X.MovePos) == 1) {
;;;111    		// определяем направление
;;;112    		if (((*(mc_X.ReqPos) < *(ms_X.Pos))&&(*(ms_X.Dir)==1))||
;;;113    		    ((*(mc_X.ReqPos) > *(ms_X.Pos))&&(*(ms_X.Dir)==-1)))
;;;114    		{
;;;115    			// торможение и смена направления
;;;116    			if (*(ms_X.FrCur) > *(mc_X.FrMin)) {
;;;117    				// торможение
;;;118    				if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;119    					*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;120    				else *(ms_X.FrCur) = 0; 
;;;121    				if (*(ms_X.FrCur) < *(mc_X.FrMin)) {
;;;122    					*(ms_X.FrCur) = *(mc_X.FrMin);
;;;123    					ms_X.Lacc = 0;
;;;124    				}
;;;125    				if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;126    //				if (ms_X.Lacc) ms_X.Lacc--;
;;;127    				ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;128    				ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;129    			} else {
;;;130    				//смена направления
;;;131    				if (*(ms_X.Dir)==1) *(ms_X.Dir)=-1;
;;;132    				else *(ms_X.Dir)=1;
;;;133    				if (*(ms_X.Dir)==1) QSetPin(MOTOR_X_DIR);
;;;134    				else QClrPin(MOTOR_X_DIR);
;;;135    				// задержка на смену направления для прямой логики
;;;136    //				Msg("DelayDirX\r\n");
;;;137    //				TCS_SetInterval(tcs_MotorX,*pDirDelay);
;;;138    //				return;
;;;139    			}
;;;140    		} else {
;;;141    			// определяем зону
;;;142    			if (abs(*(ms_X.Pos)-*(mc_X.ReqPos))<=(ms_X.Lacc+10)) {
;;;143    				// в зоне тормозим
;;;144    				if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;145    					*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;146    				else *(ms_X.FrCur) = 0; 
;;;147    				if (*(ms_X.FrCur) < *(mc_X.FrMin)) {
;;;148    					*(ms_X.FrCur) = *(mc_X.FrMin);
;;;149    					ms_X.Lacc = 0;
;;;150    				}
;;;151    				if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;152    				ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;153    				ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;154    			} else {
;;;155    				// вне зоны едем с разгоном
;;;156    				if (*(ms_X.FrCur) < *(mc_X.FrReq)) {
;;;157    					*(ms_X.FrCur) += *(mc_X.Accel) * (ms_X.Tcur);
;;;158    					if (*(ms_X.FrCur) > *(mc_X.FrReq)) *(ms_X.FrCur) = *(mc_X.FrReq);
;;;159    					ms_X.Lacc++;
;;;160    					ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;161    					ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;162    				}
;;;163    			}
;;;164    		}
;;;165    	} else { // MovePos == 2
;;;166    		// только торможение
;;;167    		if (*(ms_X.FrCur) > *(mc_X.FrMin)) {
;;;168    			// торможение
;;;169    			if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;170    				*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;171    			else *(ms_X.FrCur) = 0; 
;;;172    			if (*(ms_X.FrCur) < *(mc_X.FrMin)) {
;;;173    				*(ms_X.FrCur) = *(mc_X.FrMin);
;;;174    				ms_X.Lacc = 0;
;;;175    			}
;;;176    			if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;177    			ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;178    			ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;179    		} else {
;;;180    			// и при доcтижении минимальной частоты MovePos = 0
;;;181    			*(mc_X.MovePos) = 0;
;;;182    			if (!*pCorrStop) {
;;;183    				// корректная остановка сброшена
;;;184    				if ((!*(mc_Y.MovePos))&&(!*(mc_Z.MovePos))) {
;;;185    					Msg("CorrStop G0\r\n");
;;;186    					*pCorrStop = 1;
;;;187    					BR_pCorrStop = *pCorrStop;
;;;188    					// поднять Z на максимум
;;;189    					*(mc_Z.ReqPos) = Z_MAX_POS;
;;;190    					*(mc_Z.MovePos) = 1;
;;;191    					// остановить шпиндель и выключить охлаждение
;;;192    					FIStop();		QClrPin(COOLER1); QClrPin(COOLER2); 
;;;193    				}
;;;194    			}
;;;195    			return;
;;;196    		}
;;;197    	}
;;;198    	//ON_PULSE;
;;;199    	*(ms_X.Pos)+=(*(ms_X.Dir));
;;;200    	BR_ms_X_Pos = *(ms_X.Pos);
;;;201    	ms_X.Level = 1;								
;;;202    //	QSetPin(MOTOR_X_STEP);						
;;;203    //	TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
;;;204    }
000046  e8bd9ff0          POP      {r4-r12,pc}
                  |L25.74|
00004a  68c2              LDR      r2,[r0,#0xc]          ;108  ; mc_X
00004c  6816              LDR      r6,[r2,#0]            ;108
00004e  4af1              LDR      r2,|L25.1044|
000050  6812              LDR      r2,[r2,#0]            ;108  ; vX_MIN_POS
000052  4296              CMP      r6,r2                 ;108
000054  da01              BGE      |L25.90|
000056  68c6              LDR      r6,[r0,#0xc]          ;108  ; mc_X
000058  6032              STR      r2,[r6,#0]            ;108
                  |L25.90|
00005a  68c2              LDR      r2,[r0,#0xc]          ;109  ; mc_X
00005c  6816              LDR      r6,[r2,#0]            ;109
00005e  4aee              LDR      r2,|L25.1048|
000060  6812              LDR      r2,[r2,#0]            ;109  ; vX_MAX_POS
000062  4296              CMP      r6,r2                 ;109
000064  dd01              BLE      |L25.106|
000066  68c6              LDR      r6,[r0,#0xc]          ;109  ; mc_X
000068  6032              STR      r2,[r6,#0]            ;109
                  |L25.106|
00006a  6a02              LDR      r2,[r0,#0x20]         ;110  ; mc_X
00006c  f8df93ac          LDR      r9,|L25.1052|
000070  f8dfa3ac          LDR      r10,|L25.1056|
000074  7812              LDRB     r2,[r2,#0]            ;110
000076  2a01              CMP      r2,#1                 ;110
000078  d031              BEQ      |L25.222|
00007a  6802              LDR      r2,[r0,#0]            ;167  ; mc_X
00007c  6927              LDR      r7,[r4,#0x10]         ;167  ; ms_X
00007e  e9d2c200          LDRD     r12,r2,[r2,#0]        ;167
000082  e9d76700          LDRD     r6,r7,[r7,#0]         ;167
000086  ebbc0606          SUBS     r6,r12,r6             ;167
00008a  41ba              SBCS     r2,r2,r7              ;167
00008c  d26f              BCS      |L25.366|
00008e  4683              MOV      r11,r0                ;169
000090  6940              LDR      r0,[r0,#0x14]         ;169  ; mc_X
000092  69a3              LDR      r3,[r4,#0x18]         ;169  ; ms_X
000094  8800              LDRH     r0,[r0,#0]            ;169
000096  0fc2              LSRS     r2,r0,#31             ;169
000098  69e6              LDR      r6,[r4,#0x1c]         ;169  ; ms_X
00009a  fba07c03          UMULL    r7,r12,r0,r3          ;169
00009e  fb02c203          MLA      r2,r2,r3,r12          ;169
0000a2  fb002006          MLA      r0,r0,r6,r2           ;169
0000a6  6923              LDR      r3,[r4,#0x10]         ;169  ; ms_X
0000a8  e9d32300          LDRD     r2,r3,[r3,#0]         ;169
0000ac  1aba              SUBS     r2,r7,r2              ;169
0000ae  4198              SBCS     r0,r0,r3              ;169
0000b0  d27e              BCS      |L25.432|
0000b2  6920              LDR      r0,[r4,#0x10]         ;170  ; ms_X
0000b4  f8db2014          LDR      r2,[r11,#0x14]        ;170  ; mc_X
0000b8  69a3              LDR      r3,[r4,#0x18]         ;170  ; ms_X
0000ba  8812              LDRH     r2,[r2,#0]            ;170
0000bc  0fd6              LSRS     r6,r2,#31             ;170
0000be  69e7              LDR      r7,[r4,#0x1c]         ;170  ; ms_X
0000c0  fba2c803          UMULL    r12,r8,r2,r3          ;170
0000c4  fb068303          MLA      r3,r6,r3,r8           ;170
0000c8  fb023607          MLA      r6,r2,r7,r3           ;170
0000cc  e9d03200          LDRD     r3,r2,[r0,#0]         ;170
0000d0  ebb3030c          SUBS     r3,r3,r12             ;170
0000d4  eb620206          SBC      r2,r2,r6              ;170
0000d8  e9c03200          STRD     r3,r2,[r0,#0]         ;170
0000dc  e152              B        |L25.900|
                  |L25.222|
0000de  68c2              LDR      r2,[r0,#0xc]          ;112  ; mc_X
0000e0  68a3              LDR      r3,[r4,#8]            ;112  ; ms_X
0000e2  6812              LDR      r2,[r2,#0]            ;112
0000e4  681b              LDR      r3,[r3,#0]            ;112
0000e6  429a              CMP      r2,r3                 ;112
0000e8  da03              BGE      |L25.242|
0000ea  6862              LDR      r2,[r4,#4]            ;112  ; ms_X
0000ec  7812              LDRB     r2,[r2,#0]            ;112
0000ee  2a01              CMP      r2,#1                 ;112
0000f0  d03e              BEQ      |L25.368|
                  |L25.242|
0000f2  68c2              LDR      r2,[r0,#0xc]          ;113  ; mc_X
0000f4  68a3              LDR      r3,[r4,#8]            ;113  ; ms_X
0000f6  6812              LDR      r2,[r2,#0]            ;113
0000f8  681b              LDR      r3,[r3,#0]            ;113
0000fa  429a              CMP      r2,r3                 ;113
0000fc  dd04              BLE      |L25.264|
0000fe  6862              LDR      r2,[r4,#4]            ;113  ; ms_X
000100  f9922000          LDRSB    r2,[r2,#0]            ;113
000104  1c52              ADDS     r2,r2,#1              ;113
000106  d033              BEQ      |L25.368|
                  |L25.264|
000108  68a2              LDR      r2,[r4,#8]            ;142  ; ms_X
00010a  68c3              LDR      r3,[r0,#0xc]          ;142  ; mc_X
00010c  6812              LDR      r2,[r2,#0]            ;142
00010e  681b              LDR      r3,[r3,#0]            ;142
000110  1ad2              SUBS     r2,r2,r3              ;142
000112  d500              BPL      |L25.278|
000114  4252              RSBS     r2,r2,#0              ;142
                  |L25.278|
000116  68e3              LDR      r3,[r4,#0xc]          ;142  ; ms_X
000118  330a              ADDS     r3,r3,#0xa            ;142
00011a  429a              CMP      r2,r3                 ;142
00011c  dc78              BGT      |L25.528|
00011e  4683              MOV      r11,r0                ;144
000120  6940              LDR      r0,[r0,#0x14]         ;144  ; mc_X
000122  69a3              LDR      r3,[r4,#0x18]         ;144  ; ms_X
000124  8800              LDRH     r0,[r0,#0]            ;144
000126  0fc2              LSRS     r2,r0,#31             ;144
000128  69e6              LDR      r6,[r4,#0x1c]         ;144  ; ms_X
00012a  fba07c03          UMULL    r7,r12,r0,r3          ;144
00012e  fb02c203          MLA      r2,r2,r3,r12          ;144
000132  fb002006          MLA      r0,r0,r6,r2           ;144
000136  6923              LDR      r3,[r4,#0x10]         ;144  ; ms_X
000138  e9d32300          LDRD     r2,r3,[r3,#0]         ;144
00013c  1aba              SUBS     r2,r7,r2              ;144
00013e  4198              SBCS     r0,r0,r3              ;144
000140  d267              BCS      |L25.530|
000142  6920              LDR      r0,[r4,#0x10]         ;145  ; ms_X
000144  f8db2014          LDR      r2,[r11,#0x14]        ;145  ; mc_X
000148  69a3              LDR      r3,[r4,#0x18]         ;145  ; ms_X
00014a  8812              LDRH     r2,[r2,#0]            ;145
00014c  0fd6              LSRS     r6,r2,#31             ;145
00014e  69e7              LDR      r7,[r4,#0x1c]         ;145  ; ms_X
000150  fba2c803          UMULL    r12,r8,r2,r3          ;145
000154  fb068303          MLA      r3,r6,r3,r8           ;145
000158  fb023307          MLA      r3,r2,r7,r3           ;145
00015c  e9d06200          LDRD     r6,r2,[r0,#0]         ;145
000160  ebb6060c          SUBS     r6,r6,r12             ;145
000164  eb620203          SBC      r2,r2,r3              ;145
000168  e9c06200          STRD     r6,r2,[r0,#0]         ;145
00016c  e089              B        |L25.642|
                  |L25.366|
00016e  e15f              B        |L25.1072|
                  |L25.368|
000170  6802              LDR      r2,[r0,#0]            ;116  ; mc_X
000172  6927              LDR      r7,[r4,#0x10]         ;116  ; ms_X
000174  e9d23200          LDRD     r3,r2,[r2,#0]         ;116
000178  e9d76700          LDRD     r6,r7,[r7,#0]         ;116
00017c  1b9b              SUBS     r3,r3,r6              ;116
00017e  41ba              SBCS     r2,r2,r7              ;116
000180  d265              BCS      |L25.590|
000182  4683              MOV      r11,r0                ;118
000184  6940              LDR      r0,[r0,#0x14]         ;118  ; mc_X
000186  69a3              LDR      r3,[r4,#0x18]         ;118  ; ms_X
000188  8800              LDRH     r0,[r0,#0]            ;118
00018a  0fc2              LSRS     r2,r0,#31             ;118
00018c  69e6              LDR      r6,[r4,#0x1c]         ;118  ; ms_X
00018e  fba07c03          UMULL    r7,r12,r0,r3          ;118
000192  fb02c203          MLA      r2,r2,r3,r12          ;118
000196  fb002006          MLA      r0,r0,r6,r2           ;118
00019a  6923              LDR      r3,[r4,#0x10]         ;118  ; ms_X
00019c  e9d32300          LDRD     r2,r3,[r3,#0]         ;118
0001a0  1aba              SUBS     r2,r7,r2              ;118
0001a2  4198              SBCS     r0,r0,r3              ;118
0001a4  d217              BCS      |L25.470|
0001a6  6920              LDR      r0,[r4,#0x10]         ;119  ; ms_X
0001a8  f8db2014          LDR      r2,[r11,#0x14]        ;119  ; mc_X
0001ac  8812              LDRH     r2,[r2,#0]            ;119
0001ae  e000              B        |L25.434|
                  |L25.432|
0001b0  e0e4              B        |L25.892|
                  |L25.434|
0001b2  69a3              LDR      r3,[r4,#0x18]         ;119  ; ms_X
0001b4  0fd6              LSRS     r6,r2,#31             ;119
0001b6  69e7              LDR      r7,[r4,#0x1c]         ;119  ; ms_X
0001b8  fba2c803          UMULL    r12,r8,r2,r3          ;119
0001bc  fb068303          MLA      r3,r6,r3,r8           ;119
0001c0  fb023307          MLA      r3,r2,r7,r3           ;119
0001c4  e9d06200          LDRD     r6,r2,[r0,#0]         ;119
0001c8  ebb6060c          SUBS     r6,r6,r12             ;119
0001cc  eb620203          SBC      r2,r2,r3              ;119
0001d0  e9c06200          STRD     r6,r2,[r0,#0]         ;119
0001d4  e003              B        |L25.478|
                  |L25.470|
0001d6  6923              LDR      r3,[r4,#0x10]         ;120  ; ms_X
0001d8  2000              MOVS     r0,#0                 ;119
0001da  e9c30000          STRD     r0,r0,[r3,#0]         ;120
                  |L25.478|
0001de  6920              LDR      r0,[r4,#0x10]         ;121  ; ms_X
0001e0  f8db6000          LDR      r6,[r11,#0]           ;121  ; mc_X
0001e4  e9d03200          LDRD     r3,r2,[r0,#0]         ;121
0001e8  4658              MOV      r0,r11                ;121
0001ea  e9d67600          LDRD     r7,r6,[r6,#0]         ;121
0001ee  1bdb              SUBS     r3,r3,r7              ;121
0001f0  41b2              SBCS     r2,r2,r6              ;121
0001f2  d206              BCS      |L25.514|
0001f4  6802              LDR      r2,[r0,#0]            ;122  ; mc_X
0001f6  6923              LDR      r3,[r4,#0x10]         ;122  ; ms_X
0001f8  e9d20200          LDRD     r0,r2,[r2,#0]         ;122
0001fc  e9c30200          STRD     r0,r2,[r3,#0]         ;122
000200  60e1              STR      r1,[r4,#0xc]          ;123  ; ms_X
                  |L25.514|
000202  68e0              LDR      r0,[r4,#0xc]          ;125  ; ms_X
000204  2801              CMP      r0,#1                 ;125
000206  db05              BLT      |L25.532|
000208  68e0              LDR      r0,[r4,#0xc]          ;125  ; ms_X
00020a  1e40              SUBS     r0,r0,#1              ;125
00020c  60e0              STR      r0,[r4,#0xc]          ;125  ; ms_X
00020e  e002              B        |L25.534|
                  |L25.528|
000210  e06a              B        |L25.744|
                  |L25.530|
000212  e032              B        |L25.634|
                  |L25.532|
000214  60e1              STR      r1,[r4,#0xc]          ;125  ; ms_X
                  |L25.534|
000216  6920              LDR      r0,[r4,#0x10]         ;127  ; ms_X
000218  4651              MOV      r1,r10                ;127
00021a  e9d02300          LDRD     r2,r3,[r0,#0]         ;127
00021e  4648              MOV      r0,r9                 ;127
000220  f7fffffe          BL       __aeabi_uldivmod
000224  61a0              STR      r0,[r4,#0x18]         ;127  ; ms_X
000226  61e1              STR      r1,[r4,#0x1c]         ;127  ; ms_X
000228  6a20              LDR      r0,[r4,#0x20]         ;128  ; ms_X
00022a  6a61              LDR      r1,[r4,#0x24]         ;128  ; ms_X
00022c  1c40              ADDS     r0,r0,#1              ;128
00022e  69a2              LDR      r2,[r4,#0x18]         ;128  ; ms_X
000230  f1410100          ADC      r1,r1,#0              ;128
000234  69e3              LDR      r3,[r4,#0x1c]         ;128  ; ms_X
000236  1a80              SUBS     r0,r0,r2              ;128
000238  4199              SBCS     r1,r1,r3              ;128
00023a  d205              BCS      |L25.584|
00023c  69a0              LDR      r0,[r4,#0x18]         ;128  ; ms_X
00023e  69e1              LDR      r1,[r4,#0x1c]         ;128  ; ms_X
000240  6a23              LDR      r3,[r4,#0x20]         ;128  ; ms_X
000242  6a62              LDR      r2,[r4,#0x24]         ;128  ; ms_X
000244  1ac0              SUBS     r0,r0,r3              ;128
000246  e0cf              B        |L25.1000|
                  |L25.584|
000248  2001              MOVS     r0,#1                 ;128
00024a  2100              MOVS     r1,#0                 ;128
00024c  e0ce              B        |L25.1004|
                  |L25.590|
00024e  6860              LDR      r0,[r4,#4]            ;131  ; ms_X
000250  7800              LDRB     r0,[r0,#0]            ;131
000252  2801              CMP      r0,#1                 ;131
000254  d00a              BEQ      |L25.620|
000256  6860              LDR      r0,[r4,#4]            ;132  ; ms_X
000258  7005              STRB     r5,[r0,#0]            ;132
                  |L25.602|
00025a  6860              LDR      r0,[r4,#4]            ;133  ; ms_X
00025c  7800              LDRB     r0,[r0,#0]            ;133
00025e  2801              CMP      r0,#1                 ;133
000260  f04f0001          MOV      r0,#1                 ;134
000264  d006              BEQ      |L25.628|
000266  f7fffffe          BL       QClrPin
00026a  e0c1              B        |L25.1008|
                  |L25.620|
00026c  6861              LDR      r1,[r4,#4]            ;131  ; ms_X
00026e  20ff              MOVS     r0,#0xff              ;131
000270  7008              STRB     r0,[r1,#0]            ;131
000272  e7f2              B        |L25.602|
                  |L25.628|
000274  f7fffffe          BL       QSetPin
000278  e0ba              B        |L25.1008|
                  |L25.634|
00027a  6923              LDR      r3,[r4,#0x10]         ;146  ; ms_X
00027c  2000              MOVS     r0,#0                 ;133
00027e  e9c30000          STRD     r0,r0,[r3,#0]         ;146
                  |L25.642|
000282  6920              LDR      r0,[r4,#0x10]         ;147  ; ms_X
000284  f8db3000          LDR      r3,[r11,#0]           ;147  ; mc_X
000288  e9d06200          LDRD     r6,r2,[r0,#0]         ;147
00028c  4658              MOV      r0,r11                ;147
00028e  e9d37300          LDRD     r7,r3,[r3,#0]         ;147
000292  1bf6              SUBS     r6,r6,r7              ;147
000294  419a              SBCS     r2,r2,r3              ;147
000296  d206              BCS      |L25.678|
000298  6800              LDR      r0,[r0,#0]            ;148  ; mc_X
00029a  6923              LDR      r3,[r4,#0x10]         ;148  ; ms_X
00029c  e9d02000          LDRD     r2,r0,[r0,#0]         ;148
0002a0  e9c32000          STRD     r2,r0,[r3,#0]         ;148
0002a4  60e1              STR      r1,[r4,#0xc]          ;149  ; ms_X
                  |L25.678|
0002a6  68e0              LDR      r0,[r4,#0xc]          ;151  ; ms_X
0002a8  2801              CMP      r0,#1                 ;151
0002aa  db03              BLT      |L25.692|
0002ac  68e0              LDR      r0,[r4,#0xc]          ;151  ; ms_X
0002ae  1e40              SUBS     r0,r0,#1              ;151
0002b0  60e0              STR      r0,[r4,#0xc]          ;151  ; ms_X
0002b2  e000              B        |L25.694|
                  |L25.692|
0002b4  60e1              STR      r1,[r4,#0xc]          ;151  ; ms_X
                  |L25.694|
0002b6  6920              LDR      r0,[r4,#0x10]         ;152  ; ms_X
0002b8  4651              MOV      r1,r10                ;152
0002ba  e9d02300          LDRD     r2,r3,[r0,#0]         ;152
0002be  4648              MOV      r0,r9                 ;152
0002c0  f7fffffe          BL       __aeabi_uldivmod
0002c4  61a0              STR      r0,[r4,#0x18]         ;152  ; ms_X
0002c6  61e1              STR      r1,[r4,#0x1c]         ;152  ; ms_X
0002c8  6a20              LDR      r0,[r4,#0x20]         ;153  ; ms_X
0002ca  6a61              LDR      r1,[r4,#0x24]         ;153  ; ms_X
0002cc  1c40              ADDS     r0,r0,#1              ;153
0002ce  69a2              LDR      r2,[r4,#0x18]         ;153  ; ms_X
0002d0  f1410100          ADC      r1,r1,#0              ;153
0002d4  69e3              LDR      r3,[r4,#0x1c]         ;153  ; ms_X
0002d6  1a80              SUBS     r0,r0,r2              ;153
0002d8  4199              SBCS     r1,r1,r3              ;153
                  |L25.730|
0002da  d2b5              BCS      |L25.584|
0002dc  69a0              LDR      r0,[r4,#0x18]         ;153  ; ms_X
0002de  69e1              LDR      r1,[r4,#0x1c]         ;153  ; ms_X
0002e0  6a22              LDR      r2,[r4,#0x20]         ;153  ; ms_X
0002e2  6a63              LDR      r3,[r4,#0x24]         ;153  ; ms_X
0002e4  1a80              SUBS     r0,r0,r2              ;153
0002e6  e046              B        |L25.886|
                  |L25.744|
0002e8  6922              LDR      r2,[r4,#0x10]         ;156  ; ms_X
0002ea  6847              LDR      r7,[r0,#4]            ;156  ; mc_X
0002ec  e9d23200          LDRD     r3,r2,[r2,#0]         ;156
0002f0  e9d76700          LDRD     r6,r7,[r7,#0]         ;156
0002f4  1b9b              SUBS     r3,r3,r6              ;156
0002f6  41ba              SBCS     r2,r2,r7              ;156
0002f8  d27a              BCS      |L25.1008|
0002fa  6922              LDR      r2,[r4,#0x10]         ;157  ; ms_X
0002fc  4680              MOV      r8,r0                 ;157
0002fe  6940              LDR      r0,[r0,#0x14]         ;157  ; mc_X
000300  69a3              LDR      r3,[r4,#0x18]         ;157  ; ms_X
000302  8800              LDRH     r0,[r0,#0]            ;157
000304  69e6              LDR      r6,[r4,#0x1c]         ;157  ; ms_X
000306  fba07c03          UMULL    r7,r12,r0,r3          ;157
00030a  fb01c103          MLA      r1,r1,r3,r12          ;157
00030e  fb001006          MLA      r0,r0,r6,r1           ;157
000312  e9d21300          LDRD     r1,r3,[r2,#0]         ;157
000316  1879              ADDS     r1,r7,r1              ;157
000318  4158              ADCS     r0,r0,r3              ;157
00031a  e9c21000          STRD     r1,r0,[r2,#0]         ;157
00031e  f8d80004          LDR      r0,[r8,#4]            ;158  ; mc_X
000322  6923              LDR      r3,[r4,#0x10]         ;158  ; ms_X
000324  e9d02000          LDRD     r2,r0,[r0,#0]         ;158
000328  e9d31300          LDRD     r1,r3,[r3,#0]         ;158
00032c  1a51              SUBS     r1,r2,r1              ;158
00032e  4198              SBCS     r0,r0,r3              ;158
000330  d206              BCS      |L25.832|
000332  f8d80004          LDR      r0,[r8,#4]            ;158  ; mc_X
000336  6922              LDR      r2,[r4,#0x10]         ;158  ; ms_X
000338  e9d01000          LDRD     r1,r0,[r0,#0]         ;158
00033c  e9c21000          STRD     r1,r0,[r2,#0]         ;158
                  |L25.832|
000340  68e0              LDR      r0,[r4,#0xc]          ;159  ; ms_X
000342  1c40              ADDS     r0,r0,#1              ;159
000344  60e0              STR      r0,[r4,#0xc]          ;159  ; ms_X
000346  6920              LDR      r0,[r4,#0x10]         ;160  ; ms_X
000348  4651              MOV      r1,r10                ;160
00034a  e9d02300          LDRD     r2,r3,[r0,#0]         ;160
00034e  4648              MOV      r0,r9                 ;160
000350  f7fffffe          BL       __aeabi_uldivmod
000354  61a0              STR      r0,[r4,#0x18]         ;160  ; ms_X
000356  61e1              STR      r1,[r4,#0x1c]         ;160  ; ms_X
000358  6a20              LDR      r0,[r4,#0x20]         ;161  ; ms_X
00035a  6a61              LDR      r1,[r4,#0x24]         ;161  ; ms_X
00035c  1c40              ADDS     r0,r0,#1              ;161
00035e  69a2              LDR      r2,[r4,#0x18]         ;161  ; ms_X
000360  f1410100          ADC      r1,r1,#0              ;161
000364  69e3              LDR      r3,[r4,#0x1c]         ;161  ; ms_X
000366  1a80              SUBS     r0,r0,r2              ;161
000368  4199              SBCS     r1,r1,r3              ;161
                  |L25.874|
00036a  d2b6              BCS      |L25.730|
00036c  69a2              LDR      r2,[r4,#0x18]         ;161  ; ms_X
00036e  69e1              LDR      r1,[r4,#0x1c]         ;161  ; ms_X
000370  6a20              LDR      r0,[r4,#0x20]         ;161  ; ms_X
000372  6a63              LDR      r3,[r4,#0x24]         ;161  ; ms_X
000374  1a10              SUBS     r0,r2,r0              ;161
                  |L25.886|
000376  eb610103          SBC      r1,r1,r3              ;161
00037a  e037              B        |L25.1004|
                  |L25.892|
00037c  6923              LDR      r3,[r4,#0x10]         ;171  ; ms_X
00037e  2000              MOVS     r0,#0                 ;161
000380  e9c30000          STRD     r0,r0,[r3,#0]         ;171
                  |L25.900|
000384  6920              LDR      r0,[r4,#0x10]         ;172  ; ms_X
000386  f8db6000          LDR      r6,[r11,#0]           ;172  ; mc_X
00038a  465a              MOV      r2,r11                ;172
00038c  e9d07000          LDRD     r7,r0,[r0,#0]         ;172
000390  e9d63600          LDRD     r3,r6,[r6,#0]         ;172
000394  1afb              SUBS     r3,r7,r3              ;172
000396  41b0              SBCS     r0,r0,r6              ;172
000398  d206              BCS      |L25.936|
00039a  6810              LDR      r0,[r2,#0]            ;173  ; mc_X
00039c  6923              LDR      r3,[r4,#0x10]         ;173  ; ms_X
00039e  e9d02000          LDRD     r2,r0,[r0,#0]         ;173
0003a2  e9c32000          STRD     r2,r0,[r3,#0]         ;173
0003a6  60e1              STR      r1,[r4,#0xc]          ;174  ; ms_X
                  |L25.936|
0003a8  68e0              LDR      r0,[r4,#0xc]          ;176  ; ms_X
0003aa  2801              CMP      r0,#1                 ;176
0003ac  db03              BLT      |L25.950|
0003ae  68e0              LDR      r0,[r4,#0xc]          ;176  ; ms_X
0003b0  1e40              SUBS     r0,r0,#1              ;176
0003b2  60e0              STR      r0,[r4,#0xc]          ;176  ; ms_X
0003b4  e000              B        |L25.952|
                  |L25.950|
0003b6  60e1              STR      r1,[r4,#0xc]          ;176  ; ms_X
                  |L25.952|
0003b8  6920              LDR      r0,[r4,#0x10]         ;177  ; ms_X
0003ba  4651              MOV      r1,r10                ;177
0003bc  e9d02300          LDRD     r2,r3,[r0,#0]         ;177
0003c0  4648              MOV      r0,r9                 ;177
0003c2  f7fffffe          BL       __aeabi_uldivmod
0003c6  61a0              STR      r0,[r4,#0x18]         ;177  ; ms_X
0003c8  61e1              STR      r1,[r4,#0x1c]         ;177  ; ms_X
0003ca  6a20              LDR      r0,[r4,#0x20]         ;178  ; ms_X
0003cc  6a61              LDR      r1,[r4,#0x24]         ;178  ; ms_X
0003ce  1c40              ADDS     r0,r0,#1              ;178
0003d0  69a3              LDR      r3,[r4,#0x18]         ;178  ; ms_X
0003d2  f1410100          ADC      r1,r1,#0              ;178
0003d6  69e2              LDR      r2,[r4,#0x1c]         ;178  ; ms_X
0003d8  1ac0              SUBS     r0,r0,r3              ;178
0003da  4191              SBCS     r1,r1,r2              ;178
0003dc  d2c5              BCS      |L25.874|
0003de  69a3              LDR      r3,[r4,#0x18]         ;178  ; ms_X
0003e0  69e1              LDR      r1,[r4,#0x1c]         ;178  ; ms_X
0003e2  6a20              LDR      r0,[r4,#0x20]         ;178  ; ms_X
0003e4  6a62              LDR      r2,[r4,#0x24]         ;178  ; ms_X
0003e6  1a18              SUBS     r0,r3,r0              ;178
                  |L25.1000|
0003e8  eb610102          SBC      r1,r1,r2              ;178
                  |L25.1004|
0003ec  62a0              STR      r0,[r4,#0x28]         ;178  ; ms_X
0003ee  62e1              STR      r1,[r4,#0x2c]         ;178  ; ms_X
                  |L25.1008|
0003f0  68a0              LDR      r0,[r4,#8]            ;199  ; ms_X
0003f2  6862              LDR      r2,[r4,#4]            ;199  ; ms_X
0003f4  6801              LDR      r1,[r0,#0]            ;199
0003f6  f9922000          LDRSB    r2,[r2,#0]            ;199
0003fa  4411              ADD      r1,r1,r2              ;199
0003fc  6001              STR      r1,[r0,#0]            ;200
0003fe  e011              B        |L25.1060|
                  |L25.1024|
                          DCD      ||.bss||+0x1c
                  |L25.1028|
                          DCD      mc_Y
                  |L25.1032|
                          DCD      pCorrStop
                  |L25.1036|
                          DCD      mc_Z
                  |L25.1040|
                          DCD      0x40024000
                  |L25.1044|
                          DCD      vX_MIN_POS
                  |L25.1048|
                          DCD      vX_MAX_POS
                  |L25.1052|
                          DCD      0x26fc1000
                  |L25.1056|
                          DCD      0x0002386f
                  |L25.1060|
000424  68a0              LDR      r0,[r4,#8]            ;200  ; ms_X
000426  6801              LDR      r1,[r0,#0]            ;200
000428  4816              LDR      r0,|L25.1156|
00042a  6441              STR      r1,[r0,#0x44]         ;200
00042c  7025              STRB     r5,[r4,#0]            ;201
                  |L25.1070|
00042e  e60a              B        |L25.70|
                  |L25.1072|
000430  6a00              LDR      r0,[r0,#0x20]         ;181  ; mc_X
000432  7001              STRB     r1,[r0,#0]            ;181
000434  f8d80000          LDR      r0,[r8,#0]            ;182  ; pCorrStop
000438  7800              LDRB     r0,[r0,#0]            ;182
00043a  2800              CMP      r0,#0                 ;182
00043c  d1f7              BNE      |L25.1070|
00043e  6a18              LDR      r0,[r3,#0x20]         ;184  ; mc_Y
000440  7800              LDRB     r0,[r0,#0]            ;184
000442  2800              CMP      r0,#0                 ;184
000444  d1f3              BNE      |L25.1070|
000446  f8db0020          LDR      r0,[r11,#0x20]        ;184  ; mc_Z
00044a  465c              MOV      r4,r11                ;184
00044c  7800              LDRB     r0,[r0,#0]            ;184
00044e  2800              CMP      r0,#0                 ;184
000450  d1ed              BNE      |L25.1070|
000452  480d              LDR      r0,|L25.1160|
000454  f7fffffe          BL       Msg
000458  f8d80000          LDR      r0,[r8,#0]            ;186  ; pCorrStop
00045c  7005              STRB     r5,[r0,#0]            ;186
00045e  4809              LDR      r0,|L25.1156|
000460  f8805070          STRB     r5,[r0,#0x70]         ;187
000464  4809              LDR      r0,|L25.1164|
000466  68e1              LDR      r1,[r4,#0xc]          ;189  ; mc_Z
000468  6800              LDR      r0,[r0,#0]            ;189  ; vZ_MAX_POS
00046a  6008              STR      r0,[r1,#0]            ;190
00046c  6a20              LDR      r0,[r4,#0x20]         ;190  ; mc_Z
00046e  7005              STRB     r5,[r0,#0]            ;190
000470  f7fffffe          BL       FIStop
000474  200c              MOVS     r0,#0xc               ;192
000476  f7fffffe          BL       QClrPin
00047a  e8bd5ff0          POP      {r4-r12,lr}           ;192
00047e  200d              MOVS     r0,#0xd               ;192
000480  f7ffbffe          B.W      QClrPin
;;;205    
                          ENDP

                  |L25.1156|
                          DCD      0x40024000
                  |L25.1160|
                          DCD      ||.conststring||+0x40
                  |L25.1164|
                          DCD      vZ_MAX_POS

                          AREA ||i.MoveBtnX||, COMGROUP=MoveBtnX, CODE, READONLY, ALIGN=2

                  MoveBtnX PROC
;;;205    
;;;206    __inline void MoveBtnX(void){
000000  e92d47f0          PUSH     {r4-r10,lr}
;;;207    	//Msg("BX");
;;;208    	if 	(((!*(mc_X.MoveBtn))&&(*(ms_X.FrCur) <= *(mc_X.FrMin))) || 
000004  4df7              LDR      r5,|L32.996|
000006  69e8              LDR      r0,[r5,#0x1c]  ; mc_X
;;;209    		(*(ms_X.Pos) <= X_MIN_POS)&&(*(mc_X.ReqDir) == -1) ||
;;;210    		(*(ms_X.Pos) >= X_MAX_POS)&&(*(mc_X.ReqDir) == 1)) 
;;;211    
;;;212    	{
;;;213    		// условие окончания движения
;;;214    		// переход в мониторинг
;;;215    		ms_X.Tcur = Kb / *(mc_X.FrMin);
000008  49f8              LDR      r1,|L32.1004|
00000a  f105042c          ADD      r4,r5,#0x2c           ;208
00000e  7802              LDRB     r2,[r0,#0]            ;208
000010  48f5              LDR      r0,|L32.1000|
000012  b942              CBNZ     r2,|L32.38|
000014  682a              LDR      r2,[r5,#0]            ;208  ; mc_X
000016  6926              LDR      r6,[r4,#0x10]         ;208  ; ms_X
000018  e9d23200          LDRD     r3,r2,[r2,#0]         ;208
00001c  e9d67600          LDRD     r7,r6,[r6,#0]         ;208
000020  1bdb              SUBS     r3,r3,r7              ;208
000022  41b2              SBCS     r2,r2,r6              ;208
000024  d25d              BCS      |L32.226|
                  |L32.38|
000026  68a2              LDR      r2,[r4,#8]            ;209  ; ms_X
000028  6813              LDR      r3,[r2,#0]            ;209
00002a  4af1              LDR      r2,|L32.1008|
00002c  6816              LDR      r6,[r2,#0]            ;209  ; vX_MIN_POS
00002e  42b3              CMP      r3,r6                 ;209
000030  dc04              BGT      |L32.60|
000032  69aa              LDR      r2,[r5,#0x18]         ;209  ; mc_X
000034  f9922000          LDRSB    r2,[r2,#0]            ;209
000038  1c52              ADDS     r2,r2,#1              ;209
00003a  d052              BEQ      |L32.226|
                  |L32.60|
00003c  68a2              LDR      r2,[r4,#8]            ;210  ; ms_X
00003e  46a1              MOV      r9,r4                 ;210
000040  6817              LDR      r7,[r2,#0]            ;210
000042  4aec              LDR      r2,|L32.1012|
000044  6813              LDR      r3,[r2,#0]            ;210  ; vX_MAX_POS
000046  429f              CMP      r7,r3                 ;210
000048  db03              BLT      |L32.82|
00004a  69aa              LDR      r2,[r5,#0x18]         ;210  ; mc_X
00004c  7812              LDRB     r2,[r2,#0]            ;210
00004e  2a01              CMP      r2,#1                 ;210
000050  d047              BEQ      |L32.226|
                  |L32.82|
;;;216    //		TCS_SetInterval(tcs_MotorX,2500000);
;;;217    //		Msg("BXM");
;;;218    	} else {
;;;219    		if (!*(mc_X.MoveBtn)) {
000052  69ea              LDR      r2,[r5,#0x1c]  ; mc_X
000054  7814              LDRB     r4,[r2,#0]
000056  2200              MOVS     r2,#0
000058  b3ec              CBZ      r4,|L32.214|
;;;220    			// торможение
;;;221    			if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;222    				*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;223    			else *(ms_X.FrCur) = 0; 
;;;224    			if (*(ms_X.FrCur) < *(mc_X.FrMin)) {
;;;225    				*(ms_X.FrCur) = *(mc_X.FrMin);
;;;226    				ms_X.Lacc = 0;
;;;227    			}
;;;228    			if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;229    			ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;230    			ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;231    		} else {
;;;232    			// Движение разрешено
;;;233    			// Проверить текущую позицию на предмет подхода к границе поля 
;;;234    			// на расстояние необходимое для торможения
;;;235    			// торможение, изменение направления движения на необходимое
;;;236    			// разгон и движение с постоянной скоростью
;;;237    			if (*(ms_X.Dir)!=*(mc_X.ReqDir)) {
00005a  f8d97004          LDR      r7,[r9,#4]  ; ms_X
00005e  464c              MOV      r4,r9
000060  f8d5c018          LDR      r12,[r5,#0x18]  ; mc_X
000064  f9977000          LDRSB    r7,[r7,#0]
000068  f99cc000          LDRSB    r12,[r12,#0]
00006c  4567              CMP      r7,r12
00006e  d06f              BEQ      |L32.336|
;;;238    				// торможение и смена направления
;;;239    				if (*(ms_X.FrCur) > *(mc_X.FrMin)) {
000070  682b              LDR      r3,[r5,#0]  ; mc_X
000072  f8d4c010          LDR      r12,[r4,#0x10]  ; ms_X
000076  e9d36300          LDRD     r6,r3,[r3,#0]
00007a  e9dc7c00          LDRD     r7,r12,[r12,#0]
00007e  1bf6              SUBS     r6,r6,r7
000080  eb73030c          SBCS     r3,r3,r12
000084  d27d              BCS      |L32.386|
;;;240    				   	// торможение
;;;241    					if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
000086  696b              LDR      r3,[r5,#0x14]  ; mc_X
000088  46aa              MOV      r10,r5
00008a  881d              LDRH     r5,[r3,#0]
00008c  4623              MOV      r3,r4
00008e  69a4              LDR      r4,[r4,#0x18]  ; ms_X
000090  0fee              LSRS     r6,r5,#31
000092  69df              LDR      r7,[r3,#0x1c]  ; ms_X
000094  fba5c804          UMULL    r12,r8,r5,r4
000098  fb068404          MLA      r4,r6,r4,r8
00009c  fb054407          MLA      r4,r5,r7,r4
0000a0  691b              LDR      r3,[r3,#0x10]  ; ms_X
0000a2  e9d35300          LDRD     r5,r3,[r3,#0]
0000a6  ebbc0505          SUBS     r5,r12,r5
0000aa  419c              SBCS     r4,r4,r3
0000ac  d26a              BCS      |L32.388|
;;;242    						*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
0000ae  f8d94010          LDR      r4,[r9,#0x10]  ; ms_X
0000b2  f8da3014          LDR      r3,[r10,#0x14]  ; mc_X
0000b6  f8d97018          LDR      r7,[r9,#0x18]  ; ms_X
0000ba  881b              LDRH     r3,[r3,#0]
0000bc  0fde              LSRS     r6,r3,#31
0000be  f8d9c01c          LDR      r12,[r9,#0x1c]  ; ms_X
0000c2  fba35807          UMULL    r5,r8,r3,r7
0000c6  fb068607          MLA      r6,r6,r7,r8
0000ca  fb03660c          MLA      r6,r3,r12,r6
0000ce  e9d47300          LDRD     r7,r3,[r4,#0]
0000d2  1b7d              SUBS     r5,r7,r5
0000d4  e000              B        |L32.216|
                  |L32.214|
0000d6  e00d              B        |L32.244|
                  |L32.216|
0000d8  eb630306          SBC      r3,r3,r6
0000dc  e9c45300          STRD     r5,r3,[r4,#0]
0000e0  e073              B        |L32.458|
                  |L32.226|
0000e2  682b              LDR      r3,[r5,#0]            ;215  ; mc_X
0000e4  e9d32300          LDRD     r2,r3,[r3,#0]         ;215
0000e8  f7fffffe          BL       __aeabi_uldivmod
0000ec  61a0              STR      r0,[r4,#0x18]         ;215  ; ms_X
0000ee  61e1              STR      r1,[r4,#0x1c]         ;215  ; ms_X
                  |L32.240|
;;;243    					else *(ms_X.FrCur) = 0; 
;;;244    					if (*(ms_X.FrCur) < *(mc_X.FrMin)) {
;;;245    						*(ms_X.FrCur) = *(mc_X.FrMin);
;;;246    						ms_X.Lacc = 0;
;;;247    					}
;;;248    					if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;249    					ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;250    					ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;251    				} else {
;;;252    					// смена направления
;;;253    					*(ms_X.Dir)=*(mc_X.ReqDir);
;;;254    					if (*(ms_X.Dir) == 1) QSetPin(MOTOR_X_DIR);
;;;255    					else QClrPin(MOTOR_X_DIR);
;;;256    					// для прямой логики
;;;257    //					Msg("DelayDirX\r\n");
;;;258    //					TCS_SetInterval(tcs_MotorX,*pDirDelay);
;;;259    //					return;
;;;260    				}
;;;261    			} else {
;;;262    				// разгон и движение с постоянной скоростью
;;;263    				if 	( 
;;;264    						(((*(ms_X.Pos)-(ms_X.Lacc+10)) < X_MIN_POS)&&(*(mc_X.ReqDir) == -1)) ||
;;;265    						(((*(ms_X.Pos)+(ms_X.Lacc+10)) > X_MAX_POS)&&(*(mc_X.ReqDir) == 1)) 
;;;266    					)
;;;267    				{
;;;268    					// торможение
;;;269    					if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;270    						*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;271    					else *(ms_X.FrCur) = 0; 
;;;272    
;;;273    					if (*(ms_X.FrCur) < *(mc_X.FrMin)) {
;;;274    						*(ms_X.FrCur) = *(mc_X.FrMin);
;;;275    						ms_X.Lacc = 0;
;;;276    					}
;;;277    					if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;278    					ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;279    					ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;280    				} else
;;;281    				if (*(mc_X.FrReq) < *(mc_X.FrMin)) {
;;;282    					// требуемая частота меньше минимальной
;;;283    					// торможение FrCur до FrMin и переход на FrReq
;;;284    //					Msg("FrReq < FrMin ");
;;;285    					if (*(ms_X.FrCur) > *(mc_X.FrMin)) {
;;;286    						// торможение
;;;287    						if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;288    							*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;289    						else *(ms_X.FrCur) = 0; 
;;;290    						if (*(ms_X.FrCur) < *(mc_X.FrMin)) *(ms_X.FrCur) = *(mc_X.FrMin);
;;;291    						if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;292    						if (*(ms_X.FrCur) > *(mc_X.FrMin)) {
;;;293    							ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;294    							ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;295    						} else {
;;;296    							// переход на FrReq
;;;297    							*(ms_X.FrCur) = *(mc_X.FrReq);
;;;298    							ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;299    							ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;300    						}
;;;301    					} 
;;;302    				} else {
;;;303    					// требуемая частота больше или равна минимальной
;;;304    //					Msg("FrReq >= FrMin ");
;;;305    					// движение с FrReq
;;;306    					if (*(ms_X.FrCur) < *(mc_X.FrReq)) {
;;;307    						// разгон до FrReq
;;;308    						*(ms_X.FrCur) += *(mc_X.Accel) * ms_X.Tcur;
;;;309    						ms_X.Lacc++;
;;;310    						if (*(ms_X.FrCur) > *(mc_X.FrReq)) *(ms_X.FrCur) = *(mc_X.FrReq);
;;;311    						ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;312    						ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;313    //							Msg("Acc To FrReq ");
;;;314    					} else
;;;315    					if (*(ms_X.FrCur) > *(mc_X.FrReq)) {
;;;316    						// торможение до FrReq
;;;317    						if (*(ms_X.FrCur) > *(mc_X.Accel) * mulAX * (ms_X.Tcur))
;;;318    							*(ms_X.FrCur) -= *(mc_X.Accel) * mulAX * (ms_X.Tcur);
;;;319    						else *(ms_X.FrCur) = 0; 
;;;320    						if (ms_X.Lacc >= mulAX) ms_X.Lacc -= mulAX; else ms_X.Lacc = 0;
;;;321    						if (*(ms_X.FrCur) < *(mc_X.FrReq)) *(ms_X.FrCur) = *(mc_X.FrReq);
;;;322    						ms_X.Tcur = Kb / (*(ms_X.FrCur));
;;;323    						ms_X.LPOFF = CLPOFF(ms_X.Tcur,ms_X.LPON);		
;;;324    //							Msg("Dec To FrReq ");
;;;325    					} 
;;;326    				}
;;;327    			}
;;;328    		}
;;;329    		//ON_PULSE;
;;;330    		//Msg("XON");
;;;331    		*(ms_X.Pos)+=*(ms_X.Dir);							
;;;332    		BR_ms_X_Pos = *(ms_X.Pos);
;;;333    		ms_X.Level = 1;								
;;;334    //		QSetPin(MOTOR_X_STEP);	
;;;335    //		TCS_SetInterval(tcs_MotorX,ms_X.LPON);		
;;;336    //		Msg("Pos %d Lacc %d ",*(ms_X.Pos), ms_X.Lacc);
;;;337    	}
;;;338    }
0000f0  e8bd87f0          POP      {r4-r10,pc}
                  |L32.244|
0000f4  696b              LDR      r3,[r5,#0x14]         ;221  ; mc_X
0000f6  46aa              MOV      r10,r5                ;221
0000f8  f8d95018          LDR      r5,[r9,#0x18]         ;221  ; ms_X
0000fc  881c              LDRH     r4,[r3,#0]            ;221
0000fe  0fe7              LSRS     r7,r4,#31             ;221
000100  f8d9601c          LDR      r6,[r9,#0x1c]         ;221  ; ms_X
000104  fba4c805          UMULL    r12,r8,r4,r5          ;221
000108  fb078505          MLA      r5,r7,r5,r8           ;221
00010c  fb045406          MLA      r4,r4,r6,r5           ;221
000110  f8d95010          LDR      r5,[r9,#0x10]         ;221  ; ms_X
000114  e9d53500          LDRD     r3,r5,[r5,#0]         ;221
000118  ebbc0303          SUBS     r3,r12,r3             ;221
00011c  41ac              SBCS     r4,r4,r5              ;221
00011e  d218              BCS      |L32.338|
000120  f8d94010          LDR      r4,[r9,#0x10]         ;222  ; ms_X
000124  f8da3014          LDR      r3,[r10,#0x14]        ;222  ; mc_X
000128  f8d97018          LDR      r7,[r9,#0x18]         ;222  ; ms_X
00012c  881b              LDRH     r3,[r3,#0]            ;222
00012e  0fde              LSRS     r6,r3,#31             ;222
000130  f8d9c01c          LDR      r12,[r9,#0x1c]        ;222  ; ms_X
000134  fba35807          UMULL    r5,r8,r3,r7           ;222
000138  fb068607          MLA      r6,r6,r7,r8           ;222
00013c  fb03670c          MLA      r7,r3,r12,r6          ;222
000140  e9d46300          LDRD     r6,r3,[r4,#0]         ;222
000144  1b75              SUBS     r5,r6,r5              ;222
000146  eb630307          SBC      r3,r3,r7              ;222
00014a  e9c45300          STRD     r5,r3,[r4,#0]         ;222
00014e  e005              B        |L32.348|
                  |L32.336|
000150  e07f              B        |L32.594|
                  |L32.338|
000152  f8d94010          LDR      r4,[r9,#0x10]         ;223  ; ms_X
000156  2300              MOVS     r3,#0                 ;222
000158  e9c43300          STRD     r3,r3,[r4,#0]         ;223
                  |L32.348|
00015c  f8d93010          LDR      r3,[r9,#0x10]         ;224  ; ms_X
000160  464c              MOV      r4,r9                 ;224
000162  f8da7000          LDR      r7,[r10,#0]           ;224  ; mc_X
000166  e9d3c500          LDRD     r12,r5,[r3,#0]        ;224
00016a  4653              MOV      r3,r10                ;224
00016c  e9d76700          LDRD     r6,r7,[r7,#0]         ;224
000170  ebbc0606          SUBS     r6,r12,r6             ;224
000174  41bd              SBCS     r5,r5,r7              ;224
000176  d209              BCS      |L32.396|
000178  681b              LDR      r3,[r3,#0]            ;225  ; mc_X
00017a  6926              LDR      r6,[r4,#0x10]         ;225  ; ms_X
00017c  e9d35300          LDRD     r5,r3,[r3,#0]         ;225
000180  e001              B        |L32.390|
                  |L32.386|
000182  e056              B        |L32.562|
                  |L32.388|
000184  e01c              B        |L32.448|
                  |L32.390|
000186  e9c65300          STRD     r5,r3,[r6,#0]         ;225
00018a  60e2              STR      r2,[r4,#0xc]          ;226  ; ms_X
                  |L32.396|
00018c  68e3              LDR      r3,[r4,#0xc]          ;228  ; ms_X
00018e  2b01              CMP      r3,#1                 ;228
000190  db01              BLT      |L32.406|
000192  68e2              LDR      r2,[r4,#0xc]          ;228  ; ms_X
000194  1e52              SUBS     r2,r2,#1              ;228
                  |L32.406|
000196  60e2              STR      r2,[r4,#0xc]          ;228  ; ms_X
000198  6923              LDR      r3,[r4,#0x10]         ;229  ; ms_X
00019a  e9d32300          LDRD     r2,r3,[r3,#0]         ;229
00019e  f7fffffe          BL       __aeabi_uldivmod
0001a2  61a0              STR      r0,[r4,#0x18]         ;229  ; ms_X
0001a4  61e1              STR      r1,[r4,#0x1c]         ;229  ; ms_X
0001a6  6a20              LDR      r0,[r4,#0x20]         ;230  ; ms_X
0001a8  6a61              LDR      r1,[r4,#0x24]         ;230  ; ms_X
0001aa  1c40              ADDS     r0,r0,#1              ;230
0001ac  69a3              LDR      r3,[r4,#0x18]         ;230  ; ms_X
0001ae  f1410100          ADC      r1,r1,#0              ;230
0001b2  69e2              LDR      r2,[r4,#0x1c]         ;230  ; ms_X
0001b4  1ac0              SUBS     r0,r0,r3              ;230
0001b6  4191              SBCS     r1,r1,r2              ;230
0001b8  d37e              BCC      |L32.696|
                  |L32.442|
0001ba  2001              MOVS     r0,#1                 ;230
0001bc  2100              MOVS     r1,#0                 ;230
0001be  e157              B        |L32.1136|
                  |L32.448|
0001c0  f8d94010          LDR      r4,[r9,#0x10]         ;243  ; ms_X
0001c4  2300              MOVS     r3,#0                 ;230
0001c6  e9c43300          STRD     r3,r3,[r4,#0]         ;243
                  |L32.458|
0001ca  f8d93010          LDR      r3,[r9,#0x10]         ;244  ; ms_X
0001ce  464c              MOV      r4,r9                 ;244
0001d0  f8da6000          LDR      r6,[r10,#0]           ;244  ; mc_X
0001d4  e9d37500          LDRD     r7,r5,[r3,#0]         ;244
0001d8  4653              MOV      r3,r10                ;244
0001da  e9d6c600          LDRD     r12,r6,[r6,#0]        ;244
0001de  ebb7070c          SUBS     r7,r7,r12             ;244
0001e2  41b5              SBCS     r5,r5,r6              ;244
0001e4  d206              BCS      |L32.500|
0001e6  681b              LDR      r3,[r3,#0]            ;245  ; mc_X
0001e8  6926              LDR      r6,[r4,#0x10]         ;245  ; ms_X
0001ea  e9d35300          LDRD     r5,r3,[r3,#0]         ;245
0001ee  e9c65300          STRD     r5,r3,[r6,#0]         ;245
0001f2  60e2              STR      r2,[r4,#0xc]          ;246  ; ms_X
                  |L32.500|
0001f4  68e3              LDR      r3,[r4,#0xc]          ;248  ; ms_X
0001f6  2b01              CMP      r3,#1                 ;248
0001f8  db01              BLT      |L32.510|
0001fa  68e2              LDR      r2,[r4,#0xc]          ;248  ; ms_X
0001fc  1e52              SUBS     r2,r2,#1              ;248
                  |L32.510|
0001fe  60e2              STR      r2,[r4,#0xc]          ;248  ; ms_X
000200  6923              LDR      r3,[r4,#0x10]         ;249  ; ms_X
000202  e9d32300          LDRD     r2,r3,[r3,#0]         ;249
000206  f7fffffe          BL       __aeabi_uldivmod
00020a  61a0              STR      r0,[r4,#0x18]         ;249  ; ms_X
00020c  61e1              STR      r1,[r4,#0x1c]         ;249  ; ms_X
00020e  6a20              LDR      r0,[r4,#0x20]         ;250  ; ms_X
000210  6a61              LDR      r1,[r4,#0x24]         ;250  ; ms_X
000212  1c40              ADDS     r0,r0,#1              ;250
000214  69a2              LDR      r2,[r4,#0x18]         ;250  ; ms_X
000216  f1410100          ADC      r1,r1,#0              ;250
00021a  69e3              LDR      r3,[r4,#0x1c]         ;250  ; ms_X
00021c  1a80              SUBS     r0,r0,r2              ;250
00021e  4199              SBCS     r1,r1,r3              ;250
000220  d2cb              BCS      |L32.442|
000222  69a2              LDR      r2,[r4,#0x18]         ;250  ; ms_X
000224  69e1              LDR      r1,[r4,#0x1c]         ;250  ; ms_X
000226  6a20              LDR      r0,[r4,#0x20]         ;250  ; ms_X
000228  6a63              LDR      r3,[r4,#0x24]         ;250  ; ms_X
00022a  1a10              SUBS     r0,r2,r0              ;250
00022c  eb610103          SBC      r1,r1,r3              ;250
000230  e11e              B        |L32.1136|
                  |L32.562|
000232  69a8              LDR      r0,[r5,#0x18]         ;253  ; mc_X
000234  6861              LDR      r1,[r4,#4]            ;253  ; ms_X
000236  7800              LDRB     r0,[r0,#0]            ;253
000238  7008              STRB     r0,[r1,#0]            ;253
00023a  6860              LDR      r0,[r4,#4]            ;254  ; ms_X
00023c  7800              LDRB     r0,[r0,#0]            ;254
00023e  2801              CMP      r0,#1                 ;254
000240  f04f0001          MOV      r0,#1                 ;255
000244  d002              BEQ      |L32.588|
000246  f7fffffe          BL       QClrPin
                  |L32.586|
00024a  e113              B        |L32.1140|
                  |L32.588|
00024c  f7fffffe          BL       QSetPin
000250  e110              B        |L32.1140|
                  |L32.594|
000252  68a7              LDR      r7,[r4,#8]            ;263  ; ms_X
000254  f8d4c00c          LDR      r12,[r4,#0xc]         ;263  ; ms_X
000258  683f              LDR      r7,[r7,#0]            ;263
00025a  eba7070c          SUB      r7,r7,r12             ;263
00025e  3f0a              SUBS     r7,r7,#0xa            ;263
000260  42b7              CMP      r7,r6                 ;263
000262  da04              BGE      |L32.622|
000264  69ae              LDR      r6,[r5,#0x18]         ;264  ; mc_X
000266  f9966000          LDRSB    r6,[r6,#0]            ;264
00026a  1c76              ADDS     r6,r6,#1              ;264
00026c  d04d              BEQ      |L32.778|
                  |L32.622|
00026e  68a6              LDR      r6,[r4,#8]            ;265  ; ms_X
000270  68e7              LDR      r7,[r4,#0xc]          ;265  ; ms_X
000272  6836              LDR      r6,[r6,#0]            ;265
000274  443e              ADD      r6,r6,r7              ;265
000276  360a              ADDS     r6,r6,#0xa            ;265
000278  429e              CMP      r6,r3                 ;265
00027a  dd03              BLE      |L32.644|
00027c  69ab              LDR      r3,[r5,#0x18]         ;265  ; mc_X
00027e  781b              LDRB     r3,[r3,#0]            ;265
000280  2b01              CMP      r3,#1                 ;265
000282  d042              BEQ      |L32.778|
                  |L32.644|
000284  686b              LDR      r3,[r5,#4]            ;281  ; mc_X
000286  f8d5c000          LDR      r12,[r5,#0]           ;281  ; mc_X
00028a  e9d36300          LDRD     r6,r3,[r3,#0]         ;281
00028e  e9dc7c00          LDRD     r7,r12,[r12,#0]       ;281
000292  1bf6              SUBS     r6,r6,r7              ;281
000294  eb73030c          SBCS     r3,r3,r12             ;281
000298  d27e              BCS      |L32.920|
00029a  682b              LDR      r3,[r5,#0]            ;285  ; mc_X
00029c  f8d4c010          LDR      r12,[r4,#0x10]        ;285  ; ms_X
0002a0  e9d36300          LDRD     r6,r3,[r3,#0]         ;285
0002a4  e9dc7c00          LDRD     r7,r12,[r12,#0]       ;285
0002a8  1bf6              SUBS     r6,r6,r7              ;285
0002aa  eb73030c          SBCS     r3,r3,r12             ;285
0002ae  d274              BCS      |L32.922|
0002b0  696b              LDR      r3,[r5,#0x14]         ;287  ; mc_X
0002b2  46aa              MOV      r10,r5                ;287
0002b4  881b              LDRH     r3,[r3,#0]            ;287
0002b6  e000              B        |L32.698|
                  |L32.696|
0002b8  e105              B        |L32.1222|
                  |L32.698|
0002ba  69a6              LDR      r6,[r4,#0x18]         ;287  ; ms_X
0002bc  0fdd              LSRS     r5,r3,#31             ;287
0002be  69e7              LDR      r7,[r4,#0x1c]         ;287  ; ms_X
0002c0  fba3c806          UMULL    r12,r8,r3,r6          ;287
0002c4  fb058506          MLA      r5,r5,r6,r8           ;287
0002c8  fb035307          MLA      r3,r3,r7,r5           ;287
0002cc  6924              LDR      r4,[r4,#0x10]         ;287  ; ms_X
0002ce  e9d45400          LDRD     r5,r4,[r4,#0]         ;287
0002d2  ebbc0505          SUBS     r5,r12,r5             ;287
0002d6  41a3              SBCS     r3,r3,r4              ;287
0002d8  d27e              BCS      |L32.984|
0002da  f8d93010          LDR      r3,[r9,#0x10]         ;288  ; ms_X
0002de  f8da4014          LDR      r4,[r10,#0x14]        ;288  ; mc_X
0002e2  f8d97018          LDR      r7,[r9,#0x18]         ;288  ; ms_X
0002e6  8824              LDRH     r4,[r4,#0]            ;288
0002e8  0fe6              LSRS     r6,r4,#31             ;288
0002ea  f8d9c01c          LDR      r12,[r9,#0x1c]        ;288  ; ms_X
0002ee  fba45807          UMULL    r5,r8,r4,r7           ;288
0002f2  fb068607          MLA      r6,r6,r7,r8           ;288
0002f6  fb04670c          MLA      r7,r4,r12,r6          ;288
0002fa  e9d36400          LDRD     r6,r4,[r3,#0]         ;288
0002fe  1b75              SUBS     r5,r6,r5              ;288
000300  eb640407          SBC      r4,r4,r7              ;288
000304  e9c35400          STRD     r5,r4,[r3,#0]         ;288
000308  e07b              B        |L32.1026|
                  |L32.778|
00030a  696b              LDR      r3,[r5,#0x14]         ;269  ; mc_X
00030c  46aa              MOV      r10,r5                ;269
00030e  69a5              LDR      r5,[r4,#0x18]         ;269  ; ms_X
000310  881b              LDRH     r3,[r3,#0]            ;269
000312  0fde              LSRS     r6,r3,#31             ;269
000314  69e7              LDR      r7,[r4,#0x1c]         ;269  ; ms_X
000316  fba3c805          UMULL    r12,r8,r3,r5          ;269
00031a  fb068505          MLA      r5,r6,r5,r8           ;269
00031e  fb035307          MLA      r3,r3,r7,r5           ;269
000322  6925              LDR      r5,[r4,#0x10]         ;269  ; ms_X
000324  e9d54500          LDRD     r4,r5,[r5,#0]         ;269
000328  ebbc0404          SUBS     r4,r12,r4             ;269
00032c  41ab              SBCS     r3,r3,r5              ;269
00032e  d217              BCS      |L32.864|
000330  f8d94010          LDR      r4,[r9,#0x10]         ;270  ; ms_X
000334  f8da3014          LDR      r3,[r10,#0x14]        ;270  ; mc_X
000338  f8d97018          LDR      r7,[r9,#0x18]         ;270  ; ms_X
00033c  881b              LDRH     r3,[r3,#0]            ;270
00033e  0fde              LSRS     r6,r3,#31             ;270
000340  f8d9c01c          LDR      r12,[r9,#0x1c]        ;270  ; ms_X
000344  fba35807          UMULL    r5,r8,r3,r7           ;270
000348  fb068607          MLA      r6,r6,r7,r8           ;270
00034c  fb03670c          MLA      r7,r3,r12,r6          ;270
000350  e9d46300          LDRD     r6,r3,[r4,#0]         ;270
000354  1b75              SUBS     r5,r6,r5              ;270
000356  eb630307          SBC      r3,r3,r7              ;270
00035a  e9c45300          STRD     r5,r3,[r4,#0]         ;270
00035e  e004              B        |L32.874|
                  |L32.864|
000360  f8d94010          LDR      r4,[r9,#0x10]         ;271  ; ms_X
000364  2300              MOVS     r3,#0                 ;270
000366  e9c43300          STRD     r3,r3,[r4,#0]         ;271
                  |L32.874|
00036a  f8d93010          LDR      r3,[r9,#0x10]         ;273  ; ms_X
00036e  464c              MOV      r4,r9                 ;273
000370  f8da7000          LDR      r7,[r10,#0]           ;273  ; mc_X
000374  e9d3c500          LDRD     r12,r5,[r3,#0]        ;273
000378  4653              MOV      r3,r10                ;273
00037a  e9d76700          LDRD     r6,r7,[r7,#0]         ;273
00037e  ebbc0606          SUBS     r6,r12,r6             ;273
000382  41bd              SBCS     r5,r5,r7              ;273
000384  d206              BCS      |L32.916|
000386  681b              LDR      r3,[r3,#0]            ;274  ; mc_X
000388  6926              LDR      r6,[r4,#0x10]         ;274  ; ms_X
00038a  e9d35300          LDRD     r5,r3,[r3,#0]         ;274
00038e  e9c65300          STRD     r5,r3,[r6,#0]         ;274
000392  60e2              STR      r2,[r4,#0xc]          ;275  ; ms_X
                  |L32.916|
000394  68e3              LDR      r3,[r4,#0xc]          ;277  ; ms_X
000396  e001              B        |L32.924|
                  |L32.920|
000398  e09b              B        |L32.1234|
                  |L32.922|
00039a  e06b              B        |L32.1140|
                  |L32.924|
00039c  2b01              CMP      r3,#1                 ;277
00039e  db01              BLT      |L32.932|
0003a0  68e2              LDR      r2,[r4,#0xc]          ;277  ; ms_X
0003a2  1e52              SUBS     r2,r2,#1              ;277
                  |L32.932|
0003a4  60e2              STR      r2,[r4,#0xc]          ;277  ; ms_X
0003a6  6923              LDR      r3,[r4,#0x10]         ;278  ; ms_X
0003a8  e9d32300          LDRD     r2,r3,[r3,#0]         ;278
0003ac  f7fffffe          BL       __aeabi_uldivmod
0003b0  61a0              STR      r0,[r4,#0x18]         ;278  ; ms_X
0003b2  61e1              STR      r1,[r4,#0x1c]         ;278  ; ms_X
0003b4  6a20              LDR      r0,[r4,#0x20]         ;279  ; ms_X
0003b6  6a61              LDR      r1,[r4,#0x24]         ;279  ; ms_X
0003b8  1c40              ADDS     r0,r0,#1              ;279
0003ba  69a2              LDR      r2,[r4,#0x18]         ;279  ; ms_X
0003bc  f1410100          ADC      r1,r1,#0              ;279
0003c0  69e3              LDR      r3,[r4,#0x1c]         ;279  ; ms_X
0003c2  1a80              SUBS     r0,r0,r2              ;279
0003c4  4199              SBCS     r1,r1,r3              ;279
0003c6  d208              BCS      |L32.986|
0003c8  69a2              LDR      r2,[r4,#0x18]         ;279  ; ms_X
0003ca  69e0              LDR      r0,[r4,#0x1c]         ;279  ; ms_X
0003cc  6a21              LDR      r1,[r4,#0x20]         ;279  ; ms_X
0003ce  6a63              LDR      r3,[r4,#0x24]         ;279  ; ms_X
0003d0  1a51              SUBS     r1,r2,r1              ;279
0003d2  eb600203          SBC      r2,r0,r3              ;279
0003d6  e002              B        |L32.990|
                  |L32.984|
0003d8  e00e              B        |L32.1016|
                  |L32.986|
0003da  2101              MOVS     r1,#1                 ;279
0003dc  2200              MOVS     r2,#0                 ;279
                  |L32.990|
0003de  62a1              STR      r1,[r4,#0x28]         ;279  ; ms_X
0003e0  62e2              STR      r2,[r4,#0x2c]         ;279  ; ms_X
0003e2  e047              B        |L32.1140|
                  |L32.996|
                          DCD      ||.bss||+0x1c
                  |L32.1000|
                          DCD      0x26fc1000
                  |L32.1004|
                          DCD      0x0002386f
                  |L32.1008|
                          DCD      vX_MIN_POS
                  |L32.1012|
                          DCD      vX_MAX_POS
                  |L32.1016|
0003f8  f8d95010          LDR      r5,[r9,#0x10]         ;289  ; ms_X
0003fc  2300              MOVS     r3,#0                 ;289
0003fe  e9c53300          STRD     r3,r3,[r5,#0]         ;289
                  |L32.1026|
000402  f8d93010          LDR      r3,[r9,#0x10]         ;290  ; ms_X
000406  464c              MOV      r4,r9                 ;290
000408  f8da7000          LDR      r7,[r10,#0]           ;290  ; mc_X
00040c  e9d3c500          LDRD     r12,r5,[r3,#0]        ;290
000410  4653              MOV      r3,r10                ;290
000412  e9d76700          LDRD     r6,r7,[r7,#0]         ;290
000416  ebbc0606          SUBS     r6,r12,r6             ;290
00041a  41bd              SBCS     r5,r5,r7              ;290
00041c  d205              BCS      |L32.1066|
00041e  681d              LDR      r5,[r3,#0]            ;290  ; mc_X
000420  6927              LDR      r7,[r4,#0x10]         ;290  ; ms_X
000422  e9d56500          LDRD     r6,r5,[r5,#0]         ;290
000426  e9c76500          STRD     r6,r5,[r7,#0]         ;290
                  |L32.1066|
00042a  68e5              LDR      r5,[r4,#0xc]          ;291  ; ms_X
00042c  2d01              CMP      r5,#1                 ;291
00042e  db01              BLT      |L32.1076|
000430  68e2              LDR      r2,[r4,#0xc]          ;291  ; ms_X
000432  1e52              SUBS     r2,r2,#1              ;291
                  |L32.1076|
000434  60e2              STR      r2,[r4,#0xc]          ;291  ; ms_X
000436  681a              LDR      r2,[r3,#0]            ;292  ; mc_X
000438  6927              LDR      r7,[r4,#0x10]         ;292  ; ms_X
00043a  e9d25200          LDRD     r5,r2,[r2,#0]         ;292
00043e  e9d76700          LDRD     r6,r7,[r7,#0]         ;292
000442  1bad              SUBS     r5,r5,r6              ;292
000444  41ba              SBCS     r2,r2,r7              ;292
000446  d227              BCS      |L32.1176|
                  |L32.1096|
000448  6923              LDR      r3,[r4,#0x10]         ;293  ; ms_X
00044a  e9d32300          LDRD     r2,r3,[r3,#0]         ;293
00044e  f7fffffe          BL       __aeabi_uldivmod
000452  61a0              STR      r0,[r4,#0x18]         ;293  ; ms_X
000454  61e1              STR      r1,[r4,#0x1c]         ;293  ; ms_X
000456  6a20              LDR      r0,[r4,#0x20]         ;294  ; ms_X
000458  6a61              LDR      r1,[r4,#0x24]         ;294  ; ms_X
00045a  1c40              ADDS     r0,r0,#1              ;294
00045c  69a2              LDR      r2,[r4,#0x18]         ;294  ; ms_X
00045e  f1410100          ADC      r1,r1,#0              ;294
000462  69e3              LDR      r3,[r4,#0x1c]         ;294  ; ms_X
000464  1a80              SUBS     r0,r0,r2              ;294
000466  4199              SBCS     r1,r1,r3              ;294
000468  d375              BCC      |L32.1366|
                  |L32.1130|
00046a  e6a6              B        |L32.442|
                  |L32.1132|
00046c  eb610102          SBC      r1,r1,r2              ;294
                  |L32.1136|
000470  62a0              STR      r0,[r4,#0x28]         ;323  ; ms_X
000472  62e1              STR      r1,[r4,#0x2c]         ;323  ; ms_X
                  |L32.1140|
000474  f8d91008          LDR      r1,[r9,#8]            ;331  ; ms_X
000478  f8d93004          LDR      r3,[r9,#4]            ;331  ; ms_X
00047c  680a              LDR      r2,[r1,#0]            ;331
00047e  f9933000          LDRSB    r3,[r3,#0]            ;331
000482  441a              ADD      r2,r2,r3              ;331
000484  600a              STR      r2,[r1,#0]            ;332
000486  f8d91008          LDR      r1,[r9,#8]            ;332  ; ms_X
00048a  4a62              LDR      r2,|L32.1556|
00048c  6809              LDR      r1,[r1,#0]            ;332
00048e  6451              STR      r1,[r2,#0x44]         ;332
000490  2101              MOVS     r1,#1                 ;333
000492  f8891000          STRB     r1,[r9,#0]            ;333
000496  e62b              B        |L32.240|
                  |L32.1176|
000498  685b              LDR      r3,[r3,#4]            ;297  ; mc_X
00049a  e9d32300          LDRD     r2,r3,[r3,#0]         ;297
00049e  6925              LDR      r5,[r4,#0x10]         ;297  ; ms_X
0004a0  e9c52300          STRD     r2,r3,[r5,#0]         ;297
0004a4  6923              LDR      r3,[r4,#0x10]         ;298  ; ms_X
0004a6  e9d32300          LDRD     r2,r3,[r3,#0]         ;298
0004aa  f7fffffe          BL       __aeabi_uldivmod
0004ae  61a0              STR      r0,[r4,#0x18]         ;298  ; ms_X
0004b0  61e1              STR      r1,[r4,#0x1c]         ;298  ; ms_X
0004b2  6a20              LDR      r0,[r4,#0x20]         ;299  ; ms_X
0004b4  6a61              LDR      r1,[r4,#0x24]         ;299  ; ms_X
0004b6  1c40              ADDS     r0,r0,#1              ;299
0004b8  69a2              LDR      r2,[r4,#0x18]         ;299  ; ms_X
0004ba  f1410100          ADC      r1,r1,#0              ;299
0004be  69e3              LDR      r3,[r4,#0x1c]         ;299  ; ms_X
0004c0  1a80              SUBS     r0,r0,r2              ;299
0004c2  4199              SBCS     r1,r1,r3              ;299
0004c4  d2d1              BCS      |L32.1130|
                  |L32.1222|
0004c6  69a0              LDR      r0,[r4,#0x18]         ;299  ; ms_X
0004c8  69e1              LDR      r1,[r4,#0x1c]         ;299  ; ms_X
0004ca  6a23              LDR      r3,[r4,#0x20]         ;299  ; ms_X
0004cc  6a62              LDR      r2,[r4,#0x24]         ;299  ; ms_X
0004ce  1ac0              SUBS     r0,r0,r3              ;299
0004d0  e7cc              B        |L32.1132|
                  |L32.1234|
0004d2  6923              LDR      r3,[r4,#0x10]         ;306  ; ms_X
0004d4  686f              LDR      r7,[r5,#4]            ;306  ; mc_X
0004d6  e9d3c300          LDRD     r12,r3,[r3,#0]        ;306
0004da  e9d76700          LDRD     r6,r7,[r7,#0]         ;306
0004de  ebbc0606          SUBS     r6,r12,r6             ;306
0004e2  41bb              SBCS     r3,r3,r7              ;306
0004e4  d23d              BCS      |L32.1378|
0004e6  6923              LDR      r3,[r4,#0x10]         ;308  ; ms_X
0004e8  46aa              MOV      r10,r5                ;308
0004ea  696d              LDR      r5,[r5,#0x14]         ;308  ; mc_X
0004ec  69a6              LDR      r6,[r4,#0x18]         ;308  ; ms_X
0004ee  882d              LDRH     r5,[r5,#0]            ;308
0004f0  69e7              LDR      r7,[r4,#0x1c]         ;308  ; ms_X
0004f2  fba5c806          UMULL    r12,r8,r5,r6          ;308
0004f6  fb028206          MLA      r2,r2,r6,r8           ;308
0004fa  fb052207          MLA      r2,r5,r7,r2           ;308
0004fe  e9d35600          LDRD     r5,r6,[r3,#0]         ;308
000502  eb1c0505          ADDS     r5,r12,r5             ;308
000506  4172              ADCS     r2,r2,r6              ;308
000508  e9c35200          STRD     r5,r2,[r3,#0]         ;308
00050c  68e2              LDR      r2,[r4,#0xc]          ;309  ; ms_X
00050e  1c52              ADDS     r2,r2,#1              ;309
000510  60e2              STR      r2,[r4,#0xc]          ;309  ; ms_X
000512  f8da2004          LDR      r2,[r10,#4]           ;310  ; mc_X
000516  6925              LDR      r5,[r4,#0x10]         ;310  ; ms_X
000518  e9d23200          LDRD     r3,r2,[r2,#0]         ;310
00051c  e9d56500          LDRD     r6,r5,[r5,#0]         ;310
000520  1b9b              SUBS     r3,r3,r6              ;310
000522  41aa              SBCS     r2,r2,r5              ;310
000524  d206              BCS      |L32.1332|
000526  f8da2004          LDR      r2,[r10,#4]           ;310  ; mc_X
00052a  6925              LDR      r5,[r4,#0x10]         ;310  ; ms_X
00052c  e9d23200          LDRD     r3,r2,[r2,#0]         ;310
000530  e9c53200          STRD     r3,r2,[r5,#0]         ;310
                  |L32.1332|
000534  6923              LDR      r3,[r4,#0x10]         ;311  ; ms_X
000536  e9d32300          LDRD     r2,r3,[r3,#0]         ;311
00053a  f7fffffe          BL       __aeabi_uldivmod
00053e  61a0              STR      r0,[r4,#0x18]         ;311  ; ms_X
000540  61e1              STR      r1,[r4,#0x1c]         ;311  ; ms_X
000542  6a20              LDR      r0,[r4,#0x20]         ;312  ; ms_X
000544  6a61              LDR      r1,[r4,#0x24]         ;312  ; ms_X
000546  1c40              ADDS     r0,r0,#1              ;312
000548  69a3              LDR      r3,[r4,#0x18]         ;312  ; ms_X
00054a  f1410100          ADC      r1,r1,#0              ;312
00054e  69e2              LDR      r2,[r4,#0x1c]         ;312  ; ms_X
000550  1ac0              SUBS     r0,r0,r3              ;312
000552  4191              SBCS     r1,r1,r2              ;312
000554  d289              BCS      |L32.1130|
                  |L32.1366|
000556  69a3              LDR      r3,[r4,#0x18]         ;323  ; ms_X
000558  69e1              LDR      r1,[r4,#0x1c]         ;323  ; ms_X
00055a  6a20              LDR      r0,[r4,#0x20]         ;323  ; ms_X
00055c  6a62              LDR      r2,[r4,#0x24]         ;323  ; ms_X
00055e  1a18              SUBS     r0,r3,r0              ;323
000560  e784              B        |L32.1132|
                  |L32.1378|
000562  686b              LDR      r3,[r5,#4]            ;315  ; mc_X
000564  f8d4c010          LDR      r12,[r4,#0x10]        ;315  ; ms_X
000568  e9d36300          LDRD     r6,r3,[r3,#0]         ;315
00056c  e9dc7c00          LDRD     r7,r12,[r12,#0]       ;315
000570  1bf6              SUBS     r6,r6,r7              ;315
000572  eb73030c          SBCS     r3,r3,r12             ;315
000576  f4bfae68          BCS      |L32.586|
00057a  696b              LDR      r3,[r5,#0x14]         ;317  ; mc_X
00057c  46aa              MOV      r10,r5                ;317
00057e  69a7              LDR      r7,[r4,#0x18]         ;317  ; ms_X
000580  881b              LDRH     r3,[r3,#0]            ;317
000582  0fde              LSRS     r6,r3,#31             ;317
000584  f8d4c01c          LDR      r12,[r4,#0x1c]        ;317  ; ms_X
000588  fba35807          UMULL    r5,r8,r3,r7           ;317
00058c  fb068607          MLA      r6,r6,r7,r8           ;317
000590  fb03630c          MLA      r3,r3,r12,r6          ;317
000594  6924              LDR      r4,[r4,#0x10]         ;317  ; ms_X
000596  e9d46400          LDRD     r6,r4,[r4,#0]         ;317
00059a  1bad              SUBS     r5,r5,r6              ;317
00059c  41a3              SBCS     r3,r3,r4              ;317
00059e  d218              BCS      |L32.1490|
0005a0  f8d94010          LDR      r4,[r9,#0x10]         ;318  ; ms_X
0005a4  f8da5014          LDR      r5,[r10,#0x14]        ;318  ; mc_X
0005a8  f8d97018          LDR      r7,[r9,#0x18]         ;318  ; ms_X
0005ac  882d              LDRH     r5,[r5,#0]            ;318
0005ae  0fee              LSRS     r6,r5,#31             ;318
0005b0  f8d9301c          LDR      r3,[r9,#0x1c]         ;318  ; ms_X
0005b4  fba5c807          UMULL    r12,r8,r5,r7          ;318
0005b8  fb068607          MLA      r6,r6,r7,r8           ;318
0005bc  fb056503          MLA      r5,r5,r3,r6           ;318
0005c0  e9d46300          LDRD     r6,r3,[r4,#0]         ;318
0005c4  ebb6060c          SUBS     r6,r6,r12             ;318
0005c8  eb630305          SBC      r3,r3,r5              ;318
0005cc  e9c46300          STRD     r6,r3,[r4,#0]         ;318
0005d0  e004              B        |L32.1500|
                  |L32.1490|
0005d2  f8d95010          LDR      r5,[r9,#0x10]         ;319  ; ms_X
0005d6  2300              MOVS     r3,#0                 ;318
0005d8  e9c53300          STRD     r3,r3,[r5,#0]         ;319
                  |L32.1500|
0005dc  f8d9300c          LDR      r3,[r9,#0xc]          ;320  ; ms_X
0005e0  464c              MOV      r4,r9                 ;320
0005e2  2b01              CMP      r3,#1                 ;320
0005e4  db01              BLT      |L32.1514|
0005e6  68e2              LDR      r2,[r4,#0xc]          ;320  ; ms_X
0005e8  1e52              SUBS     r2,r2,#1              ;320
                  |L32.1514|
0005ea  60e2              STR      r2,[r4,#0xc]          ;320  ; ms_X
0005ec  6922              LDR      r2,[r4,#0x10]         ;321  ; ms_X
0005ee  f8da5004          LDR      r5,[r10,#4]           ;321  ; mc_X
0005f2  e9d26300          LDRD     r6,r3,[r2,#0]         ;321
0005f6  4652              MOV      r2,r10                ;321
0005f8  e9d57500          LDRD     r7,r5,[r5,#0]         ;321
0005fc  1bf6              SUBS     r6,r6,r7              ;321
0005fe  41ab              SBCS     r3,r3,r5              ;321
000600  f4bfaf22          BCS      |L32.1096|
000604  6853              LDR      r3,[r2,#4]            ;321  ; mc_X
000606  e9d32300          LDRD     r2,r3,[r3,#0]         ;321
00060a  6925              LDR      r5,[r4,#0x10]         ;321  ; ms_X
00060c  e9c52300          STRD     r2,r3,[r5,#0]         ;321
000610  e71a              B        |L32.1096|
;;;339    // тест
                          ENDP

000612  0000              DCW      0x0000
                  |L32.1556|
                          DCD      0x40024000

;*** Start embedded assembler ***

#line 1 "Main\\Motor_X.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___9_Motor_X_c_ClrSX____REV16|
#line 447 "C:\\Keil_v5\\ARM\\PACK\\ARM\\CMSIS\\5.0.1\\CMSIS\\Include\\cmsis_armcc.h"
|__asm___9_Motor_X_c_ClrSX____REV16| PROC
#line 448

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___9_Motor_X_c_ClrSX____REVSH|
#line 462
|__asm___9_Motor_X_c_ClrSX____REVSH| PROC
#line 463

 revsh r0, r0
 bx lr
	ENDP
	AREA ||.rrx_text||, CODE
	THUMB
	EXPORT |__asm___9_Motor_X_c_ClrSX____RRX|
#line 649
|__asm___9_Motor_X_c_ClrSX____RRX| PROC
#line 650

 rrx r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
